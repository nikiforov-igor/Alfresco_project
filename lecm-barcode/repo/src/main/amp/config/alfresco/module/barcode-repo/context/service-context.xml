<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:p="http://www.springframework.org/schema/p"
	   xmlns:util="http://www.springframework.org/schema/util"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<util:list id="lecm.barcode.models">
		<value>alfresco/module/barcode-repo/models/barcode-model.xml</value>
	</util:list>
	<util:list id="lecm.barcode.labels"></util:list>

	<util:list id="lecm.barcode.dictionaries">
		<value>alfresco/module/barcode-repo/dictionaries/lecm-print-commands-dic.xml</value>
		<value>alfresco/module/barcode-repo/dictionaries/lecm-print-commands-dic-items.xml</value>
		<value>alfresco/module/barcode-repo/dictionaries/lecm-employee-to-printer-dic.xml</value>
		<value>alfresco/module/barcode-repo/dictionaries/lecm-printer-objectType-items.xml</value>
	</util:list>

	<bean id="lecm.barcode.models.bootstrap" parent="dictionaryModelBootstrap"
		  depends-on="dictionaryBootstrap, ru.it.lecm.orgstructure.orgstructure-repo.orgBootstrap"
		  p:models-ref="lecm.barcode.models"
		  p:labels-ref="lecm.barcode.labels"
	/>

	<bean id="lecm.barcode.dictionaries.bootstrap" parent="lecmDictionaryBootstrap"
		  depends-on="lecm.barcode.models.bootstrap,
		  ru.it.lecm.business-journal.business-journal-repo.businessJournalBootstrap,
		  businessJournalLogEventsPolicy,
		  ru.it.lecm.notifications.notifications-repo.notificationsTemplatesBootstrap"
		  p:dictionaries-ref="lecm.barcode.dictionaries"
	/>

	<util:list id="lecm.barcode.groupOperations">
		<value>alfresco/module/barcode-repo/actions/print-barcode.xml</value>
	</util:list>

	<bean parent="lecmDictionaryBootstrap" depends-on="groupActionsService"
		  p:rootPath="/Business platform/LECM/Сервис Групповые операции"
		  p:dictionaries-ref="lecm.barcode.groupOperations"
	/>

	<bean id="lecm.barcode.thread.pool" class="org.alfresco.util.ThreadPoolExecutorFactoryBean"
		  p:poolName="barcodeServiceThreadPool"
		  p:corePoolSize="3"
		  p:maximumPoolSize="30"
	/>

	<bean id="barcodeService" parent="baseBean"
		  class="ru.it.lecm.barcode.beans.BarcodePrintServiceImpl"
		  init-method="init"
		  p:orgstructureService-ref="serviceOrgstructure"
		  p:dictionaryService-ref="serviceDictionary"
		  p:namespaceService-ref="namespaceService"
		  p:documentService-ref="documentService"
		  p:alfrescoDictionaryService-ref="dictionaryService"
		  p:printServiceURL="${lecm.barcode.printer.service.url}"
		  p:reportsManager-ref="reportsManager"
		  p:substitudeService-ref="substitudeService"
		  p:threadPoolExecutor-ref="lecm.barcode.thread.pool"
		  p:reportRenderMode="${lecm.barcode.report.render.mode}"
		  p:printMode="${lecm.barcode.print.mode}"
		  p:barcodeEnabled="#{new Boolean('${lecm.barcode.enabled}')}"
	/>

	<bean id="webscript.ru.it.lecm.barcode.GetNodeByDBID.get"
		  class="ru.it.lecm.barcode.webscripts.SearchByIDWebScript"
		  parent="webscript"
		  p:nodeService-ref="nodeService"
		  p:documentService-ref="documentService"
	/>

	<bean id="lecm.barcode.extension" parent="baseScript" class="ru.it.lecm.barcode.extensions.BarcodePrintExtension"
		  p:extensionName="barcodePrint"
		  p:barcodePrintService-ref="barcodeService"
	/>

	<util:list id="lecm.barcode.reports.files">
		<value>alfresco/module/barcode-repo/reports/barcode-generic.xml</value>
	</util:list>
	<bean id="lecm.barcode.reports.bootstrap" parent="lecmDictionaryBootstrap"
		  depends-on="reportsEditorService, reportsEditor.LogicEcmDictionariesBootstrap,
		  reportsEditorOnCreateAssocsPolicy, reportsEditorTemplatePolicy,
		  dataSourcePolicy, reportDescriptorPolicy"
		  p:rootPath="/Business platform/LECM/Сервис Редактор Отчетов/Отчеты"
		  p:dictionaries-ref="lecm.barcode.reports.files"
		  p:xmlImportListener-ref="lecm.barcode.reports.deployer"
	/>

	<util:list id="lecm.barcode.reports.ids">
		<value>barcode-generic</value>
	</util:list>
	<bean id="lecm.barcode.reports.deployer" parent="reportsDeployer"
		  p:reportsForDeploy-ref="lecm.barcode.reports.ids"
	/>

</beans>
