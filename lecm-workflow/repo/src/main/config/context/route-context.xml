<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:p="http://www.springframework.org/schema/p"
	   xmlns:util="http://www.springframework.org/schema/util"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<bean id="abstract.workflowRunner" abstract="true"/>

	<util:list id="approval.inputVariables">
		<value>documentAttachmentCategoryName</value>
		<value>workflowRole</value>
		<value>commentFileAttachmentCategoryName</value>
	</util:list>
	<bean id="approval.workflowRunner" parent="abstract.workflowRunner"
		  class="ru.it.lecm.workflow.beans.ApprovalWorkflowRunner"
		  p:inputVariables-ref="approval.inputVariables"/>

	<util:list id="signing.inputVariables">
		<value>documentAttachmentCategoryName</value>
		<value>workflowRole</value>
	</util:list>
	<bean id="signing.workflowRunner" parent="abstract.workflowRunner"
		  class="ru.it.lecm.workflow.beans.SigningWorkflowRunner"
		  p:inputVariables-ref="signing.inputVariables"/>

	<util:constant id="APPROVAL" static-field="ru.it.lecm.workflow.WorkflowType.APROVAL"/>
	<util:constant id="SIGNING" static-field="ru.it.lecm.workflow.WorkflowType.SIGNING"/>
	<util:map id="workflow.runners">
		<entry key-ref="APPROVAL" value-ref="approval.workflowRunner"/>
		<entry key-ref="SIGNING" value-ref="signing.workflowRunner"/>
	</util:map>
	<bean id="workflowRunnerService" class="ru.it.lecm.workflow.beans.WorkflowRunnerFactory"
		  p:runners-ref="workflow.runners"/>

</beans>
