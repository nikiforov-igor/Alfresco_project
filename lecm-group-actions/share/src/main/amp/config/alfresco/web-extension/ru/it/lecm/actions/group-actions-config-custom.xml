<alfresco-config>

    <config evaluator="node-type" condition="lecm-group-actions:script-action">
        <forms>
            <!-- Форма редатирования-->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:expression"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                    <show id="lecm-group-actions:isGroup"/>
                    <show id="lecm-group-actions:forCollection"/>
                    <show id="lecm-group-actions:availableForReader"/>
                    <show id="lecm-group-actions:order"/>
                    <show id="lecm-group-actions:form-fields-ref"/>
                    <show id="lecm-group-actions:script"/>
                </field-visibility>
	            <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl" />
                    </field>
                    <field id="lecm-group-actions:type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-types-control.ftl">
                            <control-param name="dataSource">/lecm/groupActions/types</control-param>
                            <control-param name="singleValue">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:form-fields-ref" label-id="label.form.data">
                        <control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
                            <control-param name="itemType">lecm-group-actions:form-field</control-param>
                            <control-param name="height">100</control-param>
                            <control-param name="fullDelete">true</control-param>
                            <control-param name="sort">lecm-group-actions:field-priority|true</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:script" >
                        <control template="/ru/it/lecm/base-share/components/controls/code-mirror-control.ftl">
                            <control-param name="rows">30</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-group-actions:script-action">
        <forms>
            <!-- Форма создания (по умолчанию) -->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:expression"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                    <show id="lecm-group-actions:isGroup"/>
                    <show id="lecm-group-actions:forCollection"/>
                    <show id="lecm-group-actions:availableForReader"/>
                    <show id="lecm-group-actions:order"/>
                    <show id="lecm-group-actions:script"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl" />
                    </field>
                    <field id="lecm-group-actions:type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-types-control.ftl">
                            <control-param name="dataSource">/lecm/groupActions/types</control-param>
                            <control-param name="singleValue">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:script">
                        <control template="/ru/it/lecm/base-share/components/controls/code-mirror-control.ftl">
                            <control-param name="rows">30</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-group-actions:workflow-action">
        <forms>
            <!-- Форма редатирования-->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:expression"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                    <show id="lecm-group-actions:isGroup"/>
                    <show id="lecm-group-actions:availableForReader"/>
                    <show id="lecm-group-actions:order"/>
                    <show id="lecm-group-actions:workflow"/>
                    <show id="lecm-group-actions:document-form-data"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl" />
                    </field>
                    <field id="lecm-group-actions:type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-types-control.ftl">
                            <control-param name="dataSource">/lecm/groupActions/types</control-param>
                            <control-param name="singleValue">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:workflow">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscript">/lecm/statemachine/editor/workflows</control-param>
                            <control-param name="withEmpty">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:document-form-data" label-id="statemachine.editor.form.label.inputFormData">
                        <control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
                            <control-param name="itemType">lecm-stmeditor:inputFormVariable</control-param>
                            <control-param name="height">100</control-param>
                            <control-param name="fullDelete">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-group-actions:workflow-action">
        <forms>
            <!-- Форма создания (по умолчанию) -->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:expression"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                    <show id="lecm-group-actions:isGroup"/>
                    <show id="lecm-group-actions:availableForReader"/>
                    <show id="lecm-group-actions:order"/>
                    <show id="lecm-group-actions:workflow"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl" />
                    </field>
                    <field id="lecm-group-actions:type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-types-control.ftl">
                            <control-param name="dataSource">/lecm/groupActions/types</control-param>
                            <control-param name="singleValue">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:workflow">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscript">/lecm/statemachine/editor/workflows</control-param>
                            <control-param name="withEmpty">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-group-actions:document-action">
        <forms>
            <!-- Форма редатирования-->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:expression"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                    <show id="lecm-group-actions:isGroup"/>
                    <show id="lecm-group-actions:availableForReader"/>
                    <show id="lecm-group-actions:order"/>
                    <show id="lecm-group-actions:document-type"/>
                    <show id="lecm-group-actions:document-connection"/>
                    <show id="lecm-group-actions:document-connection-system"/>
                    <show id="lecm-group-actions:document-autofill-enabled"/>
                    <show id="lecm-group-actions:document-form-data"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl" />
                    </field>
                    <field id="lecm-group-actions:type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-types-control.ftl">
                            <control-param name="dataSource">/lecm/groupActions/types</control-param>
                            <control-param name="singleValue">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:document-form-data" label-id="statemachine.editor.form.label.inputFormData">
                        <control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
                            <control-param name="itemType">lecm-stmeditor:inputFormVariable</control-param>
                            <control-param name="height">100</control-param>
                            <control-param name="fullDelete">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-group-actions:document-action">
        <forms>
            <!-- Форма создания (по умолчанию) -->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:expression"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                    <show id="lecm-group-actions:isGroup"/>
                    <show id="lecm-group-actions:order"/>
                    <show id="lecm-group-actions:document-type"/>
                    <show id="lecm-group-actions:document-connection"/>
                    <show id="lecm-group-actions:document-connection-system"/>
                    <show id="lecm-group-actions:document-connection-system"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl" />
                    </field>
                    <field id="lecm-group-actions:type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-types-control.ftl">
                            <control-param name="dataSource">/lecm/groupActions/types</control-param>
                            <control-param name="singleValue">false</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-group-actions:base-action">
        <forms>
            <form id="datagrid">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:title" force="true"/>
                    <show id="lecm-group-actions:type"/>
                    <show id="lecm-group-actions:statuses"/>
                </field-visibility>
                <appearance>
                	<field id="cm:title" label-id="lecm.group.actions.lbl.title.name"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-group-actions:form-field">
        <forms>
            <!-- Форма редатирования-->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-group-actions:field-id"/>
                    <show id="lecm-group-actions:field-type"/>
                    <show id="lecm-group-actions:field-priority"/>
                    <show id="lecm-group-actions:field-default-value"/>
                    <show id="lecm-group-actions:field-is-mandatory"/>
                    <show id="lecm-group-actions:field-control"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-group-actions:field-type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscriptType">server</control-param>
                            <control-param name="webscript">lecm/api/cm_cmobject/subclasses?recur=true&amp;withPrim=true&amp;exclNsp=act,cmiscustom,reporting,smf,trx,fm,app,imap,ia,st,pub,pubwf,lnk,srft,rc,flickr,wf,inwf</control-param>
                            <control-param name="withEmpty">false</control-param>
                            <control-param name="changeItemFireAction">selectFieldType</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:field-control">
                        <control template="/ru/it/lecm/documentforms/controls/form-field-component-control.ftl">
                            <control-param name="fromForm">false</control-param>
                            <control-param name="updateOnAction">selectFieldType</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-group-actions:form-field">
        <forms>
            <!-- Форма создания (по умолчанию) -->
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-group-actions:field-id"/>
                    <show id="lecm-group-actions:field-type"/>
                    <show id="lecm-group-actions:field-priority"/>
                    <show id="lecm-group-actions:field-default-value"/>
                    <show id="lecm-group-actions:field-is-mandatory"/>
                    <show id="lecm-group-actions:field-control"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-group-actions:field-type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscriptType">server</control-param>
                            <control-param name="webscript">lecm/api/cm_cmobject/subclasses?recur=true&amp;withPrim=truee&amp;exclNsp=act,cmiscustom,reporting,smf,trx,fm,app,imap,ia,st,pub,pubwf,lnk,srft,rc,flickr,wf,inwf</control-param>
                            <control-param name="withEmpty">false</control-param>
                            <control-param name="changeItemFireAction">selectFieldType</control-param>
                        </control>
                    </field>
                    <field id="lecm-group-actions:field-control">
                        <control template="/ru/it/lecm/documentforms/controls/form-field-component-control.ftl">
                            <control-param name="fromForm">false</control-param>
                            <control-param name="updateOnAction">selectFieldType</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <!-- Форма для табличного представления (набор столбцов)-->
            <form id="datagrid">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-group-actions:field-id"/>
                    <show id="lecm-group-actions:field-type"/>
                </field-visibility>
            </form>
        </forms>
    </config>

<!--TODO: Судя по всему неактуально, отсмотреть внимательнее --> 
<!--    <config evaluator="model-type" condition="lecm-group-actions:form-data">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-group-actions:form-data-value" force="true"/>
                    <show id="lecm-group-actions:form-data-type" force="true"/>
                    <show id="lecm-group-actions:form-data-sender" force="true"/>
                </field-visibility>
                <appearance>
                    <set id="sender" appearance="bordered-panel" label-id="statemachine.editor.form.label.statemachine_sender" />
                    <set id="receiver" appearance="bordered-panel" label-id="statemachine.editor.form.label.form_receive" />
                    <field id="lecm-group-actions:form-data-value" set="receiver"/>
                    <field id="lecm-group-actions:form-data-type" set="sender"/>
                    <field id="lecm-group-actions:form-data-sender" set="sender"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-group-actions:form-data">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-group-actions:form-data-value" force="true"/>
                    <show id="lecm-group-actions:form-data-type" force="true"/>
                    <show id="lecm-group-actions:form-data-sender" force="true"/>
                </field-visibility>
                <appearance>
                    <set id="sender" appearance="bordered-panel" label-id="statemachine.editor.form.label.statemachine_sender" />
                    <set id="receiver" appearance="bordered-panel" label-id="statemachine.editor.form.label.form_receive" />
                    <field id="lecm-group-actions:form-data-value" set="receiver"/>
                    <field id="lecm-group-actions:form-data-type" set="sender"/>
                    <field id="lecm-group-actions:form-data-sender" set="sender"/>
                </appearance>
            </form>
        </forms>
    </config>-->


</alfresco-config>