<?xml version="1.0" encoding="UTF-8"?>

<model name="lecm-cal:calendar-model" xmlns="http://www.alfresco.org/model/dictionary/1.0">
	<description>Calendar Data Model</description>
	<author>Vsevolod Levin</author>
	<version>1.0</version>

	<imports>
		<!-- Import Alfresco Dictionary Definitions -->
		<import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
		<!-- Import Alfresco Content Domain Model Definitions -->
		<import uri="http://www.alfresco.org/model/content/1.0" prefix="cm"/>
	</imports>

	<namespaces>
		<namespace uri="http://www.it.ru/logicECM/model/work-calendar/calendar/1.0" prefix="lecm-cal"/>
	</namespaces>

	<types>
		<!-- Производственный календарь. В поле year нам интересен только год.  -->
		<type name="lecm-cal:calendar">
			<title>Calendar</title>
			<parent>cm:folder</parent>
			<properties>
				<property name="lecm-cal:year">
					<type>d:int</type>
					<mandatory>true</mandatory>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
				<property name="lecm-cal:comment">
					<type>d:text</type>
					<mandatory>false</mandatory>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
			</properties>
		</type>
		<!-- Сущность, от которой наследуются выходные и рабочие дни. -->
		<type name="lecm-cal:special-days">
			<parent>cm:cmobject</parent>
			<properties>
				<!-- День, который несправедливо является рабочим или нерабочим -->
				<property name="lecm-cal:day">
					<type>d:text</type>
					<mandatory>true</mandatory>
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
				<!-- Причина несправедливости. -->
				<property name="lecm-cal:reason">
					<type>d:text</type>
					<mandatory>true</mandatory> 
					<index enabled="true">
						<atomic>true</atomic>
						<stored>false</stored>
						<tokenised>both</tokenised>
					</index>
				</property>
			</properties>
		</type>
		<!-- Выходные дни, которые стали рабочими из-за переноса праздников. -->
		<type name="lecm-cal:working-days">
			<parent>lecm-cal:special-days</parent>
		</type>
		<!-- Нерабочие дни, праздники. Кроме суббот и воскресений. -->
		<type name="lecm-cal:non-working-days">
			<parent>lecm-cal:special-days</parent>
		</type>
	</types>
</model>