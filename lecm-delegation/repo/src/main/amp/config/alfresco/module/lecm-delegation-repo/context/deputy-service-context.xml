<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:util="http://www.springframework.org/schema/util"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<util:constant id="deputyFolder" static-field="ru.it.lecm.deputy.DeputyService.DEPUTY_FOLDER"/>
	<util:constant id="deputySettingsFolder" static-field="ru.it.lecm.deputy.DeputyService.DEPUTY_SETTINGS_FOLDER"/>


	<bean id="deputyModelBootstrap"
		  parent="dictionaryModelBootstrap"
		  depends-on="dictionaryBootstrap, ru.it.lecm.orgstructure.orgstructure-repo.orgStructureBootstrap, ru.it.lecm.dictionary.dictionary-repo.dictionary">
		<property name="models">
			<list>
				<value>alfresco/module/${artifactId}/models/lecm-deputy-model.xml</value>
			</list>
		</property>
		<property name="labels">
			<list>
				<value>alfresco/module/${artifactId}/messages/deputy</value>
			</list>
		</property>
	</bean>

	<bean id="deputyService" class="ru.it.lecm.deputy.beans.DeputyServiceImpl" parent="baseBean"
		  depends-on="deputyModelBootstrap">
		<property name="folders">
			<map>
				<entry key="#{deputyFolder}" value="Сервис Заместители"/>
				<entry key="#{deputySettingsFolder}" value="Сервис Заместители/Настройки"/>
			</map>
		</property>
		<property name="orgstructureService" ref="serviceOrgstructure"/>
		<property name="lecmDictionaryService" ref="serviceDictionary"/>
		<property name="defultSubjectDictionaryName" value="#{'${lecm.deputy.default.dictionary}' == '$'+'{lecm.deputy.default.dictionary}' ? 'Тематика' : '${lecm.deputy.default.dictionary}'}"/>
	</bean>

	<bean id="deputyJavascriptExtension" class="ru.it.lecm.deputy.extensions.DeputyServiceJavascriptExtesion" parent="baseScript">
		<property name="extensionName" value="deputyService"/>
		<property name="deputyService" ref="deputyService"/>
		<property name="orgstructureService" ref="serviceOrgstructure"/>
	</bean>

	<bean id="deputyPolicy" class="ru.it.lecm.deputy.policy.DeputyPolicy" init-method="init">
		<property name="policyComponent" ref="policyComponent"/>
		<property name="nodeService" ref="nodeService"/>
		<property name="deputyService" ref="deputyService"/>
	</bean>

	<bean id="deputyAssociationPolicy" class="ru.it.lecm.deputy.policy.DeputyAssociationPolicy" init-method="init">
		<property name="deputyService" ref="deputyService"/>
		<property name="nodeService" ref="nodeService"/>
		<property name="policyComponent" ref="policyComponent"/>
	</bean>

</beans>