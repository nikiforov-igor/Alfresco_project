<?xml version="1.0" encoding="UTF-8"?>
<ds.config>
    <report.descriptor mnem="nd-reg-journal">
        <l18>
            <item key="RU_RU"><![CDATA[Журнал регистрации нормативных документов]]></item>
        </l18>
        <provider
            javaClass="ru.it.lecm.reports.generators.GenericDSProviderBase" mnem="PROV_GENERIC_PROVIDER">
            <l18>
                <item key="RU_RU"><![CDATA[genericProvider]]></item>
            </l18>
        </provider>
        <templates>
            <template filename="nd-reg-journal.jrxml"
                mnem="default" type="JASPER">
                <l18>
                    <item key="RU_RU"><![CDATA[Шаблон]]></item>
                </l18>
            </template>
        </templates>
        <datasource.descriptor>
            <l18>
                <item key="RU_RU"><![CDATA[963293f1-4a45-48c3-a473-d314d4bf40ef]]></item>
            </l18>
        </datasource.descriptor>
        <roles/>
    </report.descriptor>
    <query.descriptor>
        <offset>0</offset>
        <limit>-1</limit>
        <pgsize>-1</pgsize>
        <queryText><![CDATA[+TYPE:"lecm-nd:document"]]></queryText>
        <querySort><![CDATA[docDate|ASC]]></querySort>
        <allVersions>true</allVersions>
        <preferedType>lecm-nd:document</preferedType>
        <isMultiRow>true</isMultiRow>
        <isCustom>false</isCustom>
        <flags/>
    </query.descriptor>
    <fields>
        <field alfrescoType="d:text" displayName="Подписант"
            javaValueClass="java.util.List" jrFldName="signatory" queryFldName="{{subreport::signatory}}">
            <l18>
                <item key="RU_RU"><![CDATA[Подписант]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Дата документа"
            javaValueClass="java.util.Date" jrFldName="docDate" queryFldName="{cm:created}">
            <l18>
                <item key="RU_RU"><![CDATA[Дата документа]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Регистрационный номер"
            javaValueClass="java.lang.String" jrFldName="regNum" queryFldName="{~REGNUM}">
            <l18>
                <item key="RU_RU"><![CDATA[Регистрационный номер]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Вид документа"
            javaValueClass="java.lang.String" jrFldName="docType" queryFldName="{lecm-eds-document:document-type-assoc-text-content}">
            <l18>
                <item key="RU_RU"><![CDATA[Вид документа]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Заголовок"
            javaValueClass="java.lang.String" jrFldName="docTitle" queryFldName="{lecm-document:title}">
            <l18>
                <item key="RU_RU"><![CDATA[Заголовок]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Автор"
            javaValueClass="java.lang.String" jrFldName="docAuthor" queryFldName="{lecm-document:creator}">
            <l18>
                <item key="RU_RU"><![CDATA[Автор]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Статус"
            javaValueClass="java.lang.String" jrFldName="docStatus" queryFldName="{lecm-statemachine:status}">
            <l18>
                <item key="RU_RU"><![CDATA[Статус]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Дата начала действия"
            javaValueClass="java.util.Date" jrFldName="docBeginDate" queryFldName="{lecm-nd:begin-date}">
            <l18>
                <item key="RU_RU"><![CDATA[Дата документа]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Дата окончания действия"
            javaValueClass="java.util.Date" jrFldName="docEndDate" queryFldName="{lecm-nd:end-date}">
            <l18>
                <item key="RU_RU"><![CDATA[Дата документа]]></item>
            </l18>
        </field>
    </fields>
    <subreports>
        <subreport destColumnName="signatory" name="signatory">
            <sublist.source><![CDATA[{cm:contains(cm:name=Подписание)/cm:contains/cm:contains/}]]></sublist.source>
            <sublist.item>
                <map>
                    <item key="signatory"><![CDATA[{lecm-workflow-result:workflow-result-item-employee-assoc/lecm-orgstr:employee-short-name}]]></item>
                </map>
            </sublist.item>
        </subreport>
    </subreports>
</ds.config>
