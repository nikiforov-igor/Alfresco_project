<alfresco-config>
	<config evaluator="string-compare" condition="activiti$lecmReview">
		<forms>
			<form>
				<field-visibility>
					<show id="bpm:workflowDueDate"/>
					<show id="lecmReview:noReviewControl"/>
					<show id="packageItems"/>
					<show id="bpm:workflowDescription" />
					<show id="lecm-workflow:assigneesListAssoc" />
					<show id="lecmReview:documentAttachmentCategoryName"/>
				</field-visibility>
				<appearance>
					<field id="bpm:workflowDueDate" mandatory="true">
						<control template="/ru/it/lecm/base-share/components/controls/date.ftl">
							<control-param name="minLimitCurrentDate">true</control-param>
						</control>
					</field>
					<field id="lecm-workflow:assigneesListAssoc">
						<control template="/ru/it/lecm/workflow/review/controls/review-assignee-control.ftl"/>
					</field>	
					<field id="bpm:workflowDescription">
						<control template="/ru/it/lecm/documents/controls/workflow/document-present-string-hidden.ftl">
							<control-param name="leftPartTextCode">ru.it.lecm.workflow.review.workflowDescription.message</control-param>
						</control>
					</field>
					<field id="packageItems">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
					</field>
					<field id="lecmReview:documentAttachmentCategoryName">
						<control template="/ru/it/lecm/base-share/components/controls/hidden.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="task-type" condition="lecmReview:reviewTask">
		<forms>
			<form>
				<field-visibility>
					<show id="lecmReview:presentString" force="true"/>
					<show id="bpm:dueDate" />
					<show id="lecmReview:documentPreview" force="true" />
					<show id="lecmReview:reviewTaskResult" />
					<show id="transitions" force="true" />
					<show id="bpm:reassignable" />
				</field-visibility>
				<appearance>
					<field id="lecmReview:presentString">
						<control template="/ru/it/lecm/workflow/controls/document-present-string.ftl" />
					</field>
					<field id="bpm:dueDate" label-id="workflow.field.due">
						<control template="/org/alfresco/components/form/controls/info.ftl" />
					</field>
					<field id="lecmReview:reviewTaskResult">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl">
							<control-param name="fieldValue">REVIEWED</control-param>
						</control>
					</field>
					<field id="transitions">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl">
							<control-param name="fieldValue">Next</control-param>
						</control>
					</field>
					<field id="lecmReview:documentPreview">
						<control template="/ru/it/lecm/documents/controls/document-preview-control.ftl" />
					</field>
					<field id="bpm:reassignable">
						<control template="/ru/it/lecm/base-share/components/controls/reassign-task-control.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="task-type" condition="lecmReview:review">
		<forms>
			<form id="workflow-details">
				<field-visibility>
					<show id="packageItems"/>
				</field-visibility>
				<appearance>
					<field id="packageItems">
						<control template="/ru/it/lecm/workflow/controls/package-items-with-result-list-control.ftl">
							<control-param name="nameSubstituteString">{lecm-document:present-string}</control-param>
							<control-param name="resultListType">lecm-workflow-result:workflow-result-list</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form>
				<field-visibility>
					<hide id="packageItems"/>
					<hide id="lecm-workflow:assigneesListAssoc"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-workflow-result:workflow-result-list">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-workflow-result:workflow-result-list-document-version"/>
					<show id="lecm-workflow-result:workflow-result-list-start-date"/>
					<show id="lecm-workflow-result:workflow-result-list-complete-date"/>
					<show id="lecm-workflow-result:workflow-result-list-workflow-result-item-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-workflow-result:workflow-result-list-workflow-result-item-assoc">
						<control template="/ru/it/lecm/workflow/controls/result-list.ftl">
							<control-param name="itemType">lecm-review-result:review-result-item</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-review-result:review-result-item">
		<forms>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-workflow-result:workflow-result-item-employee-assoc"/>
					<show id="lecm-workflow-result:workflow-result-item-employee-position" force="true"/>
					<show id="lecm-workflow-result:workflow-result-item-employee-unit" force="true"/>
					<show id="lecm-workflow-result:workflow-result-item-finish-date"/>
					<show id="lecm-review-result:review-result-item-result"/>
				</field-visibility>
				<appearance>
					<field id="lecm-workflow-result:workflow-result-item-employee-assoc" substituteString="{lecm-orgstr:employee-short-name}"/>
					<field id="lecm-workflow-result:workflow-result-item-employee-position" substituteString="{lecm-workflow-result:workflow-result-item-employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}" />
					<field id="lecm-workflow-result:workflow-result-item-employee-unit" substituteString="{lecm-workflow-result:workflow-result-item-employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}" />
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-workflow:assignee">
		<forms>
			<form id="reviewAssigneeList">
				<field-visibility>
					<show id="lecm-workflow:assignee-employee-assoc"/>
					<show id="lecm-workflow:assignee-employee-position-fake"/>
					<show id="lecm-workflow:assignee-employee-unit-fake"/>
				</field-visibility>
				<appearance>
					<field id="lecm-workflow:assignee-employee-assoc" substituteString="{lecm-orgstr:employee-short-name}"/>
					<field id="lecm-workflow:assignee-employee-position-fake" label-id="lecm.review.label.position" substituteString="{lecm-workflow:assignee-employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}" />
					<field id="lecm-workflow:assignee-employee-unit-fake" label-id="lecm.review.label.unit" substituteString="{lecm-workflow:assignee-employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}" />
				</appearance>
			</form>
			<form id="addEmployeesToReview">
				<field-visibility>
					<show id="lecm-workflow:assignee-employee-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-workflow:assignee-employee-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="itemType">lecm-orgstr:employee</control-param>
							<control-param name="endpointMany">true</control-param>
							<control-param name="useStrictFilterByOrg">true</control-param>
							<control-param name="plane">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>
