<alfresco-config>

    <config evaluator="node-type" condition="lecm-orgstr:employee">
        <forms>
            <form>
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-sex"/>
                    <show id="lecm-orgstr:employee-email"/>
                    <show id="lecm-orgstr:employee-photo-assoc"/>
                    <show id="lecm-orgstr:employee-phone"/>
                    <show id="lecm-orgstr:employee-number"/>
                    <show id="lecm-orgstr:employee-fio-g" for-mode="edit"/>
                    <show id="lecm-orgstr:employee-fio-d" for-mode="edit"/>
                    <show id="lecm-orgstr:employee-person-assoc" for-mode="edit"/>
                    <show id="lecm-orgstr:employee-person-data-assoc"/>
                    <show id="lecm-base-dummy-aspects:script" force="true"/>
                    <show id="lecm-orgstr:employee-roles"/>
	                <show id="lecm-busjournal-aspects:history-list"/>
	                <show id="lecm-orgstr:employee-only-business-roles"/>
	                <show id="lecm-orgstr:employee-delegated-business-roles"/>
                    <show id="lecm-base-dummy-aspects:script2" force="true" for-mode="view"/>
					<show id="lecm-subscr-aspects"/>
                </field-visibility>
                <appearance>
                    <set id="common" appearance="" label-id="info.common-info" />
                    <set id="fioAndPhoto" parent="common" template="/ru/it/lecm/base-share/components/controls/fio-and-photo.ftl" appearance="" label-id="" />
                    <set id="commonOther" parent="common" appearance="" label-id="" />
                    <set id="personal" appearance="" label-id="info.personal-info" />
                    <set id="personalInner" parent="personal" appearance="BR_ORGSTRUCTURE_ENGINEER" template="/ru/it/lecm/base-share/components/exist-bussines-role.ftl" />
                    <set id="positionsAndGroups" appearance="" label-id="info.personal-positions-and-groups" />
                    <set id="businessRoles" appearance="" label-id="info.business-roles"/>
                    <set id="businessRolesInner" parent="businessRoles" appearance="BR_ORGSTRUCTURE_ENGINEER" template="/ru/it/lecm/base-share/components/exist-bussines-role.ftl" />
                    <set id="busjournalHistory" appearance="" label-id="info.business-journal-history"/>
                    <set id="busjournalHistoryInner" parent="busjournalHistory" appearance="BR_ORGSTRUCTURE_ENGINEER" template="/ru/it/lecm/base-share/components/exist-bussines-role.ftl" />
                    <set id="employeeSchedule" appearance="" label-id="info.employee-schedule"/>

	                <field id="lecm-orgstr:employee-first-name" set="fioAndPhoto"/>
                    <field id="lecm-orgstr:employee-middle-name" set="fioAndPhoto"/>
                    <field id="lecm-orgstr:employee-last-name" set="fioAndPhoto"/>
                    <field id="lecm-orgstr:employee-photo-assoc" set="fioAndPhoto">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-uploader-control.ftl">
                            <control-param name="uploadDirectoryPath">{userhome}</control-param>
                            <control-param name="showImage">true</control-param>
                            <control-param name="hideItem">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-sex" set="commonOther">
	                    <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                    <field id="lecm-orgstr:employee-email" set="commonOther">
		                <constraint-handlers>
			                <constraint type="REGEX" validation-handler="LogicECM.module.repoRegexMatchColor" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:employee-phone" set="commonOther"/>
                    <field id="lecm-orgstr:employee-number" set="commonOther" help-id="lecm-validation-uniqueness-help-id">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="isUniqueValue">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-fio-g" set="commonOther"/>
                    <field id="lecm-orgstr:employee-fio-d" set="commonOther"/>
                    <field id="lecm-orgstr:employee-person-assoc" set="commonOther">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/sys:system/sys:people</control-param>
                            <control-param name="nameSubstituteString">{cm:firstName} {cm:lastName} ({cm:userName})</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="itemType">cm:person</control-param>
                            <control-param name="additionalFilter">NOT ASPECT: \"cm:personDisabled\"</control-param>
                            <control-param name="childrenDataSource">lecm/orgstructure/employee/person/picker</control-param>
                        </control>
                    </field>
                    <field id="lecm-subscr-aspects" set="commonOther"/>
                    <field id="lecm-subscr-aspects" set="commonOther">
                        <control template="/ru/it/lecm/subscriptions/controls/subscribe.ftl">
                            <control-param name="availableRoles">BR_SUBSCRIPTIONS_ENGINEER,BR_SUBSCRIBE_TO_USERS_ACTIONS</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-person-data-assoc" set="personalInner">
                        <control template="/ru/it/lecm/orgstructure/controls/view.personal.data.ftl"/>
                    </field>
                    <field id="lecm-base-dummy-aspects:script" set="positionsAndGroups" label-id="info.personal-positions">
                        <control template="/ru/it/lecm/orgstructure/controls/employee.positions.ctrl.ftl">
                            <control-param name="itemType">lecm-orgstr:staff-list</control-param>
                            <control-param name="allowCreate">false</control-param>
                            <control-param name="showActions">false</control-param>
                            <control-param name="datagridFormId">employee-positions</control-param>
                            <control-param name="ds">lecm/orgstructure/ds/employee-positions</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-roles" set="positionsAndGroups">
                        <control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
                            <control-param name="itemType">lecm-orgstr:workforce</control-param>
                            <control-param name="allowCreate">false</control-param>
                            <control-param name="showActions">false</control-param>
                            <control-param name="datagridFormId">employee-groups</control-param>
                            <control-param name="ds">lecm/orgstructure/ds/employee-roles</control-param>
                        </control>
                    </field>
	                <field id="lecm-orgstr:employee-only-business-roles" set="businessRolesInner"
                           label-id="lecm-orgstr_employee-business-roles">
                        <control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
                            <control-param name="itemType">lecm-orgstr:business-role</control-param>
                            <control-param name="allowCreate">false</control-param>
                            <control-param name="showActions">false</control-param>
                            <control-param name="datagridFormId">datagrid</control-param>
                            <control-param name="ds">lecm/orgstructure/ds/getEmployeeOnlyBusinessRoles</control-param>
                            <control-param name="fixedHeader">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-delegated-business-roles" set="businessRolesInner"
                           label-id="lecm-orgstr_employee-delegated-business-roles">
                        <control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
                            <control-param name="itemType">lecm-orgstr:business-role</control-param>
                            <control-param name="allowCreate">false</control-param>
                            <control-param name="showActions">false</control-param>
                            <control-param name="datagridFormId">datagrid</control-param>
                            <control-param name="ds">lecm/orgstructure/ds/getEmployeeDelegatedBusinessRoles</control-param>
                            <control-param name="fixedHeader">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal-aspects:history-list" set="busjournalHistoryInner" label-id="label.history-control">
                        <control template="/ru/it/lecm/business-journal/components/controls/bjHistory-datagrid-control.ftl">
                            <control-param name="fixedHeader">true</control-param>
                        </control>
                    </field>
					<field id="lecm-base-dummy-aspects:script2" set="employeeSchedule">
						<control template="/ru/it/lecm/orgstructure/controls/employee.schedule.ftl"/>
					</field>
                </appearance>
            </form>
            <form id="versions">
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-sex"/>
                    <show id="lecm-orgstr:employee-email"/>
                    <show id="lecm-orgstr:employee-photo-assoc"/>
                    <show id="lecm-orgstr:employee-phone"/>
                    <show id="lecm-orgstr:employee-number"/>
                    <show id="lecm-orgstr:employee-fio-g"/>
                    <show id="lecm-orgstr:employee-fio-d"/>
                    <show id="lecm-orgstr:employee-person-assoc"/>
                    <show id="lecm-orgstr:employee-person-data-assoc"/>
                </field-visibility>
                <appearance>
                    <set id="common" appearance="" label-id="info.common-info" />
                    <set id="personal" appearance="" label-id="info.personal-info" />
                    <field id="lecm-orgstr:employee-first-name" set="common"/>
                    <field id="lecm-orgstr:employee-middle-name" set="common"/>
                    <field id="lecm-orgstr:employee-last-name" set="common"/>
                    <field id="lecm-orgstr:employee-sex" set="common">
	                    <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                    <field id="lecm-orgstr:employee-email" set="common"/>
                    <field id="lecm-orgstr:employee-photo-assoc" set="common">
                        <control template="/ru/it/lecm/orgstructure/controls/show.image.ctrl.ftl"/>
                    </field>
                    <field id="lecm-orgstr:employee-phone" set="common"/>
                    <field id="lecm-orgstr:employee-number" set="common" help-id="lecm-validation-uniqueness-help-id">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="isUniqueValue">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-fio-g" set="common"/>
                    <field id="lecm-orgstr:employee-fio-d" set="common"/>
                    <field id="lecm-orgstr:employee-person-assoc" set="common"/>
                    <field id="lecm-subscr-aspects" set="common"/>
                    <field id="lecm-orgstr:employee-person-data-assoc" set="personal">
                        <control template="/ru/it/lecm/orgstructure/controls/view.personal.data.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="document">
                <!--<view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />-->
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-sex"/>
                    <show id="lecm-orgstr:employee-email"/>
                    <show id="lecm-orgstr:employee-photo-assoc"/>
                    <show id="lecm-orgstr:employee-phone"/>
                    <show id="lecm-orgstr:employee-number"/>
                    <show id="lecm-orgstr:employee-fio-g"/>
                    <show id="lecm-orgstr:employee-fio-d"/>
                    <show id="lecm-orgstr:employee-person-assoc"/>
                </field-visibility>
                <appearance>
                    <set id="common" appearance="panel" label-id="info.common-info" />
                    <field id="lecm-orgstr:employee-first-name" set="common"/>
                    <field id="lecm-orgstr:employee-middle-name" set="common"/>
                    <field id="lecm-orgstr:employee-last-name" set="common"/>
                    <field id="lecm-orgstr:employee-sex" set="common">
		                <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
	                </field>
                    <field id="lecm-orgstr:employee-email" set="common"/>
                    <field id="lecm-orgstr:employee-photo-assoc" set="common">
                        <control template="/ru/it/lecm/orgstructure/controls/show.image.ctrl.ftl"/>
                    </field>
                    <field id="lecm-orgstr:employee-phone" set="common"/>
                    <field id="lecm-orgstr:employee-number" set="common" help-id="lecm-validation-uniqueness-help-id">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="isUniqueValue">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-fio-g" set="common"/>
                    <field id="lecm-orgstr:employee-fio-d" set="common"/>
                    <field id="lecm-orgstr:employee-person-assoc" set="common"/>
                    <field id="lecm-subscr-aspects" set="common"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:employee">
        <forms>
            <form>
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <!-- чтобы иметь возможность сохранить с требуемым именем-->
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-sex"/>
                    <show id="lecm-orgstr:employee-email"/>
                    <show id="lecm-orgstr:employee-photo-assoc"/>
                    <show id="lecm-orgstr:employee-phone"/>
                    <show id="lecm-orgstr:employee-number"/>
                    <show id="lecm-orgstr:employee-fio-g"/>
                    <show id="lecm-orgstr:employee-fio-d"/>
                    <show id="lecm-orgstr:employee-person-assoc"/>
                </field-visibility>
                <appearance>
                    <set id="fioAndPhoto" template="/ru/it/lecm/base-share/components/controls/fio-and-photo.ftl" appearance="" label-id="" />
                    <set id="commonOther" appearance="" label-id="" />

                    <field id="lecm-orgstr:employee-first-name" set="fioAndPhoto"/>
                    <field id="lecm-orgstr:employee-middle-name" set="fioAndPhoto"/>
                    <field id="lecm-orgstr:employee-last-name" set="fioAndPhoto"/>
                    <field id="lecm-orgstr:employee-photo-assoc" set="fioAndPhoto">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-uploader-control.ftl">
                            <control-param name="uploadDirectoryPath">{userhome}</control-param>
                            <control-param name="showImage">true</control-param>
                            <control-param name="hideItem">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-sex" set="commonOther">
		                <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
	                </field>
                    <field id="lecm-orgstr:employee-email" set="commonOther">
	                    <constraint-handlers>
		                    <constraint type="REGEX" validation-handler="LogicECM.module.repoRegexMatchColor" event="keyup" />
                    </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:employee-phone" set="commonOther"/>
                    <field id="lecm-orgstr:employee-number" set="commonOther" help-id="lecm-validation-uniqueness-help-id">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="isUniqueValue">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:employee-fio-g" set="commonOther"/>
                    <field id="lecm-orgstr:employee-fio-d" set="commonOther"/>
                    <field id="lecm-orgstr:employee-person-assoc" set="commonOther">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/sys:system/sys:people</control-param>
                            <control-param name="nameSubstituteString">{cm:firstName} {cm:lastName} ({cm:userName})</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="itemType">cm:person</control-param>
                            <control-param name="additionalFilter">NOT ASPECT: \"cm:personDisabled\"</control-param>
                            <control-param name="childrenDataSource">lecm/orgstructure/employee/person/picker</control-param>
                        </control>
                    </field>
                    <field id="cm:name" set="commonOther">
                        <control template="/org/alfresco/components/form/controls/hidden.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-phone"/>
	                <show id="lecm-orgstr:employee-main-unit" force="true"/>
	                <show id="lecm-orgstr:employee-main-position" force="true"/>
                    <show id="lecm-orgstr:employee-email"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:employee-main-unit" substituteString="{..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}"/>
		            <field id="lecm-orgstr:employee-main-position" substituteString="{..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}"/>
	            </appearance>
            </form>
            <form id="searchColumns">
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                </field-visibility>
            </form>
            <form id="arm-datagrid">
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-phone"/>
                    <show id="lecm-orgstr:employee-main-unit" force="true"/>
                    <show id="lecm-orgstr:employee-main-position" force="true"/>
                    <show id="lecm-orgstr:employee-email"/>
                    <show id="lecm-orgstr:employee-person-login"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:employee-main-unit" substituteString="{..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}"/>
                    <field id="lecm-orgstr:employee-main-position" substituteString="{..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}"/>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-orgstr:employee-last-name"/>
                    <show id="lecm-orgstr:employee-first-name"/>
                    <show id="lecm-orgstr:employee-middle-name"/>
                    <show id="lecm-orgstr:employee-sex"/>
                    <show id="lecm-orgstr:employee-email"/>
                    <show id="lecm-orgstr:employee-phone"/>
                    <show id="lecm-orgstr:employee-number"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:employee-last-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:employee-first-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:employee-middle-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:employee-sex" mandatory="false">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-empty.ftl">
                            <control-param name="nameSuffix">-strong-constant</control-param>
                        </control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:employee-email" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:organization">
        <forms>
            <form>
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:org-leg-address"/>
                    <show id="lecm-orgstr:org-act-address"/>
                    <show id="lecm-orgstr:org-off-site"/>
                    <show id="lecm-orgstr:org-phone"/>
                    <show id="lecm-orgstr:org-fax"/>
                    <show id="lecm-orgstr:org-email"/>
                    <show id="lecm-orgstr:organization-boss"/>
                    <show id="lecm-orgstr:org-logo-assoc"/>
                    <show id="lecm-orgstr:org-tin"/>
                    <show id="lecm-orgstr:org-kpp"/>
                    <show id="lecm-orgstr:org-ownership-type"/>
                    <show id="lecm-orgstr:org-incorporation-form"/>
                    <show id="lecm-orgstr:org-founding-docs"/>
                </field-visibility>
                <appearance>
                    <set id="main" appearance="" label-id="info.main" />
                    <set id="other" appearance="" label-id="info.more" />
                    <field id="lecm-orgstr:element-full-name" set="main"/>
                    <field id="lecm-orgstr:element-short-name" set="main"/>
                    <field id="lecm-orgstr:org-leg-address" set="main"/>
                    <field id="lecm-orgstr:org-act-address" set="main"/>
                    <field id="lecm-orgstr:org-off-site" set="main"/>
                    <field id="lecm-orgstr:org-phone" set="main"/>
                    <field id="lecm-orgstr:org-fax" set="main"/>
                    <field id="lecm-orgstr:org-email" set="main"/>
                    <field id="lecm-orgstr:organization-boss" set="other" label-id="lecm-orgstr_organization-boss">
                        <control template="/ru/it/lecm/orgstructure/controls/organization.boss.readonly.ftl"/>
                    </field>
                    <field id="lecm-orgstr:org-logo-assoc" set="other">
                        <control template="/ru/it/lecm/orgstructure/controls/show.image.ctrl.ftl">
                            <!-- Настройка для bubbling. type1:nameAction1,nameAction2|type2:nameAction1,nameAction2-->
                            <control-param name="fireAction">ok:imageUpdated</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:org-tin" set="other">
	                    <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
                    </field>
                    <field id="lecm-orgstr:org-kpp" set="other">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="maxLength">9</control-param>
                        </control>
                    </field>
					<field id="lecm-orgstr:org-ownership-type" set="other"/>
                    <field id="lecm-orgstr:org-incorporation-form" set="other"/>
                    <field id="lecm-orgstr:org-founding-docs" set="other"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:organization">
        <forms>
            <form>
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:org-leg-address"/>
                    <show id="lecm-orgstr:org-act-address"/>
                    <show id="lecm-orgstr:org-off-site"/>
                    <show id="lecm-orgstr:org-phone"/>
                    <show id="lecm-orgstr:org-fax"/>
                    <show id="lecm-orgstr:org-email"/>
                    <show id="lecm-orgstr:org-logo-assoc"/>
                    <show id="lecm-orgstr:org-tin"/>
                    <show id="lecm-orgstr:org-ownership-type"/>
                    <show id="lecm-orgstr:org-incorporation-form"/>
                    <show id="lecm-orgstr:org-founding-docs"/>
                </field-visibility>
                <appearance>
                    <set id="main" appearance="" label-id="info.main" />
                    <set id="other" appearance="" label-id="info.more" />
                    <field id="lecm-orgstr:element-full-name" set="main"/>
                    <field id="lecm-orgstr:element-short-name" set="main"/>
                    <field id="lecm-orgstr:org-leg-address" set="main"/>
                    <field id="lecm-orgstr:org-act-address" set="main"/>
                    <field id="lecm-orgstr:org-off-site" set="main"/>
                    <field id="lecm-orgstr:org-phone" set="main"/>
                    <field id="lecm-orgstr:org-fax" set="main"/>
                    <field id="lecm-orgstr:org-email" set="main"/>
                    <field id="lecm-orgstr:org-logo-assoc" set="other"/>
                    <field id="lecm-orgstr:org-tin" set="other"/>
                    <field id="lecm-orgstr:org-ownership-type" set="other"/>
                    <field id="lecm-orgstr:org-incorporation-form" set="other"/>
                    <field id="lecm-orgstr:org-founding-docs" set="other"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:organization-unit">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:unit-code"/>
                    <show id="lecm-orgstr:unit-type"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:unit-type">
			            <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
		            </field>
	            </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:organization-unit">
        <forms>
            <form>
                <field-visibility>
                    <!-- для того, чтобы сохранить под требуемым именем-->
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:unit-code"/>
                    <show id="lecm-orgstr:unit-type"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name">
                        <control template="/org/alfresco/components/form/controls/hidden.ftl"/>
                    </field>
	                <field id="lecm-orgstr:unit-type">
		                <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
	                </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-orgstr:element-short-name"/>
	                <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:boss"/>
                    <show id="lecm-orgstr:unit-code"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:boss" substituteString="{cm:contains(lecm-orgstr:staff-list-is-boss=true)/lecm-orgstr:element-member-employee-assoc/lecm-orgstr:employee-link-employee-assoc/lecm-orgstr:employee-short-name}"/>
	            </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:unit-code"/>
                    <show id="lecm-orgstr:unit-type"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:element-full-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:element-short-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:unit-code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-orgstr:unit-type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-empty.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:position">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:position-code"/>
                    <show id="lecm-orgstr:position-name-g"/>
                    <show id="lecm-orgstr:position-name-d"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:position">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:position-code"/>
                    <show id="lecm-orgstr:position-name-g"/>
                    <show id="lecm-orgstr:position-name-d"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:position-code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:personal-data">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:person-data-address"/>
                    <show id="lecm-orgstr:person-data-email"/>
                    <show id="lecm-orgstr:person-data-phone"/>
                    <show id="lecm-orgstr:person-data-date"/>
                    <show id="lecm-orgstr:person-data-service-id"/>
                    <show id="lecm-orgstr:person-data-docType-assoc"/>
                    <show id="lecm-orgstr:person-data-doc-series"/>
                    <show id="lecm-orgstr:person-data-doc-number"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:personal-data">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:person-data-address"/>
                    <show id="lecm-orgstr:person-data-email"/>
                    <show id="lecm-orgstr:person-data-phone"/>
                    <show id="lecm-orgstr:person-data-date"/>
                    <show id="lecm-orgstr:person-data-service-id"/>
                    <show id="lecm-orgstr:person-data-docType-assoc"/>
                    <show id="lecm-orgstr:person-data-doc-series"/>
                    <show id="lecm-orgstr:person-data-doc-number"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:workGroup">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:workGroup-description"/>
                    <show id="lecm-subscr-aspects"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:workGroup-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                    <field id="lecm-subscr-aspects">
                        <control template="/ru/it/lecm/subscriptions/controls/subscribe.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="versions">
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:workGroup-description"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:workGroup-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:workGroup">
        <forms>
            <form>
                <field-visibility>
                    <!-- Для сохранения с иным именем-->
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                    <show id="lecm-orgstr:workGroup-description"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name">
                        <control template="/org/alfresco/components/form/controls/hidden.ftl"/>
                    </field>
                    <field id="lecm-orgstr:workGroup-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-orgstr:element-short-name"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-orgstr:element-full-name"/>
                    <show id="lecm-orgstr:element-short-name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:workforce">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                    <show id="lecm-orgstr:workforce-comment"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:workforce-comment">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                    <field id="lecm-orgstr:element-member-position-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Роли_x0020_для_x0020_рабочих_x0020_групп</control-param>
                            <control-param name="bigItemIcon">components/images/filetypes/generic-site-32.png</control-param>
                            <control-param name="smallItemIcon">components/images/filetypes/generic-site-16.png</control-param>
	                        <control-param name="showCreateNewLink">false</control-param>
	                        <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="itemType">lecm-orgstr:workRole</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:workforce">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                    <show id="lecm-orgstr:workforce-comment"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:workforce-comment">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                    <field id="lecm-orgstr:element-member-position-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Роли_x0020_для_x0020_рабочих_x0020_групп</control-param>
                            <control-param name="bigItemIcon">components/images/filetypes/generic-site-32.png</control-param>
                            <control-param name="smallItemIcon">components/images/filetypes/generic-site-16.png</control-param>
	                        <control-param name="showCreateNewLink">false</control-param>
	                        <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="itemType">lecm-orgstr:workRole</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
	                <show id="lecm-orgstr:element-member-employee-assoc"/>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:element-member-employee-assoc" substituteString="{lecm-orgstr:employee-link-employee-assoc/lecm-orgstr:employee-short-name}"/>
	            </appearance>
            </form>
            <form id="employee-groups">
                <field-visibility>
                    <show id="lecm-orgstr:workforce-group" force="true"/>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:workforce-group" substituteString="{../lecm-orgstr:element-short-name}"/>
	            </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:staff-list">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                    <show id="lecm-orgstr:staff-list-description"/>
                    <show id="lecm-orgstr:staff-list-is-boss"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:element-member-position-assoc" label-id="lecm-orgstr_employee-main-position">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Должностные_x0020_позиции</control-param>
                            <control-param name="bigItemIcon">components/images/filetypes/generic-site-32.png</control-param>
                            <control-param name="smallItemIcon">components/images/filetypes/generic-site-16.png</control-param>
	                        <control-param name="showCreateNewLink">false</control-param>
	                        <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="itemType">lecm-orgstr:staffPosition</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:staff-list-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:staff-list">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                    <show id="lecm-orgstr:staff-list-description"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name">
                        <control template="/org/alfresco/components/form/controls/hidden.ftl"/>
                    </field>
	                <field id="lecm-orgstr:element-member-position-assoc" label-id="lecm-orgstr_employee-main-position">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Должностные_x0020_позиции</control-param>
                            <control-param name="bigItemIcon">components/images/filetypes/generic-site-32.png</control-param>
                            <control-param name="smallItemIcon">components/images/filetypes/generic-site-16.png</control-param>
	                        <control-param name="showCreateNewLink">false</control-param>
	                        <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="itemType">lecm-orgstr:staffPosition</control-param>
                        </control>
                    </field>
                    <field id="lecm-orgstr:staff-list-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                    <show id="lecm-orgstr:element-member-employee-assoc"/>
                    <show id="lecm-orgstr:staff-list-is-boss"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:element-member-position-assoc" label-id="lecm-orgstr_employee-main-position"/>
		            <field id="lecm-orgstr:element-member-employee-assoc" substituteString="{lecm-orgstr:employee-link-employee-assoc/lecm-orgstr:employee-short-name}"/>
	            </appearance>
            </form>
            <form id="employee-positions">
                <field-visibility>
                    <show id="lecm-orgstr-aspects:linked-organization-assoc" force="true"/>
                    <show id="lecm-orgstr:staff-unit" force="true"/>
                    <show id="lecm-orgstr:element-member-position-assoc"/>
                    <show id="lecm-orgstr:primary-position" force="true"/>
	                <show id="lecm-orgstr:staff-list-is-boss"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr-aspects:linked-organization-assoc" label-id="staff_organization"/>
		            <field id="lecm-orgstr:staff-unit" substituteString="{../lecm-orgstr:element-short-name}"/>
		            <field id="lecm-orgstr:element-member-position-assoc" label-id="lecm-orgstr_employee-main-position"/>
		            <field id="lecm-orgstr:primary-position" label-id="staff_is_primary" substituteString="{lecm-orgstr:element-member-employee-assoc/lecm-orgstr:employee-link-is-primary}"/>
		            <field id="lecm-orgstr:staff-list-is-boss" label-id="staff_is_boss"/>
	            </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-orgstr:staff-list-is-boss"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:employees">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:employees">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:structure">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:structure">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <!--    <config evaluator="node-type" condition="lecm-orgstr:project-roles">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:project-roles">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>-->

    <config evaluator="node-type" condition="lecm-orgstr-roles:role">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr-roles:role-description"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr-roles:role-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr-roles:role">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr-roles:role-description"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr-roles:role-description">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:staffPosition">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:staffPosition-name-g"/>
                    <show id="lecm-orgstr:staffPosition-name-d"/>
                    <show id="lecm-orgstr:staffPosition-code"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_staffPosition-name">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="isUniqueValue">true</control-param>
                            <control-param name="validationType">blur</control-param>
                            <control-param name="validationMessageId">lecm.element.duplicate.name</control-param>
                            <control-param name="checkInArchive">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:staffPosition">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:staffPosition-name-g"/>
                    <show id="lecm-orgstr:staffPosition-name-d"/>
                    <show id="lecm-orgstr:staffPosition-code"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_staffPosition-name">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="isUniqueValue">true</control-param>
                            <control-param name="validationType">blur</control-param>
                            <control-param name="validationMessageId">lecm.element.duplicate.name</control-param>
                            <control-param name="checkInArchive">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:staffPosition-name-g"/>
                    <show id="lecm-orgstr:staffPosition-name-d"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_staffPosition-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_staffPosition-name"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:workRole">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:workRole-description"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_workRole-name"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:workRole">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:workRole-description"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_workRole-name"/>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-orgstr:workRole-description"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" label-id="lecm-orgstr_workRole-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr-docType:documentType">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr-docType:documentType">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-orgstr:employee-link">
        <forms>
            <form id="el-staff">
                <field-visibility>
                    <show id="lecm-orgstr:employee-link-employee-assoc"/>
                    <show id="lecm-orgstr:employee-link-is-primary"/>
                </field-visibility>
                <appearance>
	                <field id="lecm-orgstr:employee-link-employee-assoc">
		                <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
			                <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
			                <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
			                <control-param name="showCreateNewLink">false</control-param>
			                <control-param name="showCreateNewButton">false</control-param>
			                <control-param name="employeeAbsenceMarker">true</control-param>
			                <control-param name="useStrictFilterByOrg">false</control-param>
		                </control>
                    </field>
                </appearance>
            </form>
            <form id="el-work">
                <field-visibility>
                    <show id="lecm-orgstr:employee-link-employee-assoc"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:employee-link-employee-assoc">
			            <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
				            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
				            <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
				            <control-param name="showCreateNewLink">false</control-param>
				            <control-param name="showCreateNewButton">false</control-param>
				            <control-param name="employeeAbsenceMarker">true</control-param>
				            <control-param name="useStrictFilterByOrg">false</control-param>
			            </control>
		            </field>
	            </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-orgstr:employee-link">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-orgstr:employee-link-employee-assoc"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-orgstr:employee-link-employee-assoc">
			            <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
				            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
				            <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
				            <control-param name="showCreateNewLink">false</control-param>
				            <control-param name="showCreateNewButton">false</control-param>
				            <control-param name="employeeAbsenceMarker">true</control-param>
				            <control-param name="useStrictFilterByOrg">false</control-param>
			            </control>
		            </field>
	            </appearance>
            </form>
            <form id="selectEmployeeWithNoAbsences">
                <field-visibility>
                    <show id="lecm-orgstr:employee-link-employee-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-orgstr:employee-link-employee-assoc" mandatory="true">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.module.OrgStructure.Absence.employeeHasNoAbsenceValidation" event="change" message-id="message.perfom-action.fail"/>
                            <constraint type="INVALID" validation-handler="LogicECM.module.OrgStructure.employeeNotHasAnotherOrganizationValidation" event="change" message-id="message.assign-employee.fail.more-organization"/>
                        </constraint-handlers>
	                    <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
		                    <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
		                    <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
		                    <control-param name="showCreateNewLink">false</control-param>
		                    <control-param name="showCreateNewButton">false</control-param>
		                    <control-param name="employeeAbsenceMarker">true</control-param>
		                    <control-param name="useStrictFilterByOrg">false</control-param>
	                    </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="AdvancedSearch">
        <advanced-search>
            <forms>
                <form label-id="lecm.orgst.lbl.unit" description-id="lecm.orgst.lbl.unit.description">lecm-orgstr:organization-unit</form>
                <form label-id="lecm-orgstr_employee" description-id="lecm.orgst.lbl.search.employee">lecm-orgstr:employee</form>
            </forms>
        </advanced-search>
    </config>

	<config evaluator="model-type" condition="lecm-orgstr:business-role">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-orgstr:business-role-identifier"/>
					<show id="cm:name"/>
					<show id="lecm-orgstr:business-role-description"/>
					<show id="lecm-orgstr:business-role-is-dynamic"/>
				</field-visibility>
			</form>
			<form id="search">
				<field-visibility>
					<show id="lecm-orgstr:business-role-identifier"/>
					<show id="cm:name"/>
					<show id="lecm-orgstr:business-role-description"/>
					<show id="lecm-orgstr:business-role-is-dynamic"/>
				</field-visibility>
                <appearance>
                    <field id="lecm-orgstr:business-role-identifier" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
			<form id="datagrid">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-orgstr:business-role-description"/>
					<!--<show id="lecm-orgstr:business-role-is-dynamic"/>-->
				</field-visibility>
			</form>
            <form id="addEmployeeToDynamicRole">
                <field-visibility>
                    <show id="lecm-orgstr:business-role-employee-assoc"/>
                    <show id="roleId"/>
                    <show id="document"/>
                </field-visibility>
                <appearance>
                    <field id="roleId">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-arguments-hidden-control.ftl">
                            <control-param name="argName">roleId</control-param>
                        </control>
                    </field>
                    <field id="document">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-arguments-hidden-control.ftl">
                            <control-param name="argName">document</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-orgstr:business-role">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-orgstr:business-role-description"/>
					<show id="lecm-orgstr:business-role-is-dynamic"/>
				</field-visibility>
			</form>
			<form id="view-node-form">
				<field-visibility>
					<show id="lecm-orgstr:business-role-identifier"/>
					<show id="cm:name"/>
					<show id="lecm-orgstr:business-role-description"/>
					<show id="lecm-orgstr:business-role-is-dynamic"/>
				</field-visibility>
			</form>
			<form id="configureBusinessRole">
                <field-visibility>
                    <show id="lecm-orgstr:business-role-description"/>
                    <show id="lecm-orgstr:business-role-employee-assoc"/>
                    <show id="lecm-orgstr:business-role-organization-element-assoc"/>
                    <show id="lecm-orgstr:business-role-organization-element-member-assoc"/>
                </field-visibility>
                <appearance>
					<field id="lecm-orgstr:business-role-employee-assoc" mandatory="true">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.module.OrgStructure.Absence.noderefsHasNoAbsenceValidation" event="change" message-id="message.has-active-absence"/>
                        </constraint-handlers>
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="useStrictFilterByOrg">false</control-param>
						</control>
					</field>
					<field id="lecm-orgstr:business-role-organization-element-assoc" mandatory="true">
						<control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="plane">false</control-param>
							<control-param name="showSearch">false</control-param>
							<control-param name="showSelectedItemsPath">false</control-param>
							<control-param name="treeItemType">lecm-orgstr:organization-unit</control-param>
						    <control-param name="checkType">false</control-param>
                            <control-param name="useStrictFilterByOrg">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
                            <control-param name="treeNodeSubstituteString">{lecm-orgstr:element-short-name}</control-param>
                            <control-param name="treeNodeTitleSubstituteString">{cm:name}</control-param>
                            <control-param name="sortProp">lecm-orgstr:element-short-name</control-param>
						</control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.module.OrgStructure.Absence.noderefsHasNoAbsenceValidation" event="change" message-id="message.has-active-absence"/>
                        </constraint-handlers>
					</field>
					<field id="lecm-orgstr:business-role-organization-element-member-assoc" mandatory="true">
						<control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:element-member-position-assoc/cm:name} {lecm-orgstr:element-member-employee-assoc/lecm-orgstr:employee-link-employee-assoc/cm:name}</control-param>
							<control-param name="selectedItemsNameSubstituteString">{lecm-orgstr:element-member-position-assoc/cm:name} {../lecm-orgstr:element-short-name} {lecm-orgstr:element-member-employee-assoc/lecm-orgstr:employee-link-employee-assoc/cm:name}</control-param>
							<control-param name="treeItemType">lecm-orgstr:organization-unit</control-param>
							<control-param name="plane">false</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="showSelectedItemsPath">false</control-param>
							<control-param name="showSearch">false</control-param>
						<control-param name="checkType">false</control-param>
						</control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.module.OrgStructure.Absence.noderefsHasNoAbsenceValidation" event="change" message-id="message.has-active-absence"/>
                        </constraint-handlers>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>