<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<!-- Registration of Delegations models -->
	<bean id="secretaryModelBootstrap" parent="dictionaryModelBootstrap" depends-on="dictionaryBootstrap, ru.it.lecm.orgstructure.orgstructure-repo.orgStructureBootstrap">
		<property name="models">
			<list>
				<value>alfresco/module/${artifactId}/models/secretary-aspects-model.xml</value>
			</list>
		</property>
		<property name="labels">
			<list>
				<value>alfresco/module/${artifactId}/messages/secretary</value>
			</list>
		</property>
	</bean>

	<bean id="secretaryService" class="ru.it.lecm.secretary.beans.SecretaryServiceImpl" depends-on="secretaryModelBootstrap">
		<property name="nodeService" ref="nodeService"/>
		<property name="orgstructureService" ref="serviceOrgstructure"/>
		<property name="secretarySecurityService" ref="secretarySecurityService"/>
	</bean>

	<bean id="secretaryServiceExtesion" class="ru.it.lecm.secretary.extensions.SecretaryJavascriptExtension" parent="baseScript">
		<property name="extensionName" value="secretaryService"/>
		<property name="secretaryService" ref="secretaryService"/>
		<property name="orgstructureService" ref="serviceOrgstructure"/>
	</bean>

	<bean id="secretarySecurityService" class="ru.it.lecm.secretary.beans.SecretarySecurityServiceImpl" init-method="init">
		<property name="authorityService" ref="authorityService"/>
		<property name="lecmSecurityGroupsService" ref="lecmSecurityGroupsBean"/>
		<property name="orgstructureService" ref="serviceOrgstructure"/>
	</bean>

	<bean class="ru.it.lecm.secretary.extensions.SecretarySecurityJavascriptExtension" parent="baseScript">
		<property name="extensionName" value="secretarySecurity"/>
		<property name="secretarySecurityService" ref="secretarySecurityService"/>
	</bean>

	<bean class="ru.it.lecm.delegation.policies.SecretaryPolicy" init-method="init">
		<property name="policyComponent" ref="policyComponent"/>
		<property name="nodeService" ref="nodeService"/>
		<property name="armService" ref="armService"/>
	</bean>

	<bean id="secretaryQueryProcessor" class="ru.it.lecm.secretary.processors.GetSecretaryQueryProcessor" parent="searchQueryBaseProccesor">
		<property name="id" value="SECRETARIES"/>
		<property name="secretaryService" ref="secretaryService"/>
		<property name="orgstructureBean" ref="serviceOrgstructure"/>
	</bean>
</beans>
