<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:util="http://www.springframework.org/schema/util"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<bean id="groupActions.modelBootstrap" parent="dictionaryModelBootstrap">
		<property name="models">
			<list>
				<value>alfresco/module/${artifactId}/models/lecm-group-actions-model.xml</value>
			</list>
		</property>
		<property name="labels">
			<list>
				<value>alfresco/module/${artifactId}/messages/group-actions</value>
			</list>
		</property>
	</bean>

    <util:constant id="GA_ROOT_ID" static-field="ru.it.lecm.actions.bean.GroupActionsService.GA_ROOT_ID"/>
    <util:constant id="GA_ROOT_NAME" static-field="ru.it.lecm.actions.bean.GroupActionsService.GA_ROOT_NAME"/>

    <bean id="groupActionsService" class="ru.it.lecm.actions.bean.GroupActionsServiceImpl" init-method="init" parent="baseBean">
        <property name="dictionaryService" ref="dictionaryService"/>
        <property name="repositoryStructureHelper" ref="repositoryStructureHelper" />
        <property name="stateMachineService"  ref="stateMachineHelper"/>
        <property name="serviceRegistry"  ref="ServiceRegistry"/>
        <property name="namespaceService" ref="namespaceService"/>
        <property name="documentService" ref="documentService"/>
        <!-- Автоматическое создание каталогов. -->
        <property name="folders">
            <map>
                <entry key="#{GA_ROOT_ID}" value="#{GA_ROOT_NAME}"/>
            </map>
        </property>
        <property name="aspects">
            <list>
                <value>lecm-document-aspects:response-to-aspect</value>
            </list>
        </property>
    </bean>

    <bean id="groupActionsScript" parent="baseScript" class="ru.it.lecm.actions.script.GroupActionsScript">
        <property name="extensionName">
            <value>groupActions</value>
        </property>
        <property name="actionsService" ref="groupActionsService"/>
        <property name="documentService" ref="documentService"/>
        <property name="dictionaryService" ref="dictionaryService"/>
        <property name="namespaceService" ref="namespaceService"/>
    </bean>

    <bean id="actionCreatePolicy" class="ru.it.lecm.actions.ActionCreatePolicy" init-method="init">
        <property name="policyComponent">
            <ref bean="policyComponent"/>
        </property>
        <property name="nodeService" ref="nodeService"/>
    </bean>

    <bean id="webscript.ru.it.lecm.actions.action.exec.post"
          class="ru.it.lecm.actions.script.GroupActionExecutor"
          parent="webscript">
        <property name="nodeService" ref="nodeService"/>
        <property name="actionsService" ref="groupActionsService"/>
        <property name="serviceRegistry"  ref="ServiceRegistry"/>
    </bean>


</beans>