<?xml version='1.0' encoding='UTF-8'?>
<items updateMode="CreateOrUpdate">
    <item name="cm:Направить на регистрацию" type="lecm-group-actions:script-action">
        <property name="cm:name"><![CDATA[Направить на регистрацию]]></property>
        <property name="cm:title"><![CDATA[Направить на регистрацию]]></property>
        <property name="lecm-group-actions:statuses"><![CDATA[Проект;На доработке;Согласован;Подписан;Черновик;Проект зарегистрирован]]></property>
        <property name="lecm-group-actions:type"><![CDATA[lecm-outgoing:document, lecm-nd:document, lecm-incoming:document, lecm-internal:document, lecm-ord:document, lecm-protocol:document, lecm-contract:document]]></property>
        <property name="lecm-group-actions:order"><![CDATA[10]]></property>
        <property name="lecm-group-actions:expression"><![CDATA[user.currentUser().hasDynamicBusinessRole(doc.getNodeRef(), "BR_INITIATOR") AND ((doc.type() == "lecm-incoming:document" AND doc.attr("lecm-statemachine:status") == "Черновик" AND !doc.attr("lecm-incoming:is-not-registered")) OR ((doc.type() == "lecm-internal:document" OR doc.type() == "lecm-outgoing:document" OR doc.type() == "lecm-ord:document" OR doc.type() == "lecm-nd:document") AND (doc.assocClass("lecm-eds-document:document-type-assoc") != null AND doc.assocAttr("lecm-eds-document:document-type-assoc", "lecm-doc-dic-dt:registration-required")) AND (doc.attr("lecm-statemachine:status") == "Подписан" OR (doc.attr("lecm-signing-v2-aspects:signed-on-paper") AND (doc.attr("lecm-statemachine:status") == "Проект" OR doc.attr("lecm-statemachine:status") == "На доработке" OR doc.attr("lecm-statemachine:status") == "Согласован")))) OR (doc.type() == "lecm-protocol:document" AND doc.assocClass("lecm-eds-document:document-type-assoc") != null AND doc.assocAttr("lecm-eds-document:document-type-assoc", "lecm-doc-dic-dt:registration-required") AND (doc.attr("lecm-statemachine:status") == "Согласован" OR (doc.attr("lecm-signing-v2-aspects:signed-on-paper") AND (doc.attr("lecm-statemachine:status") == "Проект" OR doc.attr("lecm-statemachine:status") == "На доработке")))) OR (doc.type() == "lecm-contract:document" AND doc.attr("lecm-signing-v2-aspects:signed-on-paper") AND (doc.attr("lecm-statemachine:status") == "Проект зарегистрирован" OR doc.attr("lecm-statemachine:status") == "На доработке" OR doc.attr("lecm-statemachine:status") == "Согласован")))]]></property>
        <property name="lecm-group-actions:isGroup"><![CDATA[true]]></property>
        <property name="lecm-group-actions:forCollection"><![CDATA[false]]></property>
        <property name="lecm-group-actions:script"><![CDATA[statemachine.executeTransitionAction(document, "Направить на регистрацию");]]></property>
    </item>
</items>