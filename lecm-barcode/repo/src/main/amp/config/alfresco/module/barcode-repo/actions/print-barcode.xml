<?xml version='1.0' encoding='UTF-8'?>
<items>
	<item name="cm:Напечатать штрихкод" type="lecm-group-actions:script-action">
		<property name="cm:name"><![CDATA[Напечатать штрихкод]]></property>
		<property name="cm:title"><![CDATA[Напечатать штрихкод]]></property>
		<property name="lecm-group-actions:statuses"><![CDATA[]]></property>
		<property name="lecm-group-actions:type"><![CDATA[]]></property>
		<property name="lecm-group-actions:order"><![CDATA[0]]></property>
		<property name="lecm-group-actions:expression"><![CDATA[@barcodeService.isBarcodeEnabled() AND @barcodeService.getPrinterNameByEmployee(user.currentUser().employee) != null]]></property>
		<property name="lecm-group-actions:isGroup"><![CDATA[false]]></property>
		<property name="lecm-group-actions:forCollection"><![CDATA[false]]></property>
		<property name="lecm-group-actions:script"><![CDATA[(function(){
    var regNumber, regDate, additionalStrings, reportName;
    var printMode = barcodePrint.getPrintMode().toUpperCase();
    if (printMode == "SERVICE") {
        regNumber = substitude.formatNodeTitle(document, "№{~REGNUM|~PROJECT_REGNUM|Не присвоено}");
        regDate = substitude.formatNodeTitle(document, "{~REGDATE|cm:created?dd.MM.yyyy}");
        additionalStrings = [regNumber, regDate];
        barcodePrint.print(document, additionalStrings);
    } else {
        reportName = barcodePrint.getReportNameByDocumentType(document.getQNameType());
        model.openWindow="proxy/alfresco/lecm/report/"+ reportName + "?ID=" + document.nodeRef.toString();
    }
})();]]></property>
	</item>
</items>
