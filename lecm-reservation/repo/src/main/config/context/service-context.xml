<?xml version='1.0' encoding='UTF-8'?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xmlns:p="http://www.springframework.org/schema/p"
	   xmlns:util="http://www.springframework.org/schema/util"
	   xmlns:sec="http://cxf.apache.org/configuration/security"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
						   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
						   http://cxf.apache.org/configuration/security http://cxf.apache.org/schemas/configuration/security.xsd">


	<bean id="reservation.LogicEcmModelsBootstrap" parent="dictionaryModelBootstrap">
		<property name="models">
			<list>
				<value>alfresco/module/${artifactId}/models/lecm-reservation-aspects-model.xml</value>
			</list>
		</property>
	</bean>

	<util:constant id="ENGINE_ID" static-field="org.alfresco.repo.workflow.WorkflowDeployer.ENGINE_ID"/>
	<util:constant id="LOCATION" static-field="org.alfresco.repo.workflow.WorkflowDeployer.LOCATION"/>
	<util:constant id="MIMETYPE" static-field="org.alfresco.repo.workflow.WorkflowDeployer.MIMETYPE"/>
	<util:constant id="REDEPLOY" static-field="org.alfresco.repo.workflow.WorkflowDeployer.REDEPLOY"/>

	<bean id="reservationWorkflowBootstrap" parent="workflowDeployer">
		<property name="models">
			<list>
				<value>alfresco/module/${artifactId}/models/workflow/reservation-workflow-model.xml</value>
			</list>
		</property>
		<property name="workflowDefinitions">
			<list>
				<props>
					<prop key="#{ENGINE_ID}">activiti</prop>
					<prop key="#{LOCATION}">alfresco/module/${artifactId}/models/workflow/regnum-reservation.bpmn20.xml</prop>
					<prop key="#{MIMETYPE}">text/xml</prop>
					<prop key="#{REDEPLOY}">${redeploy.process.definitions}</prop>
				</props>
			</list>
		</property>
	</bean>

	<bean id="reservationWorkflowScript" parent="baseScript"
		  class="ru.it.lecm.reservation.scripts.ReservationWorkflowWebScriptBean"
		  depends-on="documentService">
		<property name="extensionName" value="reservationWorkflowScript"/>
		<property name="nodeService" ref="nodeService"/>
		<property name="orgstructureService" ref="serviceOrgstructure"/>
		<property name="serviceRegistry" ref="ServiceRegistry"/>
		<property name="regNumbersService" ref="regNumbersService"/>
		<property name="notificationsService" ref="notificationsService"/>
		<property name="businessJournalService" ref ="businessJournalService"/>
		<property name="edsGlobalSettingsService" ref="edsGlobalSettingsService"/>
		<property name="stateMachineService" ref="stateMachineHelper"/>
	</bean>

	<bean id="reservation.businessJournalDictionaryBootstrap" parent="lecmDictionaryBootstrap">
		<property name="createOrUpdateDictionaries">
			<list>
				<value>alfresco/module/${artifactId}/models/lecm-business-journal-eventCategory-items.xml</value>
			</list>
		</property>
	</bean>
</beans>
