<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="lecm-onk-incoming-type-stat" pageWidth="595" pageHeight="842" whenNoDataType="AllSectionsNoDetail" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="0451b0fd-67d7-4d3d-be14-c579e2f885bb">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<property name="dataSource" value="ru.it.lecm.reports.generators.GenericDSProviderBase"/>
	<style name="styleOdd" mode="Opaque" backcolor="#FFFFFF">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
			<style backcolor="#D2EAF1"/>
		</conditionalStyle>
	</style>
	<parameter name="CMIS_QUERY" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["select * from lecm-contract:document as Contract"]]></defaultValueExpression>
	</parameter>
	<parameter name="CMIS_XMLCONFIG" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["ds-lecm-onk-incoming-type-stat.xml"]]></defaultValueExpression>
	</parameter>
	<parameter name="SubreportDataSource" class="net.sf.jasperreports.engine.JRDataSource">
		<defaultValueExpression><![CDATA[$P{REPORT_DATA_SOURCE}]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[]]>
	</queryString>
	<field name="col_DocType" class="java.lang.String">
		<fieldDescription><![CDATA[Вид документа]]></fieldDescription>
	</field>
	<field name="col_DocKind" class="java.lang.String">
		<fieldDescription><![CDATA[Тип документа]]></fieldDescription>
	</field>
	<variable name="col_DocType_Count" class="java.lang.Integer" resetType="Group" resetGroup="grp_byType" calculation="Count">
		<variableExpression><![CDATA[$F{col_DocType}]]></variableExpression>
	</variable>
	<variable name="col_DocType_Total" class="java.lang.Integer" resetType="Group" resetGroup="grp_byKind" calculation="Count">
		<variableExpression><![CDATA[$F{col_DocType}]]></variableExpression>
	</variable>
	<group name="grp_byKind">
		<groupExpression><![CDATA[$F{col_DocKind}]]></groupExpression>
		<groupHeader>
			<band height="60">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT} >=0 && $F{col_DocKind} != null]]></printWhenExpression>
				<staticText>
					<reportElement uuid="6b5f2c84-9cd4-4d27-a499-6ddfd9b40cc6" stretchType="RelativeToTallestObject" mode="Opaque" x="256" y="30" width="153" height="30" isPrintWhenDetailOverflows="true" forecolor="#FFFFFF" backcolor="#4BACC6"/>
					<box>
						<pen lineWidth="1.0" lineColor="#78C0D4"/>
						<topPen lineWidth="1.0" lineColor="#78C0D4"/>
						<leftPen lineWidth="1.0" lineColor="#78C0D4"/>
						<bottomPen lineWidth="1.0" lineColor="#78C0D4"/>
						<rightPen lineWidth="1.0" lineColor="#78C0D4"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono" isBold="true"/>
					</textElement>
					<text><![CDATA[Проценты]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="9ac677cf-1a8b-423e-b388-882cc2fa2837" stretchType="RelativeToTallestObject" mode="Opaque" x="409" y="30" width="146" height="30" isPrintWhenDetailOverflows="true" forecolor="#FFFFFF" backcolor="#4BACC6"/>
					<box>
						<pen lineWidth="1.0" lineColor="#78C0D4"/>
						<topPen lineWidth="1.0" lineColor="#78C0D4"/>
						<leftPen lineWidth="1.0" lineColor="#78C0D4"/>
						<bottomPen lineWidth="1.0" lineColor="#78C0D4"/>
						<rightPen lineWidth="1.0" lineColor="#78C0D4"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono" isBold="true"/>
					</textElement>
					<text><![CDATA[Итого по виду документа]]></text>
				</staticText>
				<staticText>
					<reportElement uuid="e22a96eb-3b74-4513-a477-dd4c4069ea3c" stretchType="RelativeToTallestObject" mode="Opaque" x="0" y="30" width="256" height="30" isPrintWhenDetailOverflows="true" forecolor="#FFFFFF" backcolor="#4BACC6"/>
					<box>
						<pen lineWidth="1.0" lineColor="#78C0D4"/>
						<topPen lineWidth="1.0" lineColor="#78C0D4"/>
						<leftPen lineWidth="1.0" lineColor="#78C0D4"/>
						<bottomPen lineWidth="1.0" lineColor="#78C0D4"/>
						<rightPen lineWidth="1.0" lineColor="#78C0D4"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono" isBold="true"/>
					</textElement>
					<text><![CDATA[Вид документа]]></text>
				</staticText>
				<textField isStretchWithOverflow="true" isBlankWhenNull="true">
					<reportElement uuid="a38dd19c-4be4-410e-ac3e-cb9e78837c74" x="0" y="0" width="555" height="30" isPrintWhenDetailOverflows="true"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{col_DocKind} != null && $F{col_DocKind} != "") ? $F{col_DocKind} : "Не указан"]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="180">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT} >=0 && $F{col_DocKind} != null]]></printWhenExpression>
				<pie3DChart>
					<chart isShowLegend="true" evaluationTime="Group" evaluationGroup="grp_byKind" theme="default">
						<reportElement uuid="94c77f2a-d67e-4429-94bc-0163465abed9" stretchType="RelativeToTallestObject" x="0" y="0" width="555" height="180" isPrintWhenDetailOverflows="true"/>
						<chartTitle>
							<font fontName="DejaVu Sans Mono" isBold="true" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
						</chartTitle>
						<chartSubtitle/>
						<chartLegend/>
					</chart>
					<pieDataset>
						<dataset resetType="Group" resetGroup="grp_byKind"/>
						<keyExpression><![CDATA[($F{col_DocType} != null && !$F{col_DocType}.equals("") ? $F{col_DocType} : "не указан")]]></keyExpression>
						<valueExpression><![CDATA[$V{col_DocType_Count}]]></valueExpression>
					</pieDataset>
					<pie3DPlot isShowLabels="true" depthFactor="0.4" isCircular="false" labelFormat="{0} {2}">
						<plot orientation="Horizontal"/>
						<itemLabel>
							<font fontName="DejaVu Sans Mono" isBold="true" isUnderline="false"/>
						</itemLabel>
					</pie3DPlot>
				</pie3DChart>
			</band>
		</groupFooter>
	</group>
	<group name="grp_byType">
		<groupExpression><![CDATA[$F{col_DocType}]]></groupExpression>
		<groupHeader>
			<band height="30">
				<printWhenExpression><![CDATA[$V{REPORT_COUNT} >=0 && $F{col_DocKind} != null]]></printWhenExpression>
				<textField evaluationTime="Auto" pattern="#,##0.00 %" isBlankWhenNull="true">
					<reportElement uuid="6ddd82f2-a979-4e0a-9066-149c269702a1" stretchType="RelativeToTallestObject" mode="Opaque" x="256" y="0" width="153" height="30" isPrintWhenDetailOverflows="true"/>
					<box>
						<pen lineWidth="1.0" lineColor="#78C0D4"/>
						<topPen lineWidth="1.0" lineColor="#78C0D4"/>
						<leftPen lineWidth="1.0" lineColor="#78C0D4"/>
						<bottomPen lineWidth="1.0" lineColor="#78C0D4"/>
						<rightPen lineWidth="1.0" lineColor="#78C0D4"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono"/>
					</textElement>
					<textFieldExpression><![CDATA[($V{col_DocType_Count}.doubleValue())/($V{col_DocType_Total}.doubleValue())]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Group" evaluationGroup="grp_byType" isBlankWhenNull="true">
					<reportElement uuid="165c237d-1277-4fd8-be44-36c446319a49" stretchType="RelativeToTallestObject" mode="Opaque" x="0" y="0" width="256" height="30" isPrintWhenDetailOverflows="true"/>
					<box leftPadding="10">
						<pen lineWidth="1.0" lineColor="#78C0D4"/>
						<topPen lineWidth="1.0" lineColor="#78C0D4"/>
						<leftPen lineWidth="1.0" lineColor="#78C0D4"/>
						<bottomPen lineWidth="1.0" lineColor="#78C0D4"/>
						<rightPen lineWidth="1.0" lineColor="#78C0D4"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono"/>
					</textElement>
					<textFieldExpression><![CDATA[($F{col_DocType} != null && $F{col_DocType} != "" )? $F{col_DocType}  : "не указан"]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Group" evaluationGroup="grp_byType" isBlankWhenNull="true">
					<reportElement uuid="1b4f9033-c554-42fd-9e98-b9594d8d115d" stretchType="RelativeToTallestObject" mode="Opaque" x="409" y="0" width="146" height="30" isPrintWhenDetailOverflows="true"/>
					<box>
						<pen lineWidth="1.0" lineColor="#78C0D4"/>
						<topPen lineWidth="1.0" lineColor="#78C0D4"/>
						<leftPen lineWidth="1.0" lineColor="#78C0D4"/>
						<bottomPen lineWidth="1.0" lineColor="#78C0D4"/>
						<rightPen lineWidth="1.0" lineColor="#78C0D4"/>
					</box>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font fontName="DejaVu Sans Mono"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{col_DocType_Count}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="40" splitType="Stretch">
			<staticText>
				<reportElement uuid="f710bbcc-3ec1-4bff-bcaa-19263f08b8a4" x="0" y="0" width="555" height="40"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="DejaVu Sans Mono" size="14" isBold="true"/>
				</textElement>
				<text><![CDATA[Статистика по видам документов]]></text>
			</staticText>
		</band>
	</title>
	<summary>
		<band height="50">
			<printWhenExpression><![CDATA[$V{REPORT_COUNT} < 1]]></printWhenExpression>
			<textField>
				<reportElement uuid="ac5ea13f-1b8c-4434-9787-eaae6f810c35" x="0" y="0" width="555" height="50" forecolor="#FF0000"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font fontName="Times New Roman" size="14" isBold="true" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA["Нет данных, удовлетворяющих выборке"]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
