<alfresco-config>

    <config>
        <forms>
            <dependencies>
                <js src="/scripts/lecm-business-journal/business-journal-datagrid.js"/>
            </dependencies>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-busjournal:objectType">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-busjournal:objectType-code"/>
                    <show id="lecm-busjournal:objectType-class"/>
                    <show id="lecm-busjournal:objectType-template"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-busjournal:objectType">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-busjournal:objectType-code"/>
                    <show id="lecm-busjournal:objectType-class"/>
                    <show id="lecm-busjournal:objectType-template"/>
                </field-visibility>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-busjournal:objectType-code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-busjournal:eventCategory">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-busjournal:eventCategory-code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-busjournal:eventCategory">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-busjournal:eventCategory-code"/>
                </field-visibility>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-busjournal:eventCategory-code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-busjournal:messageTemplate">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-busjournal:messageTemplate-objType-assoc"/>
                    <show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
                    <show id="lecm-busjournal:messageTemplate-template"/>
                    <show id="lecm-busjournal:messageTemplate-code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-busjournal:messageTemplate">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-busjournal:messageTemplate-objType-assoc"/>
                    <show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
                    <show id="lecm-busjournal:messageTemplate-template"/>
                    <show id="lecm-busjournal:messageTemplate-code"/>
                </field-visibility>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-busjournal:messageTemplate-objType-assoc"/>
                    <show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
                    <show id="lecm-busjournal:messageTemplate-template"/>
                    <show id="lecm-busjournal:messageTemplate-code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-busjournal:bjRecord">
        <forms>
            <form>
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <show id="lecm-busjournal:bjRecord-date"/>
                    <show id="lecm-busjournal:bjRecord-description"/>

                    <show id="lecm-busjournal:bjRecord-evCategory-assoc"/>
                    <show id="lecm-busjournal:bjRecord-objType-assoc"/>
                    <show id="lecm-busjournal:bjRecord-initiator-assoc"/>

                    <show id="lecm-busjournal:bjRecord-mainObject-assoc"/>

                    <show id="lecm-busjournal:bjRecord-secondaryObj1-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj2-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj3-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj4-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj5-assoc"/>
                </field-visibility>
                <appearance>
                    <set id="common" appearance="" label-id="info.common-info" />
                    <set id="secondary" appearance="" label-id="info.secondary-info" />

                    <field id="lecm-busjournal:bjRecord-date" set="common"/>
                    <field id="lecm-busjournal:bjRecord-initiator-assoc" set="common">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-initiator}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal:bjRecord-mainObject-assoc" set="common">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-mainObject}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal:bjRecord-objType-assoc" set="common"/>
                    <field id="lecm-busjournal:bjRecord-evCategory-assoc" set="common"/>

                    <field id="lecm-busjournal:bjRecord-description" set="common"/>

                    <field id="lecm-busjournal:bjRecord-secondaryObj1-assoc" set="secondary">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj1}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal:bjRecord-secondaryObj2-assoc" set="secondary">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj2}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal:bjRecord-secondaryObj3-assoc" set="secondary">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj3}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal:bjRecord-secondaryObj4-assoc" set="secondary">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj4}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-busjournal:bjRecord-secondaryObj5-assoc" set="secondary">
                        <control template="/ru/it/lecm/base-share/components/controls/associationControl.ftl">
                            <control-param name="showTargetLink">true</control-param>
                            <control-param name="substituteParent">true</control-param>
                            <control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj5}</control-param>
                            <control-param name="viewOnLinkClick">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-busjournal:bjRecord">
        <forms>
            <form>
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
                <field-visibility>
                    <show id="lecm-busjournal:bjRecord-date"/>
                    <show id="lecm-busjournal:bjRecord-description"/>
                    <show id="lecm-busjournal:bjRecord-initiator"/>
                    <show id="lecm-busjournal:bjRecord-mainObject"/>

                    <show id="lecm-busjournal:bjRecord-initiator-assoc"/>
                    <show id="lecm-busjournal:bjRecord-mainObject-assoc"/>
                    <show id="lecm-busjournal:bjRecord-evCategory-assoc"/>
                    <show id="lecm-busjournal:bjRecord-objType-assoc"/>

                    <show id="lecm-busjournal:bjRecord-secondaryObj1-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj1"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj2-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj2"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj3-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj3"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj4-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj4"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj5-assoc"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj5"/>
                </field-visibility>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-busjournal:bjRecord-date"/>
                    <show id="lecm-busjournal:bjRecord-description"/>
                    <show id="lecm-busjournal:bjRecord-evCategory-assoc"/>
                    <show id="lecm-busjournal:bjRecord-objType-assoc"/>
                    <show id="lecm-busjournal:bjRecord-initiator-assoc"/>
                    <show id="lecm-busjournal:bjRecord-mainObject-assoc"/>
                    <show id="lecm-busjournal:secondary-objects" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-busjournal:bjRecord-mainObject-assoc" substituteString="#parent{lecm-busjournal:bjRecord-mainObject}"/>
                    <field id="lecm-busjournal:bjRecord-initiator-assoc" substituteString="#parent{lecm-busjournal:bjRecord-initiator}"/>
                    <field id="lecm-busjournal:secondary-objects" substituteString="{lecm-busjournal:bjRecord-secondaryObj1}; {lecm-busjournal:bjRecord-secondaryObj2}; {lecm-busjournal:bjRecord-secondaryObj3}; {lecm-busjournal:bjRecord-secondaryObj4}; {lecm-busjournal:bjRecord-secondaryObj5}"/>
                </appearance>
            </form>
            <form id="bjHistory">
                <field-visibility>
                    <show id="lecm-busjournal:bjRecord-date"/>
                    <show id="lecm-busjournal:bjRecord-description"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-busjournal:bjRecord-date"/>
                    <show id="lecm-busjournal:bjRecord-description"/>
                    <show id="lecm-busjournal:bjRecord-initiator"/>
                    <show id="lecm-busjournal:bjRecord-mainObject"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj1"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj2"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj3"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj4"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj5"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-busjournal:bjRecord-date">
                        <control template="/org/alfresco/components/form/controls/daterange.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="export-fields">
                <field-visibility>
                    <show id="lecm-busjournal:bjRecord-date"/>
                    <show id="lecm-busjournal:bjRecord-description"/>
                    <show id="lecm-busjournal:bjRecord-initiator"/>
                    <show id="lecm-busjournal:bjRecord-mainObject"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj1"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj2"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj3"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj4"/>
                    <show id="lecm-busjournal:bjRecord-secondaryObj5"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <!-- Custom Aspects forms-->
    <config evaluator="aspect" condition="lecm-busjournal-aspects:history">
        <forms>

            <form>
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>
                <field-visibility>
                    <show id="lecm-busjournal-aspects:history-list"/>
                </field-visibility>
                <appearance>
                    <set id="busjournalHistory" appearance="" label-id="info.business-journal-history"/>
                    <field id="lecm-busjournal-aspects:history-list" set="busjournalHistory">
                        <control template="/ru/it/lecm/business-journal/components/controls/bjHistory-datagrid-control.ftl"/>
                    </field>
                </appearance>
            </form>

        </forms>
    </config>

</alfresco-config>