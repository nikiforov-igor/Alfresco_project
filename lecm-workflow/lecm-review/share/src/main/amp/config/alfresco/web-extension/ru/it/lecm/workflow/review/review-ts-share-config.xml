<alfresco-config>
	<config>
		<forms>
			<default-controls>
				<type name="association:lecm-review-ts:reviewers" template="/ru/it/lecm/base-share/components/controls/association-complex-inline-control.ftl">
					<control-param name="endpointType">cm:cmobject</control-param>
					<control-param name="items">employee,orgUnit,workGroup,reviewItem</control-param>
                    <control-param name="endpointMany">true</control-param>
					<control-param name="changeItemsFireAction">employeesSelected</control-param>
					<!-- lecm-orgstr:employee -->
					<control-param name="employee_label">Сотрудник</control-param>
					<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
					<control-param name="employee_endpointMany">true</control-param>
					<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
					<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
					<control-param name="employee_plane">true</control-param>
					<control-param name="employee_showSearch">true</control-param>
					<control-param name="employee_useStrictFilterByOrg">true</control-param>
					<control-param name="employee_childrenDataSource">/lecm/review/getPotentialReviewers/picker</control-param>
					<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
<!--					<control-param name="firstPickerButtonLabel"><![CDATA[<i class='icon-male'></i>]]></control-param>
					<control-param name="firstPickerButtonTitleCode">title.employee.select</control-param>
					<control-param name="firstChangeItemsFireAction">employeesSelected</control-param>-->
					<!-- lecm-orgstr:organization-unit -->
					<control-param name="orgUnit_label">Подразделение</control-param>
					<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
					<control-param name="orgUnit_endpointMany">true</control-param>
					<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
					<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
					<control-param name="orgUnit_plane">false</control-param>
					<control-param name="orgUnit_showSearch">true</control-param>
					<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
					<!-- lecm-orgstr:workGroup -->
					<control-param name="workGroup_label">Рабочая группа</control-param>
					<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
					<control-param name="workGroup_endpointMany">true</control-param>
					<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
					<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
					<control-param name="workGroup_plane">true</control-param>
					<control-param name="workGroup_showSearch">true</control-param>
					<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
					<!-- lecm-review-list:review-list-item -->
					<control-param name="reviewItem_label">Список ознакомления</control-param>
					<control-param name="reviewItem_endpointType">lecm-review-list:review-list-item</control-param>
					<control-param name="reviewItem_endpointMany">true</control-param>
					<control-param name="reviewItem_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Списки_x0020_ознакомления</control-param>
					<control-param name="reviewItem_nameSubstituteString">{cm:title}</control-param>
					<control-param name="reviewItem_selectedItemsNameSubstituteString">{cm:title}</control-param>
					<control-param name="reviewItem_treeNodeSubstituteString">{cm:title}</control-param>
					<control-param name="reviewItem_treeNodeTitleSubstituteString">{cm:title}</control-param>
					<control-param name="reviewItem_plane">true</control-param>
					<control-param name="reviewItem_showSearch">true</control-param>
					<control-param name="reviewItem_showAssocViewForm">true</control-param>
					<control-param name="reviewItem_childrenDataSource">lecm/review/ds/allowedReviewLists</control-param>
					<control-param name="reviewItem_sortProp">cm:title</control-param>
<!--					<control-param name="secondShowAssocViewForm">true</control-param>
					<control-param name="secondPickerButtonLabel"><![CDATA[<i class='icon-building'></i>]]></control-param>
					<control-param name="secondPickerButtonTitleCode">title.review.list.select</control-param>
					<control-param name="secondChangeItemsFireAction">reviewListsSelected</control-param>-->
				</type>
				<type name="association:lecm-review-ts:saveas" template="/ru/it/lecm/workflow/review/controls/review-list-save-control.ftl">
				</type>
				<type name="association:lecm-review-ts:load-script" template="/ru/it/lecm/base-share/components/controls/load-script-control.ftl">
                    <control-param name="scripts">scripts/lecm-review/reviewers-mandatory-validator.js,scripts/lecm-review/add-reviewers-mandatory-validation.js</control-param>
				</type>
			</default-controls>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-review-ts:review-table-item">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-document:indexTableRow" force="true"/>
					<show id="lecm-review-ts:review-state"/>
					<show id="lecm-review-ts:review-start-date"/>
					<show id="lecm-review-ts:review-finish-date"/>
					<show id="lecm-review-ts:initiator-assoc"/>
					<show id="lecm-review-ts:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:indexTableRow">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl"/>
					</field>
					<field id="lecm-review-ts:review-state" read-only="true">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
					</field>
					<field id="lecm-review-ts:review-start-date" read-only="true">
						<control>
							<control-param name="dateFormatString">dd.mm.yyyy HH:MM:ss</control-param>
						</control>
					</field>
					<field id="lecm-review-ts:review-finish-date" read-only="true">
						<control>
							<control-param name="dateFormatString">dd.mm.yyyy HH:MM:ss</control-param>
						</control>
					</field>
					<field id="lecm-review-ts:initiator-assoc" read-only="true"/>
					<field id="lecm-review-ts:reviewer-assoc" label-id="label.reviewer" read-only="true">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="plane">true</control-param>
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="useStrictFilterByOrg">true</control-param>
							<control-param name="additionalFilter">{{EMPLOYEE_HAS_LOGIN}}</control-param>
							<control-param name="endpointType">lecm-orgstr:employee</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>


	<config evaluator="model-type" condition="lecm-review-ts:review-table-item">
		<forms>
			<form submission-url="/lecm/review/type/lecm-review-ts%3Areview-table-item/formprocessor" >
				<field-visibility>
					<show id="lecm-document:indexTableRow" force="true"/>
					<show id="lecm-review-ts:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:indexTableRow">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl"/>
					</field>
					<field id="lecm-review-ts:reviewer-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
							<control-param name="endpointType">cm:cmobject</control-param>
							<control-param name="items">employee,orgUnit,workGroup,reviewItem</control-param>
							<!-- lecm-orgstr:employee -->
							<control-param name="employee_label">Сотрудник</control-param>
							<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
							<control-param name="employee_endpointMany">true</control-param>
							<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employee_plane">true</control-param>
							<control-param name="employee_showSearch">true</control-param>
							<control-param name="employee_useStrictFilterByOrg">true</control-param>
							<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
<!--							<control-param name="firstPickerButtonLabel"><![CDATA[<i class='icon-male'></i>]]></control-param>
							<control-param name="firstPickerButtonTitleCode">title.employee.select</control-param>-->
							<!-- lecm-orgstr:organization-unit -->
							<control-param name="orgUnit_label">Подразделение</control-param>
							<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="orgUnit_endpointMany">true</control-param>
							<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
							<control-param name="orgUnit_plane">false</control-param>
							<control-param name="orgUnit_showSearch">true</control-param>
							<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-orgstr:workGroup -->
							<control-param name="workGroup_label">Рабочая группа</control-param>
							<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
							<control-param name="workGroup_endpointMany">true</control-param>
							<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
							<control-param name="workGroup_plane">true</control-param>
							<control-param name="workGroup_showSearch">true</control-param>
							<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-review-list:review-list-item -->
							<control-param name="reviewItem_label">Список ознакомления</control-param>
							<control-param name="reviewItem_endpointType">lecm-review-list:review-list-item</control-param>
							<control-param name="reviewItem_endpointMany">true</control-param>
							<control-param name="reviewItem_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Списки_x0020_ознакомления</control-param>
							<control-param name="reviewItem_nameSubstituteString">{cm:title}</control-param>
							<control-param name="reviewItem_plane">true</control-param>
							<control-param name="reviewItem_showSearch">true</control-param>
							<control-param name="reviewItem_childrenDataSource">lecm/review/ds/allowedReviewLists</control-param>
							<control-param name="reviewItem_sortProp">cm:title</control-param>
<!--							<control-param name="secondShowAssocViewForm">true</control-param>
							<control-param name="secondPickerButtonLabel"><![CDATA[<i class='icon-building'></i>]]></control-param>
							<control-param name="secondPickerButtonTitleCode">title.review.list.select</control-param>-->
						</control>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-document:indexTableRow"/>
					<show id="lecm-review-ts:reviewer-assoc"/>
					<show id="lecm-review-ts:review-state"/>
					<show id="lecm-review-ts:review-start-date"/>
					<show id="lecm-review-ts:review-finish-date"/>
					<show id="lecm-review-ts:initiator-assoc"/>
					<show id="lecm-review-ts:initiator-username"/>
				</field-visibility>
				<appearance>
					<field id="lecm-review-ts:initiator-username" substituteString="{lecm-review-ts:initiator-assoc/lecm-orgstr:employee-person-assoc/cm:userName}"/>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-review-ts:review-table">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-review-ts-link" force="true"/>
					<show id="lecm-review-ts:review-tableGrid" force="true"/>
				</field-visibility>
				<appearance>
					<field id="lecm-review-ts-link" label-id="label.document">
						<control template="/ru/it/lecm/base-share/components/controls/substitude-control.ftl">
							<control-param name="formatString"><![CDATA[
					                <a href='/{~SHARE_CONTEXT}/page/document?nodeRef={../../nodeRef}'>
					                    {../../lecm-document:present-string}
					                </a>
				                ]]>
							</control-param>
						</control>
					</field>
					<field id="lecm-review-ts:review-tableGrid" label-id="label.review.list">
						<control template="/ru/it/lecm/base-share/components/controls/datagrid-control.ftl">
							<control-param name="itemType">lecm-review-ts:review-table-item</control-param>
							<control-param name="datagridFormId">datagrid</control-param>
							<control-param name="allowCreate">false</control-param>
							<control-param name="showActions">false</control-param>
							<control-param name="sort">lecm-document:indexTableRow|true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-review-list:review-list-item">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:title" force="true"/>
					<show id="lecm-review-list:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="cm:title" mandatory="true" label-id="lecm.review.cm_title.title">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="UNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-review-list:reviewer-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
							<control-param name="endpointType">cm:cmobject</control-param>
							<control-param name="items">employee,orgUnit,workGroup</control-param>
							<!-- lecm-orgstr:employee -->
							<control-param name="employee_label">Сотрудник</control-param>
							<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
							<control-param name="employee_endpointMany">true</control-param>
							<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employee_plane">true</control-param>
							<control-param name="employee_showSearch">true</control-param>
							<control-param name="employee_useStrictFilterByOrg">true</control-param>
							<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
							<!-- lecm-orgstr:organization-unit -->
							<control-param name="orgUnit_label">Подразделение</control-param>
							<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="orgUnit_endpointMany">true</control-param>
							<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
							<control-param name="orgUnit_plane">false</control-param>
							<control-param name="orgUnit_showSearch">true</control-param>
							<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-orgstr:workGroup -->
							<control-param name="workGroup_label">Рабочая группа</control-param>
							<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
							<control-param name="workGroup_endpointMany">true</control-param>
							<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
							<control-param name="workGroup_plane">true</control-param>
							<control-param name="workGroup_showSearch">true</control-param>
							<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-review-list:review-list-item">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:title" force="true"/>
					<show id="lecm-review-list:is-public"/>
					<show id="lecm-review-list:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="cm:title" mandatory="true" label-id="lecm.review.cm_title.title">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="UNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-review-list:is-public">
						<control>
							<control-param name="defaultValue">true</control-param>
						</control>
					</field>
					<field id="lecm-review-list:reviewer-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
							<control-param name="endpointType">cm:cmobject</control-param>
							<control-param name="items">employee,orgUnit,workGroup</control-param>
							<!-- lecm-orgstr:employee -->
							<control-param name="employee_label">Сотрудник</control-param>
							<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
							<control-param name="employee_endpointMany">true</control-param>
							<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employee_plane">true</control-param>
							<control-param name="employee_showSearch">true</control-param>
							<control-param name="employee_useStrictFilterByOrg">true</control-param>
							<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
							<!-- lecm-orgstr:organization-unit -->
							<control-param name="orgUnit_label">Подразделение</control-param>
							<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="orgUnit_endpointMany">true</control-param>
							<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
							<control-param name="orgUnit_plane">false</control-param>
							<control-param name="orgUnit_showSearch">true</control-param>
							<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-orgstr:workGroup -->
							<control-param name="workGroup_label">Рабочая группа</control-param>
							<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
							<control-param name="workGroup_endpointMany">true</control-param>
							<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
							<control-param name="workGroup_plane">true</control-param>
							<control-param name="workGroup_showSearch">true</control-param>
							<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="createReviewList">
				<field-visibility>
					<show id="cm:title" force="true"/>
					<show id="lecm-review-list:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="cm:title" mandatory="true" label-id="lecm.review.cm_title.title">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="UNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-review-list:reviewer-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
							<control-param name="endpointType">cm:cmobject</control-param>
							<control-param name="items">employee,orgUnit,workGroup</control-param>
							<!-- lecm-orgstr:employee -->
							<control-param name="employee_label">Сотрудник</control-param>
							<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
							<control-param name="employee_endpointMany">true</control-param>
							<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employee_plane">true</control-param>
							<control-param name="employee_showSearch">true</control-param>
							<control-param name="employee_useStrictFilterByOrg">true</control-param>
							<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
							<!-- lecm-orgstr:organization-unit -->
							<control-param name="orgUnit_label">Подразделение</control-param>
							<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="orgUnit_endpointMany">true</control-param>
							<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
							<control-param name="orgUnit_plane">false</control-param>
							<control-param name="orgUnit_showSearch">true</control-param>
							<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-orgstr:workGroup -->
							<control-param name="workGroup_label">Рабочая группа</control-param>
							<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
							<control-param name="workGroup_endpointMany">true</control-param>
							<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
							<control-param name="workGroup_plane">true</control-param>
							<control-param name="workGroup_showSearch">true</control-param>
							<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="saveReviewList">
				<field-visibility>
					<show id="cm:title" force="true"/>
					<show id="lecm-review-list:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="cm:title" mandatory="true" label-id="lecm.review.cm_title.title">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="UNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-review-list:reviewer-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl">
							<control-param name="contextProperty">selectedItems</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="search">
				<field-visibility>
					<show id="cm:title" force="true"/>
					<show id="lecm-review-list:reviewer-assoc"/>
				</field-visibility>
				<appearance>
					<field id="cm:title" mandatory="false" label-id="lecm.review.cm_title.title">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-review-list:reviewer-assoc" mandatory="false">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
							<control-param name="endpointType">cm:cmobject</control-param>
							<control-param name="items">employee,orgUnit,workGroup</control-param>
							<!-- lecm-orgstr:employee -->
							<control-param name="employee_label">Сотрудник</control-param>
							<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
							<control-param name="employee_endpointMany">true</control-param>
							<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employee_plane">true</control-param>
							<control-param name="employee_showSearch">true</control-param>
							<control-param name="employee_useStrictFilterByOrg">true</control-param>
							<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
							<!-- lecm-orgstr:organization-unit -->
							<control-param name="orgUnit_label">Подразделение</control-param>
							<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="orgUnit_endpointMany">true</control-param>
							<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
							<control-param name="orgUnit_plane">false</control-param>
							<control-param name="orgUnit_showSearch">true</control-param>
							<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-orgstr:workGroup -->
							<control-param name="workGroup_label">Рабочая группа</control-param>
							<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
							<control-param name="workGroup_endpointMany">true</control-param>
							<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
							<control-param name="workGroup_plane">true</control-param>
							<control-param name="workGroup_showSearch">true</control-param>
							<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
						</constraint-handlers>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="cm:title" force="true"/>
					<show id="lecm-review-list:is-public"/>
					<show id="lecm-review-list:reviewer-assoc"/>
					<show id="lecm-document:creator" force="true"/>
				</field-visibility>
				<appearance>
					<field id="cm:title" label-id="lecm.review.cm_title.title"/>
					<field id="lecm-document:creator" label-id="lecm.review.lecm-document_creator.title"/>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-review-info:info">
		<forms>
			<form submission-url="/lecm/review/type/lecm-review-info%3Ainfo/formprocessor">
				<field-visibility>
					<show id="lecm-document:indexTableRow"/>
					<show id="lecm-review-ts:reviewer-assoc"/>
					<show id="lecm-review-ts:save-as"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:indexTableRow">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl"/>
					</field>
					<field id="lecm-review-ts:reviewer-assoc" label="Ознакамливающийся">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
							<control-param name="endpointType">cm:cmobject</control-param>
							<control-param name="items">employee,orgUnit,workGroup,reviewItem</control-param>
							<!-- lecm-orgstr:employee -->
							<control-param name="employee_label">Сотрудник</control-param>
							<control-param name="employee_endpointType">lecm-orgstr:employee</control-param>
							<control-param name="employee_endpointMany">true</control-param>
							<control-param name="employee_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="employee_nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employee_plane">true</control-param>
							<control-param name="employee_showSearch">true</control-param>
							<control-param name="employee_useStrictFilterByOrg">true</control-param>
							<control-param name="employee_sortProp">lecm-orgstr:employee-short-name</control-param>
		<!--					<control-param name="firstPickerButtonLabel"><![CDATA[<i class='icon-male'></i>]]></control-param>
							<control-param name="firstPickerButtonTitleCode">title.employee.select</control-param>
							<control-param name="firstChangeItemsFireAction">employeesSelected</control-param>-->
							<!-- lecm-orgstr:organization-unit -->
							<control-param name="orgUnit_label">Подразделение</control-param>
							<control-param name="orgUnit_endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="orgUnit_endpointMany">true</control-param>
							<control-param name="orgUnit_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="orgUnit_nameSubstituteString">{lecm-orgstr:element-short-name}</control-param>
							<control-param name="orgUnit_plane">false</control-param>
							<control-param name="orgUnit_showSearch">true</control-param>
							<control-param name="orgUnit_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-orgstr:workGroup -->
							<control-param name="workGroup_label">Рабочая группа</control-param>
							<control-param name="workGroup_endpointType">lecm-orgstr:workGroup</control-param>
							<control-param name="workGroup_endpointMany">true</control-param>
							<control-param name="workGroup_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="workGroup_nameSubstituteString">{cm:name}</control-param>
							<control-param name="workGroup_plane">true</control-param>
							<control-param name="workGroup_showSearch">true</control-param>
							<control-param name="workGroup_sortProp">lecm-orgstr:element-short-name</control-param>
							<!-- lecm-review-list:review-list-item -->
							<control-param name="reviewItem_label">Список ознакомления</control-param>
							<control-param name="reviewItem_endpointType">lecm-review-list:review-list-item</control-param>
							<control-param name="reviewItem_endpointMany">true</control-param>
							<control-param name="reviewItem_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Списки_x0020_ознакомления</control-param>
							<control-param name="reviewItem_nameSubstituteString">{cm:title}</control-param>
							<control-param name="reviewItem_selectedItemsNameSubstituteString">{cm:title}</control-param>
							<control-param name="reviewItem_treeNodeSubstituteString">{cm:title}</control-param>
							<control-param name="reviewItem_treeNodeTitleSubstituteString">{cm:title}</control-param>
							<control-param name="reviewItem_plane">true</control-param>
							<control-param name="reviewItem_showSearch">true</control-param>
							<control-param name="reviewItem_childrenDataSource">lecm/review/ds/allowedReviewLists</control-param>
							<control-param name="reviewItem_sortProp">cm:title</control-param>
		<!--					<control-param name="secondShowAssocViewForm">true</control-param>
							<control-param name="secondPickerButtonLabel"><![CDATA[<i class='icon-building'></i>]]></control-param>
							<control-param name="secondPickerButtonTitleCode">title.review.list.select</control-param>
							<control-param name="secondChangeItemsFireAction">reviewListsSelected</control-param>-->
						</control>
					</field>
					<field id="lecm-review-ts:save-as">
						<control template="/ru/it/lecm/workflow/review/controls/review-list-save-control.ftl"/>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<!--<show id="lecm-document:indexTableRow"/>-->
					<show id="lecm-review-info:initiator-username"/>
					<show id="lecm-review-info:review-start-date"/>
					<show id="lecm-review-info:initiator-assoc"/>
					<show id="lecm-review-info:review-list-assoc"/>
					<show id="lecm-review-info:review-state"/>
				</field-visibility>
				<appearance>
					<field id="lecm-review-info:initiator-username" substituteString="{lecm-review-info:initiator-assoc/lecm-orgstr:employee-person-assoc/cm:userName}"/>
					<field id="lecm-review-info:review-list-assoc" label="Список"/>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-review-info:info">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-document:indexTableRow"/>
					<show id="lecm-review-info:review-state"/>
					<show id="lecm-review-info:review-start-date"/>
					<show id="lecm-review-ts:initiator-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:indexTableRow">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl"/>
					</field>
					<field id="lecm-review-info:review-state" read-only="true">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
					</field>
					<field id="lecm-review-info:review-start-date" read-only="true"/>
					<field id="lecm-review-info:initiator-assoc" read-only="true"/>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>
