<?xml version="1.0" encoding="UTF-8"?>
<ds.config>
    <report.descriptor mnem="ord-content">
        <l18>
            <item key="RU_RU"><![CDATA[Контент ОРД]]></item>
        </l18>
        <provider
            javaClass="ru.it.lecm.reports.generators.GenericDSProviderBase" mnem="PROV_GENERIC_PROVIDER">
            <l18>
                <item key="RU_RU"><![CDATA[genericProvider]]></item>
            </l18>
        </provider>
        <templates>
            <template
                filename="ord-content_ord-content-order-tmpl.odt"
                mnem="ord-content-order-tmpl" type="OOFFICE">
                <l18>
                    <item key="RU_RU"><![CDATA[Приказ]]></item>
                </l18>
            </template>
            <template
                filename="ord-content_ord-content-command-tmpl.odt"
                mnem="ord-content-command-tmpl" type="OOFFICE">
                <l18>
                    <item key="RU_RU"><![CDATA[Распоряжение]]></item>
                </l18>
            </template>
        </templates>
        <datasource.descriptor>
            <l18>
                <item key="RU_RU"><![CDATA[d967dea4-444c-4c0f-9213-bdac239fd466]]></item>
            </l18>
        </datasource.descriptor>
        <roles/>
    </report.descriptor>
    <query.descriptor>
        <offset>0</offset>
        <limit>-1</limit>
        <pgsize>-1</pgsize>
        <queryText><![CDATA[]]></queryText>
        <querySort/>
        <allVersions>true</allVersions>
        <preferedType>lecm-ord:document-fake</preferedType>
        <isMultiRow>false</isMultiRow>
        <isCustom>false</isCustom>
        <flags/>
    </query.descriptor>
    <fields>
        <field alfrescoType="d:text" displayName="Заголовок"
            javaValueClass="java.lang.String" jrFldName="title" queryFldName="{lecm-document:title}">
            <l18>
                <item key="RU_RU"><![CDATA[Заголовок]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Содержание"
            javaValueClass="java.lang.String"
            jrFldName="summary-content" queryFldName="{lecm-eds-document:summaryContent}">
            <l18>
                <item key="RU_RU"><![CDATA[Содержание]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Пункты"
            javaValueClass="java.util.List"
            jrFldName="ord-item-subreport" queryFldName="{{subreport::ord-item-subreport}}">
            <l18>
                <item key="RU_RU"><![CDATA[Пункты]]></item>
            </l18>
        </field>
        <field alfrescoType="d:text" displayName="Подписанты"
            javaValueClass="java.util.List"
            jrFldName="ord-signer-subreport" queryFldName="{{subreport::ord-signer-subreport}}">
            <l18>
                <item key="RU_RU"><![CDATA[Подписанты]]></item>
            </l18>
        </field>
    </fields>
    <subreports>
        <subreport destColumnName="ord-item-subreport" name="ord-item-subreport">
            <sublist.source><![CDATA[{lecm-ord-table-structure:items-assoc/cm:contains/}]]></sublist.source>
            <sublist.sort><![CDATA[ord-item-number|ASC]]></sublist.sort>
            <sublist.item>
                <map>
                    <item key="ord-item-assignee"><![CDATA[Ответственный: {lecm-ord-table-structure:executor-assoc/lecm-orgstr:employee-last-name}]]></item>
                    <item key="ord-item-number"><![CDATA[{lecm-document:indexTableRow}]]></item>
                    <item key="ord-item-content"><![CDATA[{lecm-ord-table-structure:item-content}]]></item>
                    <item key="ord-item-info"><![CDATA[{lecm-ord-table-structure:item-content}. Ответственный: {lecm-ord-table-structure:executor-assoc/lecm-orgstr:employee-last-name}
Срок исполнения {lecm-ord-table-structure:execution-date?dd-MM-yyyy}]]></item>
                    <item key="ord-item-execution-date"><![CDATA[{lecm-ord-table-structure:execution-date?dd-MM-yyyy}]]></item>
                </map>
            </sublist.item>
        </subreport>
        <subreport destColumnName="ord-signer-subreport" name="ord-signer-subreport">
            <sublist.source><![CDATA[{lecm-ord:signers-assoc/}]]></sublist.source>
            <sublist.item>
                <map>
                    <item key="ord-signer-position"><![CDATA[{..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}]]></item>
                    <item key="ord-signer-fio"><![CDATA[_____________/{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} ]]></item>
                </map>
            </sublist.item>
        </subreport>
    </subreports>
</ds.config>
