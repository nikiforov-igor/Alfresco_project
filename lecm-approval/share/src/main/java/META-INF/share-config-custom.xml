<?xml version="1.0" encoding="UTF-8"?>
<alfresco-config>

	<config evaluator="string-compare" condition="activiti$lecmParallelApproval">
		<forms>
			<form>
				<field-visibility>
					<show id="bpm:workflowDueDate"/>
					<show id="bpm:workflowDescription" />
					<show id="lecmPar:employeesAssoc"/>
					<show id="packageItems"/>
				</field-visibility>
				<appearance>
					<field id="bpm:workflowDescription" labelid="workflow.field.message">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="style">width: 95%</control-param>
						</control>
					</field>

					<field id="lecmPar:employeesAssoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="nameSubstituteString">{cm:name}</control-param>
						</control>
					</field>

					<field id="packageItems">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="task-type" condition="lecmPar:approveTask">
		<forms>
			<form>
				<field-visibility>
					<show id="bpm:dueDate" />
					<show id="lecmPar:approveTaskResult" />
					<show id="bpm:comment" />
					<show id="lecmPar:approveTaskCommentAssoc" />
				</field-visibility>
				<appearance>
					<field id="bpm:dueDate" label-id="workflow.field.due">
						<control template="/org/alfresco/components/form/controls/info.ftl" />
					</field>
					<field id="lecmPar:approveTaskResult">
						<control template="/org/alfresco/components/form/controls/workflow/activiti-transitions.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>



	<config evaluator="string-compare" condition="activiti$lecmSequentialApproval">
		<forms>
			<form>
				<field-visibility>
					<show id="bpm:workflowDueDate"/>
					<show id="bpm:workflowDescription" />
					<show id="lecmSeq:employeesAssoc"/>
					<show id="packageItems"/>
				</field-visibility>
				<appearance>
					<field id="bpm:workflowDescription" labelid="workflow.field.message">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="style">width: 95%</control-param>
						</control>
					</field>

					<field id="lecmSeq:employeesAssoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="nameSubstituteString">{cm:name}</control-param>
						</control>
					</field>
					<field id="packageItems">
						<control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="task-type" condition="lecmSeq:approveTask">
		<forms>
			<form>
				<field-visibility>
					<show id="bpm:dueDate" />
					<show id="lecmSeq:approveTaskResult" />
					<show id="bpm:comment" />
					<show id="lecmSeq:approveTaskCommentAssoc" />
				</field-visibility>
				<appearance>
					<field id="bpm:dueDate" label-id="workflow.field.due">
						<control template="/org/alfresco/components/form/controls/info.ftl" />
					</field>
					<field id="lecmSeq:approveTaskResult">
						<control template="/org/alfresco/components/form/controls/workflow/activiti-transitions.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="task-type" condition="lecmPar:parallelApproval">
        <forms>
            <form id="workflow-details">
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/approval/controls/package-items-with-approval-list-control.ftl">
                            <control-param name="nameSubstituteString">{lecm-document:present-string}</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-al:approval-list">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-al:approval-list-document-version"/>
                    <show id="lecm-al:approval-list-approve-start"/>
                    <show id="lecm-al:approval-list-approve-date"/>
                    <show id="lecm-al:approval-list-contains-approval-item"/>
                    <show id="lecm-al:approval-list-decision"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-al:approval-list-contains-approval-item">
                        <control template="/ru/it/lecm/approval/controls/approval-list.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-al:approval-item">
        <forms>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-al:approval-item-employee-assoc"/>
                    <show id="lecm-al:approval-item-employee-position" force="true"/>
                    <show id="lecm-al:approval-item-employee-unit" force="true"/>
                    <show id="lecm-al:approval-item-approve-date"/>
                    <show id="lecm-al:approval-item-decision"/>
                    <show id="lecm-al:approval-item-comment"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-al:approval-item-employee-unit" substituteString="{lecm-al:approval-item-employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}"/>
                    <field id="lecm-al:approval-item-employee-position" substituteString="{lecm-al:approval-item-employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config>
        <forms>
            <dependencies>
                <css src="/css/lecm-approval/contracts-approval-list.css" />
            </dependencies>
        </forms>
    </config>
</alfresco-config>
