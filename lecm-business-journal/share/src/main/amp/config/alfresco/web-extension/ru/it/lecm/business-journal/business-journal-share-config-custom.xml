<alfresco-config>

	<!--
		<config>
			<forms>
				<dependencies>
					<js src="/scripts/lecm-business-journal/business-journal-datagrid.js"/>
				</dependencies>
			</forms>
		</config>
	-->
	<config evaluator="node-type" condition="lecm-busjournal:objectType">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:objectType-code"/>
					<show id="lecm-busjournal:objectType-class"/>
					<show id="lecm-busjournal:objectType-template"/>
					<show id="lecm-busjournal:objectType-list-template"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-busjournal:objectType">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:objectType-code"/>
					<show id="lecm-busjournal:objectType-class"/>
					<show id="lecm-busjournal:objectType-template"/>
					<show id="lecm-busjournal:objectType-list-template"/>
				</field-visibility>
			</form>
			<form id="search">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:objectType-code"/>
					<show id="lecm-busjournal:objectType-class"/>
					<show id="lecm-busjournal:objectType-template"/>
					<show id="lecm-busjournal:objectType-list-template"/>
				</field-visibility>
                <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:objectType-code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:objectType-class" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:objectType-template" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:objectType-list-template" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:objectType-code"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-busjournal:eventCategory">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:eventCategory-on"/>
					<!--<show id="lecm-busjournal:eventCategory-code"/>-->
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-busjournal:eventCategory">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:eventCategory-code"/>
					<show id="lecm-busjournal:eventCategory-on"/>
				</field-visibility>
			</form>
			<form id="search">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-busjournal:eventCategory-code"/>
					<show id="lecm-busjournal:eventCategory-on"/>
				</field-visibility>
                <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:eventCategory-code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-busjournal:eventCategory-on"/>
					<show id="cm:name"/>
					<show id="lecm-busjournal:eventCategory-code"/>
				</field-visibility>
				<appearance>
					<field id="cm:name" label-id="info.name" />
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-busjournal:messageTemplate">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-busjournal:messageTemplate-objType-assoc"/>
					<show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
					<show id="lecm-busjournal:messageTemplate-template"/>
					<show id="lecm-busjournal:messageTemplate-code"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-busjournal:messageTemplate">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-busjournal:messageTemplate-objType-assoc"/>
					<show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
					<show id="lecm-busjournal:messageTemplate-template"/>
					<show id="lecm-busjournal:messageTemplate-code"/>
				</field-visibility>
			</form>
			<form id="search">
				<field-visibility>
					<show id="lecm-busjournal:messageTemplate-objType-assoc"/>
					<show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
					<show id="lecm-busjournal:messageTemplate-template"/>
					<show id="lecm-busjournal:messageTemplate-code"/>
				</field-visibility>
                <appearance>
                    <field id="lecm-busjournal:messageTemplate-objType-assoc" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:messageTemplate-evCategory-assoc" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:messageTemplate-template" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-busjournal:messageTemplate-code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-busjournal:messageTemplate-objType-assoc"/>
					<show id="lecm-busjournal:messageTemplate-evCategory-assoc"/>
					<show id="lecm-busjournal:messageTemplate-template"/>
					<show id="lecm-busjournal:messageTemplate-code"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-busjournal:bjRecord">
		<forms>
			<form>
				<view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
				<edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
				<field-visibility>
					<show id="lecm-busjournal:bjRecord-date"/>
					<show id="lecm-busjournal:bjRecord-description"/>

					<show id="lecm-busjournal:bjRecord-evCategory-assoc"/>
					<show id="lecm-busjournal:bjRecord-objType-assoc"/>
					<show id="lecm-busjournal:bjRecord-initiator-assoc"/>

					<show id="lecm-busjournal:bjRecord-mainObject-assoc"/>

					<show id="lecm-busjournal:bjRecord-secondaryObj1-assoc"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj2-assoc"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj3-assoc"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj4-assoc"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj5-assoc"/>
				</field-visibility>
				<appearance>
					<set id="common" appearance="" label-id="info.common-info" />
					<set id="secondary" appearance="" label-id="info.secondary-info" />

					<field id="lecm-busjournal:bjRecord-date" set="common"/>
					<field id="lecm-busjournal:bjRecord-initiator-assoc" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-initiator}</control-param>
							<control-param name="showAssocViewForm">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-mainObject-assoc" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-mainObject}</control-param>
							<control-param name="showAssocViewForm">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-objType-assoc" set="common"/>
					<field id="lecm-busjournal:bjRecord-evCategory-assoc" set="common"/>

					<field id="lecm-busjournal:bjRecord-description" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/textfield-decoded-html.ftl"/>
					</field>

					<field id="lecm-busjournal:bjRecord-secondaryObj1-assoc" set="secondary">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="showAssocViewForm">true</control-param>
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj1}</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-secondaryObj2-assoc" set="secondary">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj2}</control-param>
							<control-param name="showAssocViewForm">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-secondaryObj3-assoc" set="secondary">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj3}</control-param>
							<control-param name="showAssocViewForm">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-secondaryObj4-assoc" set="secondary">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj4}</control-param>
							<control-param name="showAssocViewForm">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-secondaryObj5-assoc" set="secondary">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="substituteParent">true</control-param>
							<control-param name="nameSubstituteString">{lecm-busjournal:bjRecord-secondaryObj5}</control-param>
							<control-param name="showAssocViewForm">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-busjournal:bjRecord">
		<forms>
			<form>
				<view-form template="/ru/it/lecm/business-journal/components/controls/view-form.ftl" />
				<field-visibility>
				</field-visibility>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-busjournal:bjRecord-date"/>
					<show id="lecm-busjournal:bjRecord-objType-assoc"/>
					<show id="lecm-busjournal:bjRecord-evCategory-assoc"/>
					<show id="lecm-busjournal:bjRecord-mainObject-assoc"/>
					<show id="lecm-busjournal:secondary-objects" force="true"/>
					<show id="lecm-busjournal:bjRecord-initiator-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-busjournal:bjRecord-mainObject-assoc" substituteString="$parent{lecm-busjournal:bjRecord-mainObject}"/>
					<field id="lecm-busjournal:bjRecord-initiator-assoc" substituteString="$parent{lecm-busjournal:bjRecord-initiator}"/>
					<field id="lecm-busjournal:secondary-objects" substituteString="{lecm-busjournal:bjRecord-secondaryObj1} {lecm-busjournal:bjRecord-secondaryObj2} {lecm-busjournal:bjRecord-secondaryObj3} {lecm-busjournal:bjRecord-secondaryObj4} {lecm-busjournal:bjRecord-secondaryObj5}"/>
				</appearance>
			</form>
			<form id="bjHistory">
				<field-visibility>
					<show id="lecm-busjournal:bjRecord-date"/>
					<show id="lecm-busjournal:bjRecord-description"/>
				</field-visibility>
			</form>
			<form id="search">
				<field-visibility>
					<show id="lecm-busjournal:bjRecord-date"/>
					<!--<show id="lecm-busjournal:bjRecord-description"/>-->
					<show id="lecm-busjournal:bjRecord-initiator-assoc"/>
					<show id="lecm-busjournal:bjRecord-mainObject-assoc"/>
					<show id="lecm-busjournal:bjRecord-evCategory-assoc"/>
					<show id="lecm-busjournal:bjRecord-objType-assoc"/>
					<!--                    <show id="lecm-busjournal:bjRecord-secondaryObj1-assoc-text-content"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj2-assoc-text-content"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj3-assoc-text-content"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj4-assoc-text-content"/>
					<show id="lecm-busjournal:bjRecord-secondaryObj5-assoc-text-content"/>-->
				</field-visibility>
				<appearance>
					<field id="lecm-busjournal:bjRecord-date">
						<control template="/ru/it/lecm/base-share/components/controls/daterange-control.ftl"/>
					</field>
					<field id="lecm-busjournal:bjRecord-initiator-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="plane">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-evCategory-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Категория_x0020_события</control-param>
							<!--<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>-->
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="plane">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-objType-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тип_x0020_объекта</control-param>
							<!--<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>-->
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="plane">true</control-param>
						</control>
					</field>
					<field id="lecm-busjournal:bjRecord-mainObject-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
                            <control-param name="rootLocation">/app:company_home</control-param>
                            <control-param name="itemType">lecm-document:base</control-param>
                            <control-param name="nameSubstituteString">{lecm-document:ext-present-string}&lt;/br&gt;{lecm-document:list-present-string}</control-param>
                            <control-param name="selectedItemsNameSubstituteString">{lecm-document:ext-present-string}</control-param>
							<control-param name="showSearch">true</control-param>
                            <control-param name="plane">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<!-- Custom Aspects forms-->
	<!--<config evaluator="aspect" condition="lecm-busjournal-aspects:history">-->
	<!--<forms>-->

	<!--<form>-->
	<!--<edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>-->
	<!--<view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>-->
	<!--<field-visibility>-->
	<!--<show id="lecm-busjournal-aspects:history-list"/>-->
	<!--</field-visibility>-->
	<!--<appearance>-->
	<!--<set id="busjournalHistory" appearance="" label-id="info.business-journal-history"/>-->
	<!--<field id="lecm-busjournal-aspects:history-list" set="busjournalHistory">-->
	<!--<control template="/ru/it/lecm/business-journal/components/controls/bjHistory-datagrid-control.ftl"/>-->
	<!--</field>-->
	<!--</appearance>-->
	<!--</form>-->

	<!--</forms>-->
	<!--</config>-->

	<config evaluator="node-type" condition="lecm-busjournal:archiverSettings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-busjournal:archiver-deep"/>
					<show id="lecm-busjournal:archiver-period"/>
				</field-visibility>
				<appearance>
					<field id="lecm-busjournal:archiver-deep" help-id="lecm-busjournal-archiver-deep-help-id"/>
					<field id="lecm-busjournal:archiver-period" help-id="lecm-busjournal-archiver-archiver-period-help-id"/>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>