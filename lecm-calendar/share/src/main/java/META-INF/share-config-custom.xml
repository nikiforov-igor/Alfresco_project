<?xml version='1.0' encoding='UTF-8'?>
<alfresco-config>
	<!--Список годов-->
	<config evaluator="model-type" condition="lecm-cal:calendar">
		<forms>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-cal:year"/>
					<show id="lecm-cal:comment"/>
				</field-visibility>
			</form>
			<form id="createNewYearForm">
				<field-visibility>
					<show id="lecm-cal:year"/>
					<show id="lecm-cal:comment"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-cal:calendar">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-cal:comment"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<!--Рабочие дни-->
	<config evaluator="model-type" condition="lecm-cal:working-days">
		<forms>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-cal:day"/>
					<show id="lecm-cal:reason"/>
				</field-visibility>
			</form>
			<form id="createNewSpecialDayForm">
				<field-visibility>
					<show id="lecm-cal:day"/>
					<show id="lecm-cal:reason"/>
				</field-visibility>
				<appearance>
					<field id="lecm-cal:day"  mandatory="true">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Calendar.SpecialDays.dayExistenceValidation"
										event="blur" message-id="message.new-date.error" />
						</constraint-handlers>
						<control template="/ru/it/lecm/wcalendar/controls/date-augmented.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-cal:working-days">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-cal:reason"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<!--Выходные дни-->
	<config evaluator="model-type" condition="lecm-cal:non-working-days">
		<forms>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-cal:day"/>
					<show id="lecm-cal:reason"/>
				</field-visibility>
			</form>
			<form id="createNewSpecialDayForm">
				<field-visibility>
					<show id="lecm-cal:day"/>
					<show id="lecm-cal:reason"/>
				</field-visibility>
				<appearance>
					<field id="lecm-cal:day"  mandatory="true">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Calendar.SpecialDays.dayExistenceValidation"
										event="blur" message-id="message.new-date.error" />
						</constraint-handlers>
						<control template="/ru/it/lecm/wcalendar/controls/date-augmented.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-cal:non-working-days">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-cal:reason"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="lecm-sched:schedule">
		<forms>
			<form id="datagrid">
				<field-visibility>
					<show id="lecm-sched:sched-employee-link-assoc"/>
					<show id="lecm-sched:std-begin"/>
					<show id="lecm-sched:std-end"/>
					<show id="lecm-sched:type"/>
				</field-visibility>
			</form>
			<form id="createNewCommonScheduleForm">
				<field-visibility>
					<show id="lecm-sched:sched-employee-link-assoc"/>
					<show id="lecm-sched:std-begin"/>
					<show id="lecm-sched:std-end"/>
					<show id="lecm-sched:type"/>
				</field-visibility>
				<appearance>
					<set id="time" template="/org/alfresco/components/form/2-column-set.ftl" appearance="title" label-id="label.schedule.form.set.work-time" />
					<field id="lecm-sched:std-begin" mandatory="true" set="time">
						<control template="/ru/it/lecm/wcalendar/controls/time-picker.ftl">
							<control-param name="style">position: relative;</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Schedule.timeValidation"
										event="keyup" message-id="message.time-format.error" />
						</constraint-handlers>
					</field>
					<field id="lecm-sched:std-end" mandatory="true" set="time">
						<control template="/ru/it/lecm/wcalendar/controls/time-picker.ftl">
							<control-param name="style">position: relative;</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Schedule.timeValidation"
										event="keyup" message-id="message.time-format.error" />
						</constraint-handlers>
					</field>
					<field id="lecm-sched:sched-employee-link-assoc" mandatory="true">
						<control template="/ru/it/lecm/wcalendar/controls/double-picker-control.ftl">
							<control-param name="startLocation1">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="startLocation2">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="pickerLabel1">label.schedule.form.picker.orgstructure</control-param>
							<control-param name="pickerLabel2">label.schedule.form.picker.employee</control-param>
							<control-param name="itemType1">lecm-orgstr:organization-unit</control-param>
							<control-param name="itemType2">lecm-orgstr:employee</control-param>
							<control-param name="plane1">false</control-param>
							<control-param name="plane2">true</control-param>
							<control-param name="endpointMandatory">true</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="multipleSelectMode">false</control-param>
						</control>
					</field>
					<field id="lecm-sched:type">
						<control template="/ru/it/lecm/wcalendar/controls/hidden-patiently-value.ftl">
							<control-param name="value">COMMON</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="createNewSpecialScheduleForm">
				<field-visibility>
					<show id="lecm-sched:sched-employee-link-assoc"/>
					<show id="lecm-sched:time-limit-start"/>
					<show id="lecm-sched:time-limit-end"/>
					<show id="reiteration-rules"/>
					<show id="lecm-sched:std-begin"/>
					<show id="lecm-sched:std-end"/>
					<show id="lecm-sched:type"/>
				</field-visibility>
				<appearance>
					<set id="time-limit" template="/ru/it/lecm/wcalendar/controls/2-column-set-augmented.ftl" appearance="title" label-id="label.schedule.form.set.date-interval" />
					<set id="reiteration-rules"  appearance="title" label-id="label.schedule.form.reiteration-rules" />
					<set id="time" template="/org/alfresco/components/form/2-column-set.ftl" appearance="title" label-id="label.schedule.form.set.work-time" />
					<field id="lecm-sched:sched-employee-link-assoc" mandatory="true">
						<control template="/ru/it/lecm/wcalendar/controls/double-picker-control.ftl">
							<control-param name="startLocation1">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура</control-param>
							<control-param name="startLocation2">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="pickerLabel1">label.schedule.form.picker.orgstructure</control-param>
							<control-param name="pickerLabel2">label.schedule.form.picker.employee</control-param>
							<control-param name="itemType1">lecm-orgstr:organization-unit</control-param>
							<control-param name="itemType2">lecm-orgstr:employee</control-param>
							<control-param name="plane1">false</control-param>
							<control-param name="plane2">true</control-param>
							<control-param name="endpointMandatory">true</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="multipleSelectMode">false</control-param>
						</control>
					</field>
					<field id="lecm-sched:std-begin" mandatory="true" set="time">
						<control template="/ru/it/lecm/wcalendar/controls/time-picker.ftl">
							<control-param name="style">position: relative;</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Schedule.timeValidation"
										event="keyup" message-id="message.time-format.error" />
						</constraint-handlers>
					</field>
					<field id="lecm-sched:std-end" mandatory="true" set="time">
						<control template="/ru/it/lecm/wcalendar/controls/time-picker.ftl">
							<control-param name="style">position: relative;</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Schedule.timeValidation"
										event="keyup" message-id="message.time-format.error" />
						</constraint-handlers>
					</field>
					<field id="lecm-sched:type">
						<control template="/ru/it/lecm/wcalendar/controls/hidden-patiently-value.ftl">
							<control-param name="value">SPECIAL</control-param>
						</control>
					</field>
					<field id="lecm-sched:time-limit-start" label-id="label.schedule.form.set.date-interval.begin" mandatory="true" set="time-limit">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Schedule.scheduleLimitValidation"
										event="keyup" message-id="message.error.schedule.schedule-date-limit-validation.early-end" />
						</constraint-handlers>
					</field>
					<field id="lecm-sched:time-limit-end" label-id="label.schedule.form.set.date-interval.end" mandatory="true" set="time-limit">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Schedule.scheduleLimitValidation"
										event="keyup" message-id="message.error.schedule.schedule-date-limit-validation.early-end" />
						</constraint-handlers>
					</field>
					<field id="reiteration-rules" label-id="label.schedule.form.reiteration-rules" mandatory="true" set="reiteration-rules">
						<control template="/ru/it/lecm/wcalendar/controls/reiteration-rules-control.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-sched:schedule">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-sched:sched-employee-link-assoc"/>
					<show id="lecm-sched:type"/>
					<show id="lecm-sched:std-begin"/>
					<show id="lecm-sched:std-end"/>
					<show id="lecm-sched:time-limit-start"/>
					<show id="lecm-sched:time-limit-end"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="lecm-absence:absence">
		<forms>
			<form id="absenceProfileDatagrid">
				<field-visibility>
					<show id="lecm-absence:begin"/>
					<show id="lecm-absence:end"/>
					<show id="lecm-absence:unlimited"/>
					<show id="lecm-absence:comment"/>
					<show id="lecm-absence:abscence-reason-assoc"/>
				</field-visibility>
			</form>
			<form id="absenceAdminDatagrid">
				<field-visibility>
					<show id="lecm-absence:activated"/>
					<show id="lecm-absence:abscent-employee-assoc"/>
					<show id="lecm-absence:begin"/>
					<show id="lecm-absence:end"/>
					<show id="lecm-absence:unlimited"/>
					<show id="lecm-absence:comment"/>
					<show id="lecm-absence:abscence-reason-assoc"/>
				</field-visibility>
			</form>
			<form id="createNewEmployeeAbsenceForm">
				<field-visibility>
					<show id="lecm-absence:abscent-employee-assoc"/>
					<show id="lecm-absence:begin"/>
					<show id="lecm-absence:end"/>
					<show id="lecm-absence:unlimited"/>
					<show id="lecm-absence:comment"/>
					<show id="lecm-absence:abscence-reason-assoc"/>
				</field-visibility>
				<appearance>
					<set id="dates" template="/ru/it/lecm/wcalendar/controls/2-column-set-augmented.ftl" appearance="title" label-id="label.absence.form.set.date-interval" />
					<set id="unlimited"/>
					<set id="abscence-reason"/>
					<set id="comment"/>
					<field id="lecm-absence:abscent-employee-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="nameSubstituteString">{cm:name}</control-param>
						</control>
					</field>
					<field id="lecm-absence:begin" mandatory="true" set="dates">
						<control template="/org/alfresco/components/form/controls/date.ftl">
							<control-param name="showTime">false</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Absence.dateIntervalValidation" event="blur" />
						</constraint-handlers>
					</field>
					<field id="lecm-absence:end" mandatory="true" set="dates">
						<control template="/org/alfresco/components/form/controls/date.ftl">
							<control-param name="showTime">false</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Absence.dateIntervalValidation" event="blur" />
						</constraint-handlers>
					</field>
					<field id="lecm-absence:unlimited" set="unlimited">
						<control template="/ru/it/lecm/wcalendar/controls/checkbox-disabling-field.ftl"/>
					</field>
					<field id="lecm-absence:abscence-reason-assoc" set="abscence-reason">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Причины_x0020_отсутствия</control-param>
							<control-param name="nameSubstituteString">{lecm-absence:code} - {cm:name}</control-param>
							<control-param name="notSelectedOptionShow">true</control-param>
							<control-param name="notSelectedOptionLabel"> </control-param>
							<control-param name="showCreateNewButton">true</control-param>
						</control>
					</field>
					<field id="lecm-absence:comment" set="comment"/>
				</appearance>
			</form>
			<form id="createNewMyAbsenceForm">
				<field-visibility>
					<show id="lecm-absence:abscent-employee-assoc"/>
					<show id="lecm-absence:begin"/>
					<show id="lecm-absence:end"/>
					<show id="lecm-absence:unlimited"/>
					<show id="lecm-absence:comment"/>
					<show id="lecm-absence:abscence-reason-assoc"/>
				</field-visibility>
				<appearance>
					<set id="dates" template="/ru/it/lecm/wcalendar/controls/2-column-set-augmented.ftl" appearance="title" label-id="label.absence.form.set.date-interval" />
					<set id="unlimited"/>
					<set id="abscence-reason"/>
					<set id="comment"/>
					<field id="lecm-absence:abscent-employee-assoc" >
						<control template="/ru/it/lecm/wcalendar/controls/hidden-current-employee.ftl"/>
					</field>
					<field id="lecm-absence:begin" set="dates">
						<control template="/org/alfresco/components/form/controls/date.ftl">
							<control-param name="showTime">false</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Absence.dateIntervalValidation" event="blur"/>
						</constraint-handlers>
					</field>
					<field id="lecm-absence:end" mandatory="true" set="dates">
						<control template="/org/alfresco/components/form/controls/date.ftl">
							<control-param name="showTime">false</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Absence.dateIntervalValidation" event="blur"/>
						</constraint-handlers>
					</field>
					<field id="lecm-absence:unlimited" mandatory="true" set="unlimited">
						<control template="/ru/it/lecm/wcalendar/controls/checkbox-disabling-field.ftl"/>
					</field>
					<field id="lecm-absence:abscence-reason-assoc" set="abscence-reason">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Причины_x0020_отсутствия</control-param>
							<control-param name="nameSubstituteString">{lecm-absence:code} - {cm:name}</control-param>
							<control-param name="notSelectedOptionShow">true</control-param>
							<control-param name="notSelectedOptionLabel"> </control-param>
							<control-param name="showCreateNewButton">false</control-param>
						</control>
					</field>
					<field id="lecm-absence:comment" set="comment"/>
				</appearance>
			</form>
			<form id="createNewInstantAbsenceForm">
				<field-visibility>
					<show id="lecm-absence:abscent-employee-assoc"/>
					<show id="lecm-absence:unlimited"/>
					<show id="lecm-absence:begin"/>
					<show id="lecm-absence:end"/>
					<show id="lecm-absence:abscence-reason-assoc"/>
					<show id="lecm-absence:comment"/>
					<show id="lecm-absence:auto-answer-enabled"/>
					<show id="lecm-absence:auto-answer-text"/>
				</field-visibility>
				<appearance>
					<!--"fieldset", "panel", "bordered-panel", "title" and "whitespace"-->
					<!--<set id="out-of-office" template="/org/alfresco/components/form/2-column-set.ftl" appearance="" label=""/>-->
					<!--<set id="additional"/>-->
					<field id="lecm-absence:abscent-employee-assoc">
						<control template="/ru/it/lecm/wcalendar/controls/hidden-current-employee.ftl"/>
					</field>
					<field id="lecm-absence:begin">
						<control template="/org/alfresco/components/form/controls/hidden.ftl"/>
					</field>
					<field id="lecm-absence:end" mandatory="true" label-id="label.absence.form.out-of-office.back">
						<control template="/ru/it/lecm/wcalendar/controls/date-augmented.ftl">
							<control-param name="showTime">false</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Absence.dateIsNotBeforeToday" event="blur"  message-id="message.error.absence.date-interval-validation.early-end"/>
						</constraint-handlers>
					</field>
					<field id="lecm-absence:unlimited" mandatory="true" label-id="label.absence.form.out-of-office.unlimited">
						<control template="/ru/it/lecm/wcalendar/controls/checkbox-disabling-field.ftl">
							<control-param name="isTrue">true</control-param>
						</control>
					</field>
					<field id="lecm-absence:abscence-reason-assoc" mandatory="true" label-id="label.absence.form.out-of-office.reason">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Причины_x0020_отсутствия</control-param>
							<control-param name="nameSubstituteString">{lecm-absence:code} - {cm:name}</control-param>
							<control-param name="notSelectedOptionShow">true</control-param>
							<control-param name="notSelectedOptionLabel"> </control-param>
							<control-param name="showCreateNewButton">false</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.WCalendar.Absence.instantAbsenceReasonValidation" event="blur"/>
						</constraint-handlers>
					</field>
					<field id="lecm-absence:comment">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="rows">3</control-param>
							<control-param name="style">padding-left: 2px;</control-param>
						</control>
					</field>
					<field id="lecm-absence:auto-answer-text">
						<control template="/ru/it/lecm/wcalendar/controls/instant-absence-autoanswer.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-absence:absence">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-absence:abscence-reason-assoc"/>
					<show id="lecm-absence:begin"/>
					<show id="lecm-absence:end"/>
					<show id="lecm-absence:unlimited"/>
					<show id="lecm-absence:comment"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="lecm-absence:reason">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-absence:code"/>
					<show id="lecm-absence:color"/>
				</field-visibility>
				<appearance>
					<field id="lecm-absence:color">
						<control template="/ru/it/lecm/wcalendar/controls/color-picker.ftl">
							<control-param name="styleClass">color</control-param>
						</control>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-absence:code"/>
					<show id="lecm-absence:color"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-absence:reason">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-absence:code"/>
					<show id="lecm-absence:color"/>
				</field-visibility>
				<appearance>
					<field id="lecm-absence:color">
						<control template="/ru/it/lecm/wcalendar/controls/color-picker.ftl">
							<control-param name="styleClass">color</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>
