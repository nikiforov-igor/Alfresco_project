<alfresco-config>
	<config evaluator="model-type" condition="lecm-template:document-template">
		<forms>
			<form>
				<field-visibility>
					<!-- Действия -->
					<show id="lecm-base-dummy-aspects:script" force="true"/>
					<show id="cm:title"/>
					<show id="lecm-template:organizationAssoc"/>
					<show id="lecm-template:unitAssoc"/>
					<show id="lecm-template:readonly"/>
					<show id="lecm-template:doc-type"/>
					<show id="lecm-template:attributes"/>
				</field-visibility>
				<appearance>
						<set id="top" template="/org/alfresco/components/form/2-column-set.ftl"/>
						<set id="top2"/>
						<set id="bottom"/>

						<field id="cm:title" set="top2" mandatory="true">
							<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
						</field>
						<field id="lecm-template:organizationAssoc" set="top2" mandatory="true">
							<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
                                <control-param name="items"></control-param>
                                <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты</control-param>
                                <control-param name="additionalFilter">ASPECT:\"lecm-orgstr-aspects:is-organization-aspect\"</control-param>
                                <control-param name="plane">true</control-param>
                                <control-param name="showCreateNewLink">false</control-param>
                                <control-param name="showSearch">true</control-param>
                                <control-param name="nameSubstituteString">{lecm-contractor:shortname}</control-param>
                                <control-param name="changeItemsFireAction">templateOrganizationSelect</control-param>
                                <control-param name="sortProp">lecm-contractor:shortname</control-param>
                                <control-param name="showAssocViewForm">true</control-param>
                                <control-param name="autocompleteDataSourceMethodPost">false</control-param>
                                <control-param name="autocompleteDataSource">lecm/forms/picker</control-param>
                                <control-param name="childrenDataSource">/lecm/orgstructure/getOrganizations/picker</control-param>
                                <control-param name="pickerItemsScript">/lecm/orgstructure/getOrganizations/items</control-param>
                                <control-param name="defaultValueDataSource">/lecm/documents-templates/defaultOrganization</control-param>
							</control>
						</field>
						<field id="lecm-template:unitAssoc" set="top2">
							<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
								<control-param name="additionalFilter">PATH:\"//app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг/*//*\"</control-param>
								<control-param name="plane">true</control-param>
								<control-param name="showAutocomplete">true</control-param>
								<control-param name="showSearch">true</control-param>
                                <control-param name="showAssocViewForm">true</control-param>
                            </control>
						</field>
						<field id="lecm-template:readonly" set="top2">
							<control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl"/>
						</field>
						<field id="lecm-base-dummy-aspects:script" set="top">
							<control template="/ru/it/lecm/documents-templates/components/controls/actions.ftl"/>
						</field>
						<field id="lecm-template:doc-type" set="bottom">
							<control template="/ru/it/lecm/base-share/components/controls/hidden.ftl"/>
						</field>
						<field id="lecm-template:attributes" set="bottom">
							<control template="/ru/it/lecm/documents-templates/components/controls/attributes.ftl"/>
						</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="node-type" condition="lecm-template:document-template">
		<forms>
			<form>
				<field-visibility>
					<!-- Действия -->
					<show id="lecm-base-dummy-aspects:script" force="true"/>
					<show id="cm:title"/>
					<show id="lecm-template:organizationAssoc"/>
					<show id="lecm-template:unitAssoc"/>
					<show id="lecm-template:readonly"/>
					<show id="lecm-template:doc-type"/>
					<show id="lecm-template:attributes"/>
				</field-visibility>
				<appearance>
						<set id="top" template="/org/alfresco/components/form/2-column-set.ftl"/>
						<set id="top2"/>
						<set id="bottom"/>

						<field id="cm:title" set="top2" mandatory="true">
							<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
						</field>
						<field id="lecm-template:organizationAssoc" set="top2" mandatory="true">
							<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
                                <control-param name="items"></control-param>
                                <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты</control-param>
                                <control-param name="additionalFilter">ASPECT:\"lecm-orgstr-aspects:is-organization-aspect\"</control-param>
                                <control-param name="plane">true</control-param>
                                <control-param name="showCreateNewLink">false</control-param>
                                <control-param name="showSearch">true</control-param>
                                <control-param name="nameSubstituteString">{lecm-contractor:shortname}</control-param>
                                <control-param name="changeItemsFireAction">templateOrganizationSelect</control-param>
                                <control-param name="sortProp">lecm-contractor:shortname</control-param>
                                <control-param name="showAssocViewForm">true</control-param>
                                <control-param name="autocompleteDataSourceMethodPost">false</control-param>
                                <control-param name="autocompleteDataSource">lecm/forms/picker</control-param>
                                <control-param name="childrenDataSource">/lecm/orgstructure/getOrganizations/picker</control-param>
                                <control-param name="pickerItemsScript">/lecm/orgstructure/getOrganizations/items</control-param>
                                <control-param name="defaultValueDataSource">/lecm/documents-templates/defaultOrganization</control-param>
							</control>
						</field>
						<field id="lecm-template:unitAssoc" set="top2">
							<control template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
                                <control-param name="additionalFilter">PATH:\"//app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг/*//*\"</control-param>
                                <control-param name="plane">true</control-param>
                                <control-param name="showAutocomplete">true</control-param>
                                <control-param name="showSearch">true</control-param>
                                <control-param name="showAssocViewForm">true</control-param>
							</control>
						</field>
						<field id="lecm-template:readonly" set="top2">
							<control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl"/>
						</field>
						<field id="lecm-base-dummy-aspects:script" set="top">
							<control template="/ru/it/lecm/documents-templates/components/controls/actions.ftl"/>
						</field>
						<field id="lecm-template:doc-type" set="bottom">
							<control template="/ru/it/lecm/base-share/components/controls/hidden.ftl"/>
						</field>
						<field id="lecm-template:attributes" set="bottom">
							<control template="/ru/it/lecm/documents-templates/components/controls/attributes.ftl"/>
						</field>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>
