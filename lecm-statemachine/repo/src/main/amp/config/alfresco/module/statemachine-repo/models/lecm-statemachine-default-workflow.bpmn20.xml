<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:activiti="http://activiti.org/bpmn"
             xmlns:lecm="http://www.it.ru/LogicECM/bpmn/1.0"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.activiti.org/test" typeLanguage="http://www.w3.org/2001/XMLSchema">
<process id="default_statemachine">
    <startEvent activiti:formKey="lecm-statemachine:startTask" id="start"/>
    <userTask activiti:assignee="${bpm_assignee.properties.userName}" id="id34f6363e1a564b28bda366d8164c7ea9" name="Черновик"
              activiti:formKey="lecm-statemachine:startTask">
        <extensionElements>
            <lecm:extension>
                <lecm:event on="start">
                    <lecm:action type="StatusChange">
                        <lecm:attribute name="status" value="Черновик"/>
                        <roles>
                            <static-roles/>
                            <dynamic-roles>
                                <role name="BR_INITIATOR" privilege="full"/>
                                <role name="BR_MEMBER" privilege="full"/>
                            </dynamic-roles>
                        </roles>
                        <lecm:attribute name="uuid" value="d45048e9-9c0f-497b-be28-2f2d9cbf6ede"/>
                        <lecm:attribute name="forDraft" value="true"/>
                    </lecm:action>
                </lecm:event>
                <lecm:event on="take">
                    <lecm:action type="FinishStateWithTransition" variable="varidf89343e9ac4e404290417ca68e9081d6">
                        <lecm:attribute name="id34f6363e1a564b28bda366d8164c7ea91">
                            <lecm:parameter name="variableValue" value="idf8a1870a3c6b4bcca62c3a1d4cbadbc6"/>
                            <lecm:parameter name="labelId" value="В архив"/>
                        </lecm:attribute>
                    </lecm:action>
                </lecm:event>
                <lecm:event on="end"/>
            </lecm:extension>
        </extensionElements>
    </userTask>
    <sequenceFlow id="flow0" sourceRef="start" targetRef="id34f6363e1a564b28bda366d8164c7ea9"/>
    <sequenceFlow id="flow3" sourceRef="id34f6363e1a564b28bda366d8164c7ea9" targetRef="idf8a1870a3c6b4bcca62c3a1d4cbadbc6">
        <conditionExpression xsi:type="tFormalExpression">
            <![CDATA[
${!empty varidf89343e9ac4e404290417ca68e9081d6 && varidf89343e9ac4e404290417ca68e9081d6 == 'idf8a1870a3c6b4bcca62c3a1d4cbadbc6'}
]]>
        </conditionExpression>
    </sequenceFlow>
    <endEvent id="idf8a1870a3c6b4bcca62c3a1d4cbadbc6" name="Архив">
        <extensionElements>
            <lecm:extension>
                <lecm:event on="start"/>
                <lecm:event on="end">
                    <lecm:action type="ArchiveDocumentAction">
                        <lecm:attribute name="archiveFolder" value="Архив"/>
                        <lecm:attribute name="status" value="Архив"/>
                    </lecm:action>
                </lecm:event>
            </lecm:extension>
        </extensionElements>
    </endEvent>
</process>
</definitions>
