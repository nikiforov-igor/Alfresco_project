<?xml version="1.0" encoding="UTF-8"?>

<model name="lecm-orgstr:organizationStructure" xmlns="http://www.alfresco.org/model/dictionary/1.0">
    <description>Orgstructure Model</description>
    <author>DBashmakov</author>
    <version>1.0</version>
    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm"/>
    </imports>

    <namespaces>
        <namespace uri="http://www.it.ru/lecm/org/structure/1.0" prefix="lecm-orgstr"/>
    </namespaces>

    <types>
        <!-- Абстрактные модели -->
        <!-- Описание ресурса проекта -->
        <type name="lecm-orgstr:project-resource">
            <title>Project Resource</title>
            <parent>cm:content</parent>
        </type>

        <!-- Описание организационной единицы -->
        <type name="lecm-orgstr:organization-element">
            <title>Organization Element</title>
            <parent>cm:folder</parent>
            <properties>
                <property name="lecm-orgstr:element-full-name">
                    <title>Full Name</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:element-short-name">
                    <title>Short Name</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
            </properties>
            <associations>
                <!-- Список должностных лиц-->
                <association name="lecm-orgstr:element-official-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:official</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
        </type>

        <!-- Описание моделей -->
        <!-- Описание организации -->
        <type name="lecm-orgstr:organization">
            <title>Organization</title>
            <parent>lecm-orgstr:organization-element</parent>
            <properties>
                <property name="lecm-orgstr:org-leg-address">
                    <title>Legal Address</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:org-act-address">
                    <title>Actual Address</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:org-off-site">
                    <title>Official Site</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:org-phone">
                    <title>Phone numbers</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:org-fax">
                    <title>Fax numbers</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:org-email">
                    <title>E-mails</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:org-logo">
                    <title>Logo</title>
                    <type>d:any</type>
                </property>
                <property name="lecm-orgstr:org-tin">
                    <title>TIN</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:org-ownership-type">
                    <title>Type of ownership</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:org-incorporation-form">
                    <title>Form of incorporation</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:org-founding-docs">
                    <title>Information about the founding documents</title>
                    <type>d:text</type>
                </property>
            </properties>
            <associations>
                <!-- Связь со структурой-->
                <child-association name="lecm-orgstr:org-structure-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:organization-structure</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
                <!-- Связь со штатным расписанием-->
                <child-association name="lecm-orgstr:org-staff-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:staff-list</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </child-association>
                <!-- Связь с реестром проектов-->
                <child-association name="lecm-orgstr:org-projects-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:project-register</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!-- Папки объектов. DO NOT MODIFY -->

        <type name="lecm-orgstr:employee-container">
            <title>Employees Directory</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:personal-data-container">
            <title>Personal Data Directory</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:office-container">
            <title>Offices Directory</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:official-container">
            <title>Official Directory</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:workforce-container">
            <title>Workforce Directory</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:unit-composition-container">
            <title>Unit Composition Directory</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:project-register">
            <title>Project Register</title>
            <parent>cm:folder</parent>
        </type>

        <type name="lecm-orgstr:staff-list">
            <title>Staff List</title>
            <parent>cm:folder</parent>
            <properties>
                <property name="lecm-orgstr:staff-list-approval-date">
                    <type>d:date</type>
                </property>
            </properties>
        </type>

        <type name="lecm-orgstr:organization-structure">
            <title>Structure</title>
            <parent>cm:folder</parent>
            <associations>
                <!-- Связь со структурными подразделениями -->
                <child-association name="lecm-orgstr:org-unit-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:organization-unit</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!-- Структурное подразделение -->
        <type name="lecm-orgstr:organization-unit">
            <title>Organization Unit</title>
            <parent>lecm-orgstr:organization-element</parent>
            <properties>
                <property name="lecm-orgstr:unit-code">
                    <title>Code</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:unit-type">
                    <title>Type</title>
                    <type>d:text</type>
                    <constraints>
                        <constraint type="LIST">
                            <parameter name="allowedValues">
                                <list>
                                    <value>Separated</value>
                                    <value>Segregated</value>
                                </list>
                            </parameter>
                        </constraint>
                    </constraints>
                </property>
                <property name="lecm-orgstr:unit-is-exists">
                    <title>Is exists</title>
                    <type>d:boolean</type>
                    <default>true</default>
                </property>
            </properties>
            <associations>
                <!-- Список офисов -->
                <association name="lecm-orgstr:unit-offices-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:office</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>

                <!-- Список составов подразделения -->
                <association name="lecm-orgstr:unit-composition-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:unit-composition</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>

                <!-- Связь с подструктурными подразделениями -->
                <child-association name="lecm-orgstr:unit-inner-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:organization-unit</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!-- Сотрудник организации -->
        <type name="lecm-orgstr:employee">
            <title>Еmployee</title>
            <parent>cm:content</parent>
            <properties>
                <property name="lecm-orgstr:employee-first-name">
                    <title>First Name</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:employee-middle-name">
                    <title>Middle Name</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:employee-last-name">
                    <title>Last Name</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:employee-sex">
                    <title>Sex</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                    <constraints>
                        <constraint type="LIST">
                            <parameter name="allowedValues">
                                <list>
                                    <value>Male</value>
                                    <value>Female</value>
                                </list>
                            </parameter>
                        </constraint>
                    </constraints>
                </property>
                <property name="lecm-orgstr:employee-phone">
                    <title>Phone Number</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:employee-email">
                    <title>E-Mail</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:employee-photo">
                    <title>Photo</title>
                    <type>d:any</type>
                </property>
                <property name="lecm-orgstr:employee-number">
                    <title>Employee number</title>
                    <type>d:long</type>
                </property>
                <property name="lecm-orgstr:employee-fio-g">
                    <title>Full name in genitive</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:employee-fio-d">
                    <title>Full name in dative</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:employee-is-system-user">
                    <title>Is System User</title>
                    <type>d:boolean</type>
                    <default>false</default>
                </property>
            </properties>
            <associations>
                <!-- Связь с учетной записью в системе -->
                <association name="lecm-orgstr:employee-person-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>

                <!--  Связь с персональными данными -->
                <child-association name="lecm-orgstr:employee-person-data-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:personal-data</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!-- Должностное лицо -->
        <type name="lecm-orgstr:official">
            <title>Official</title>
            <parent>cm:content</parent>
            <properties>
                <property name="lecm-orgstr:official-can-facsimile">
                    <title>Can use a facsimile</title>
                    <type>d:boolean</type>
                </property>
            </properties>
            <associations>
                <!-- Связь с сотрудником -->
                <association name="lecm-orgstr:official-employee-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:employee</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </type>

        <!-- Должность -->
        <type name="lecm-orgstr:position">
            <title>Position</title>
            <parent>cm:content</parent>
            <properties>
                <!--<property name="lecm-orgstr:position-description">
                    <title>Description</title>
                    <type>d:any</type>
                </property>-->
                <property name="lecm-orgstr:position-name-g">
                    <title>Name in genitive</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:position-name-d">
                    <title>Name in dative</title>
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <!-- Офис организации -->
        <type name="lecm-orgstr:office">
            <title>Office</title>
            <parent>cm:content</parent>
            <properties>
                <property name="lecm-orgstr:office-short-name">
                    <title>Short Name</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:office-phone">
                    <title>Phone</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:office-fax">
                    <title>Fax</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:office-address">
                    <title>Address</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
                <property name="lecm-orgstr:office-transit-scheme">
                    <title>Transit Scheme</title>
                    <type>d:any</type>
                </property>
            </properties>
        </type>

       <!-- Персональные данные -->
        <type name="lecm-orgstr:personal-data">
            <title>Personal Data</title>
            <parent>cm:content</parent>
            <properties>
                <property name="lecm-orgstr:person-data-address">
                    <title>Person Address</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:person-data-email">
                    <title>Person E-Mail</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:person-data-phone">
                    <title>Person Phone</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:person-data-date">
                    <title>Person Birthday</title>
                    <type>d:date</type>
                </property>
                <property name="lecm-orgstr:person-data-service-id">
                    <title>Person Messaging service ID</title>
                    <type>d:text</type>
                </property>
            </properties>
        </type>

        <!-- Проект -->
        <type name="lecm-orgstr:project">
            <title>Project</title>
            <parent>lecm-orgstr:organization-element</parent>
            <properties>
                <property name="lecm-orgstr:project-target">
                    <title>Project Targets</title>
                    <type>d:text</type>
                </property>
                <property name="lecm-orgstr:project-schedule">
                    <title>Project schedule</title>
                    <type>d:text</type>
                </property>
            </properties>
            <associations>
                <!-- Список участников проекта -->
                <association name="lecm-orgstr:project-workforce-assoc">
                    <source>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:workforce</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
            </associations>
        </type>

        <!-- Участник (трудовой ресурс) -->
        <type name="lecm-orgstr:workforce">
            <title>Workforce</title>
            <parent>lecm-orgstr:project-resource</parent>
            <properties>
                <property name="lecm-orgstr:workforce-role">
                    <title>Role</title>
                    <type>d:text</type>
                    <mandatory>true</mandatory>
                </property>
            </properties>
            <associations>
                <!-- Ссылка на сотрудника -->
                <association name="lecm-orgstr:workforce-employee-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:employee</class>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </type>

        <!-- Состав подразделения -->
        <type name="lecm-orgstr:unit-composition">
            <title>Unit Composition</title>
            <parent>cm:content</parent>
            <properties>
                <property name="lecm-orgstr:composition-is-boss">
                    <title>Employee Is Boss</title>
                    <type>d:boolean</type>
                    <default>false</default>
                </property>
                <property name="lecm-orgstr:composition-is-primary">
                    <title>Composition Is Primary</title>
                    <type>d:boolean</type>
                    <default>false</default>
                </property>
            </properties>
            <associations>
                <!-- Ссылка на должность -->
                <association name="lecm-orgstr:composition-position-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:position</class>
                        <mandatory>true</mandatory>
                        <many>false</many>
                    </target>
                </association>

                <!-- Ссылка на сотрудника -->
                <association name="lecm-orgstr:composition-employee-assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstr:employee</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </type>
    </types>
</model>