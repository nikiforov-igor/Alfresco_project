<alfresco-config>
    <config>
        <forms>
            <default-controls>
                <type name="association:lecm-doc-dic-dt:documentType" template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
                    <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Вид_x0020_документа</control-param>
                    <control-param name="plane">false</control-param>
                    <control-param name="checkType">false</control-param>
                    <control-param name="treeItemType">lecm-doc-dic-dt:typeDictionary</control-param>
                    <control-param name="additionalFilter">ISNOTNULL:\"sys:node-dbid\"</control-param>
                </type>
            </default-controls>
        </forms>
    </config>

	<config evaluator="node-type" condition="lecm-eds-globset:potential-role">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-eds-globset:potential-role-business-role-assoc" force="true"/>
					<show id="lecm-eds-globset:potential-role-employee-assoc" force="true"/>
					<show id="lecm-eds-globset:potential-role-organization-element-assoc" force="true"/>
				</field-visibility>
				<appearance>
					<field id="lecm-eds-globset:potential-role-business-role-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Бизнес_x0020_роли</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="plane">true</control-param>
						</control>
					</field>
					<field id="lecm-eds-globset:potential-role-organization-element-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="plane">false</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="showPath">false</control-param>
							<control-param name="showSearch">false</control-param>
							<control-param name="checkType">false</control-param>
							<control-param name="endpointType">lecm-orgstr:organization-unit</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>
	<config evaluator="model-type" condition="lecm-eds-globset:potential-role">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-eds-globset:potential-role-business-role-assoc" force="true"/>
					<show id="lecm-eds-globset:potential-role-employee-assoc" force="true"/>
					<show id="lecm-eds-globset:potential-role-organization-element-assoc" force="true"/>
				</field-visibility>
				<appearance>
					<field id="lecm-eds-globset:potential-role-business-role-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Бизнес_x0020_роли</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="plane">true</control-param>
						</control>
					</field>
					<field id="lecm-eds-globset:potential-role-organization-element-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="endpointType">lecm-orgstr:organization-unit</control-param>
							<control-param name="plane">false</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="showSelectedItemsPath">false</control-param>
							<control-param name="showSearch">false</control-param>
							<control-param name="checkType">false</control-param>
`						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-eds-globset:settings">
		<forms>
			<form>
				<field-visibility>
                    <show id="lecm-eds-globset:centralized-registration"/>
					<show id="lecm-eds-globset:duty-registrar-assoc"/>
                    <show id="lecm-eds-globset:arm-for-dashlet-assoc"/>
				    <show id="lecm-eds-globset:arm-node-for-dashlet-assoc"/>
					<show id="lecm-eds-globset:allow-signing-on-paper"/>
				</field-visibility>
				<appearance>
					<field id="lecm-eds-globset:centralized-registration" label-id="label.centralized-registration">
						<control template="/ru/it/lecm/eds/global-settings/components/controls/potential-role-tree-picker.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="treeItemType">lecm-orgstr:organization-unit</control-param>
							<control-param name="showSearch">false</control-param>
							<control-param name="businessRoleId">DA_REGISTRARS</control-param>
							<control-param name="forceEditable">true</control-param>
							<control-param name="employeesLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name}</control-param>
							<control-param name="selectedItemsNameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name}, {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}, {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
						</control>
					</field>
					<field id="lecm-eds-globset:duty-registrar-assoc">
						<control>
							<control-param name="allowedNodesScript"><![CDATA[lecm/orgstructure/employees/allowed?businessRoleId=DA_REGISTRARS&includeAdmin=true]]></control-param>
							<control-param name="useStrictFilterByOrg">false</control-param>
						</control>
					</field>
				    <field id="lecm-eds-globset:arm-for-dashlet-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_АРМ/lecm-dic:Настройки_x0020_АРМ</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="primaryCascading">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-eds-globset:arm-node-for-dashlet-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-cascading-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_АРМ/lecm-dic:Настройки_x0020_АРМ/cm:АРМ_x0020_СЭД</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="slaveCascading">true</control-param>
                            <control-param name="dependentFieldName">lecm-eds-globset:arm-for-dashlet-assoc</control-param>
                            <control-param name="dependentFieldArgKey">armRef</control-param>
                            <control-param name="webScriptUrl">lecm/arm/root-nodes/forDashlet</control-param>
                            <control-param name="defaultLoadData">false</control-param>
                        </control>
                    </field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-eds-globset:settings">
		<forms>
			<form>
				<field-visibility>
                    <show id="lecm-eds-globset:centralized-registration"/>
					<show id="lecm-eds-globset:duty-registrar-assoc"/>
					<show id="lecm-eds-globset:arm-for-dashlet-assoc"/>
					<show id="lecm-eds-globset:arm-node-for-dashlet-assoc"/>
					<show id="lecm-eds-globset:allow-signing-on-paper"/>
				</field-visibility>
				<appearance>
					<field id="lecm-eds-globset:centralized-registration" label-id="label.centralized-registration">
						<control template="/ru/it/lecm/eds/global-settings/components/controls/potential-role-tree-picker.ftl">
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Структура/cm:Холдинг</control-param>
							<control-param name="treeItemType">lecm-orgstr:organization-unit</control-param>
							<control-param name="showSearch">false</control-param>
							<control-param name="businessRoleId">DA_REGISTRARS</control-param>
							<control-param name="forceEditable">true</control-param>
							<control-param name="employeesLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name}</control-param>
							<control-param name="selectedItemsNameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name}, {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}, {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
						</control>
					</field>
					<field id="lecm-eds-globset:duty-registrar-assoc">
						<control>
							<control-param name="allowedNodesScript"><![CDATA[lecm/orgstructure/employees/allowed?businessRoleId=DA_REGISTRARS&includeAdmin=true]]></control-param>
							<control-param name="defaultValueDataSource">lecm/orgstructure/api/getEmployee?login=admin</control-param>
						</control>
					</field>
                    <field id="lecm-eds-globset:arm-for-dashlet-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_АРМ/lecm-dic:Настройки_x0020_АРМ</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="primaryCascading">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-eds-globset:arm-node-for-dashlet-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-cascading-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_АРМ/lecm-dic:Настройки_x0020_АРМ</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="slaveCascading">true</control-param>
                            <control-param name="dependentFieldName">lecm-eds-globset:arm-for-dashlet-assoc</control-param>
                            <control-param name="dependentFieldArgKey">armRef</control-param>
                            <control-param name="webScriptUrl">lecm/arm/root-nodes/forDashlet</control-param>
                            <control-param name="defaultLoadData">false</control-param>
                        </control>
                    </field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-eds-document:base">
		<forms>
			<form id="searchQueryGrid">
				<field-visibility>
					<show id="lecm-eds-document:document-type-assoc"/>
					<show id="lecm-eds-document:summaryContent"/>
					<show id="lecm-document-aspects:reg-data-number"/>
					<show id="lecm-document-aspects:reg-data-date"/>
					<show id="lecm-statemachine:status" force="true"/>
				</field-visibility>
			</form>
			<form id="search-editor-fields">
				<field-visibility>
					<show id="lecm-eds-document:note"/>
					<show id="lecm-eds-document:summaryContent"/>
					<show id="lecm-document-aspects:reg-data-number"/>
					<show id="lecm-document-aspects:reg-data-date"/>
					<show id="lecm-eds-document:sheets-number"/>
					<show id="lecm-eds-document:document-type-assoc"/>
					<show id="lecm-eds-document:file-register-assoc"/>
					<show id="lecm-document-aspects:reg-data-is-registered"/>
					<show id="lecm-document-aspects:reg-project-data-number"/>
					<show id="lecm-document-aspects:reg-project-data-date"/>
					<show id="lecm-document:doc-type"/>
					<show id="lecm-document:title"/>
					<show id="lecm-document:regnum"/>
					<show id="lecm-document:present-string"/>
					<show id="lecm-document:doc-date"/>
					<show id="lecm-statemachine:status" force="true"/>
					<show id="lecm-document:subject-assoc"/>
					<show id="lecm-document:author-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:present-string" label="Название"/>
				</appearance>
			</form>
			<form id="searchColumns">
				<field-visibility>
					<show id="lecm-document:present-string"/>
					<show id="lecm-document:ext-present-string"/>
					<show id="lecm-document:list-present-string"/>
					<show id="lecm-document:ml-present-string"/>
					<show id="lecm-document:ml-ext-present-string"/>
					<show id="lecm-document:ml-list-present-string"/>

					<show id="lecm-document:doc-type"/>
					<show id="lecm-document:regnum"/>
					<show id="lecm-eds-document:summaryContent"/>
					<show id="lecm-eds-document:note"/>
					<show id="lecm-document:title"/>

					<show id="lecm-document:subject-assoc-text-content"/>
					<show id="lecm-eds-document:document-type-assoc-text-content"/>
					<show id="lecm-document:author-assoc-text-content"/>
					<show id="lecm-document-aspects:registrator-assoc-text-content"/>
					<show id="lecm-eds-document:reviewers-assoc-text-content"/>
				</field-visibility>
			</form>
			<!-- Форма атрибутивного поиска-->
			<form id="search">
				<field-visibility>
					<show id="lecm-document:regnum"/>
					<show id="cm:created"/>
					<show id="lecm-document:doc-date"/>
					<show id="lecm-eds-document:document-type-assoc"/>
					<show id="lecm-eds-document:summaryContent"/>
					<show id="lecm-document:title"/>
					<show id="lecm-internal:response-date"/>
					<show id="lecm-document:author-assoc"/>
					<show id="lecm-document:subject-assoc"/>
				</field-visibility>
				<appearance>
					<field id="cm:created">
						<control template="/ru/it/lecm/base-share/components/controls/daterange-control.ftl">
							<control-param name="forceEditable">true</control-param>
						</control>

					</field>
					<field id="lecm-document:doc-date" label="Дата документа">
						<control template="/ru/it/lecm/base-share/components/controls/daterange-control.ftl"/>
					</field>
					<field id="lecm-eds-document:document-type-assoc">
						<control>
							<control-param name="endpointMany">true</control-param>
						</control>
					</field>
					<field id="lecm-eds-document:summaryContent">
						<control template="/ru/it/lecm/base-share/components/controls/textarea.ftl">
							<control-param name="rows">4</control-param>
						</control>
					</field>
					<field id="lecm-document:title">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-document:author-assoc" label-id="label.creator">
						<control>
							<control-param name="endpointMany">true</control-param>
						</control>
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
						</constraint-handlers>
					</field>
					<field id="lecm-document:subject-assoc">
						<control>
							<control-param name="plane">true</control-param>
							<control-param name="endpointMany">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="model-type" condition="lecm-document:base">
        <forms>
            <!-- Форма атрибутивного поиска-->
            <form id="search">
                <field-visibility>
                    <show id="lecm-document:regnum"/>
                    <show id="cm:created"/>
                    <show id="lecm-document:doc-date"/>
                    <show id="lecm-eds-document:document-type-assoc" force="true"/>
                    <show id="lecm-eds-document:summaryContent" force="true"/>
                    <show id="lecm-document:title"/>
                    <show id="lecm-internal:response-date" force="true"/>
                    <show id="lecm-document:author-assoc"/>
                    <show id="lecm-document:subject-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="cm:created">
                        <control template="/ru/it/lecm/base-share/components/controls/daterange-control.ftl">
                            <control-param name="forceEditable">true</control-param>
                        </control>

                    </field>
                    <field id="lecm-document:doc-date" label="Дата документа">
                        <control template="/ru/it/lecm/base-share/components/controls/daterange-control.ftl"/>
                    </field>
                    <field id="lecm-eds-document:document-type-assoc">
                        <control>
                            <control-param name="endpointMany">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-eds-document:summaryContent">
                        <control template="/ru/it/lecm/base-share/components/controls/textarea.ftl">
                            <control-param name="rows">4</control-param>
                        </control>
                    </field>
                    <field id="lecm-document:title">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-document:author-assoc" label-id="label.creator">
                        <control>
                            <control-param name="endpointMany">true</control-param>
                        </control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-document:subject-assoc">
                        <control>
                            <control-param name="plane">true</control-param>
                            <control-param name="endpointMany">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-doc-dic-dt:typeDictionary">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" force="true"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-doc-dic-dt:typeDictionary">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" force="true"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-doc-dic-dt:documentType">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" force="true"/>
                    <show id="lecm-doc-dic-dt:documentType-code" force="true"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-doc-dic-dt:documentType">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" force="true"/>
                    <show id="lecm-doc-dic-dt:documentType-code" force="true"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name" force="true"/>
                    <show id="lecm-doc-dic-dt:documentType-code" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-doc-dic-dt:documentType-code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

	<config evaluator="model-type" condition="lecm-eds-globset:terms-of-notification-settings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-eds-globset:short-limit-days"/>
					<show id="lecm-eds-globset:short-n-days"/>
					<show id="lecm-eds-globset:n-days"/>
				</field-visibility>
				<appearance>
					<set id="notifications-term-about-execution" appearance="fieldset" label-id="label.notifications-term-about-execution"/>
					<field id="lecm-eds-globset:short-n-days" set="notifications-term-about-execution"/>
					<field id="lecm-eds-globset:n-days" set="notifications-term-about-execution"/>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-eds-globset:terms-of-notification-settings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-eds-globset:short-limit-days"/>
					<show id="lecm-eds-globset:short-n-days"/>
					<show id="lecm-eds-globset:n-days"/>
				</field-visibility>
				<appearance>
					<set id="notifications-term-about-execution" appearance="fieldset" label-id="label.notifications-term-about-execution"/>
					<field id="lecm-eds-globset:short-n-days" set="notifications-term-about-execution"/>
					<field id="lecm-eds-globset:n-days" set="notifications-term-about-execution"/>
				</appearance>
			</form>
		</forms>
	</config>
</alfresco-config>
