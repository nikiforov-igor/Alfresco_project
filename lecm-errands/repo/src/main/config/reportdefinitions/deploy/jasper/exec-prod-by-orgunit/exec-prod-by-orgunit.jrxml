<?xml version="1.0" encoding="UTF-8"?>
<jasperReport 
			xmlns="http://jasperreports.sourceforge.net/jasperreports" 
			xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
			xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports 
			http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
			name="exec-prod-by-orgunit" 
			pageWidth="842" pageHeight="595" orientation="Landscape" 
			whenNoDataType="AllSectionsNoDetail" 
			columnWidth="802"
			leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" 
			isFloatColumnFooter="true" 
			whenResourceMissingType="Key" 
			uuid="28e61b22-f23c-49c3-ba14-4928c3b8793a">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="34"/>
	<property name="dataSource" value="ru.it.lecm.reports.generators.errands.ErrandsProductionsGraphDSProvider"/>
	<style name="styleOdd" mode="Opaque" backcolor="#FFFFFF">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2 == 0]]></conditionExpression>
			<style backcolor="#DCDCDC"/>
		</conditionalStyle>
	</style>

	<parameter name="CMIS_XMLCONFIG" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["ds-exec-prod-by-orgunit.xml"]]></defaultValueExpression>
	</parameter>

	<queryString> <![CDATA[]]> </queryString>


<!--
	<field name="Col_Param_Person" class="java.lang.String">
		<fieldDescription><![CDATA[Исполнитель (сотрудник)]]></fieldDescription>
	</field>
	<field name="Col_Param_Exec_OrgUnit" class="java.lang.String">
		<fieldDescription><![CDATA[Подразделение исполнителя]]></fieldDescription>
	</field>
  -->

	<field name="Col_GroupBy" class="java.lang.String">
		<fieldDescription><![CDATA[Способ группировки]]></fieldDescription>
	</field>

	<!-- В зависимости от типа группировки, здесь будет либо Исполнитель, либо Подразделение -->
	<field name="Col_NameTag" class="java.lang.String">
		<fieldDescription><![CDATA[Подразделение]]></fieldDescription>
	</field>

	<field name="Col_Period" class="java.util.Date">
		<fieldDescription><![CDATA[Период с-по]]></fieldDescription>
	</field>

	<field name="Col_DateTime" class="java.sql.Timestamp">
		<fieldDescription><![CDATA[Время]]></fieldDescription>
	</field>

	<field name="Col_Avg_Execution.Value" class="java.lang.Float">
		<fieldDescription><![CDATA[Ср время исполнения]]></fieldDescription>
	</field>

	<field name="Col_Avg_Execution.Units" class="java.lang.String">
		<fieldDescription><![CDATA[Ед измерения значения ср времени]]></fieldDescription>
	</field>
	
	
	<background>
		<band splitType="Stretch"/>
	</background>

	<title>
		<band height="24" splitType="Stretch">
			<staticText>
				<reportElement uuid="85bf28f5-7b1d-49a7-b2d0-e31f2a45de0c" stretchType="RelativeToBandHeight" x="0" y="0" width="801" height="24"/>
				<textElement textAlignment="Center">
					<font fontName="DejaVu Sans" size="20" isBold="true" pdfEncoding="Cp1251" isPdfEmbedded="true"/>
				</textElement>
				<text><![CDATA[Продуктивность Подразделений]]></text>
			</staticText>
		</band>
	</title>

	<pageHeader>
		<band height="16" splitType="Prevent">
			<textField>
				<reportElement uuid="6df5d2b4-b246-429d-a894-8f1f1d716bbf" x="0" y="0" width="120" height="15">
						<printWhenExpression><![CDATA[$V{PAGE_NUMBER} > 1]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Left">
					<font fontName="DejaVu Serif" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA["Стр "+$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>

	<columnHeader>
		<band height="1" splitType="Stretch"/>
	</columnHeader>
<!--
	<detail>
		<band height="1" splitType="Stretch"/>
	</detail>

	<columnFooter>
		<band height="1" splitType="Stretch"/>
	</columnFooter>

	<pageFooter>
		<band height="1" splitType="Stretch"/>
	</pageFooter>
  -->
	<summary>
		<band height="470" splitType="Prevent">
			<textField>
				<reportElement uuid="0a743bbe-639f-4ba8-a41d-dd0f2a1c4949" x="20" y="40" width="750" height="25" forecolor="#FF0000">
						<printWhenExpression><![CDATA[$V{REPORT_COUNT} < 1]]></printWhenExpression>
				</reportElement>
				<textElement textAlignment="Center">
					<font fontName="DejaVu Sans" size="14" isBold="true" pdfEncoding="Cp1251"/>
				</textElement>
				<textFieldExpression><![CDATA[ "Нет данных, удовлетворяющих выборке" ]]></textFieldExpression>
			</textField>
			<timeSeriesChart>
				<chart isShowLegend="true" evaluationTime="Report">
					<reportElement uuid="636e3559-83d4-4bf1-80b8-ce330e9f2dc8" x="35" y="0" width="745" height="460">
						<printWhenExpression><![CDATA[$V{REPORT_COUNT} > 0]]></printWhenExpression>
					</reportElement>
					<chartTitle/>
					<chartSubtitle/>
					<chartLegend position="Top"/>
				</chart>
				<timeSeriesDataset timePeriod="Day">
					<timeSeries>
						<seriesExpression><![CDATA[$F{Col_NameTag}]]></seriesExpression>
						<timePeriodExpression><![CDATA[$F{Col_DateTime}]]></timePeriodExpression>
						<valueExpression><![CDATA[$F{Col_Avg_Execution.Value}]]></valueExpression>
					</timeSeries>
				</timeSeriesDataset>
				<timeSeriesPlot isShowLines="true" isShowShapes="true">
					<plot/>
					<timeAxisLabelExpression><![CDATA["Дата закрытия"]]></timeAxisLabelExpression>
					<timeAxisFormat>
						<axisFormat tickLabelMask="dd/MM/yyyy hh:mm" verticalTickLabels="false"/>
					</timeAxisFormat>
					<valueAxisLabelExpression><![CDATA["Ср время исполнения поручений, ч"]]></valueAxisLabelExpression>
					<valueAxisFormat>
						<axisFormat tickLabelMask="#,##0.00"/>
					</valueAxisFormat>
				</timeSeriesPlot>
			</timeSeriesChart>
		</band>
	</summary>
</jasperReport>
