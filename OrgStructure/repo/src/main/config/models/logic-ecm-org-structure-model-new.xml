<?xml version="1.0" encoding="UTF-8"?>

<model name="lecm-orgstructure:organizationStructure" xmlns="http://www.alfresco.org/model/dictionary/1.0">

    <imports>
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d"/>
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm"/>
        <import uri="http://www.alfresco.org/model/system/1.0" prefix="sys"/>
    </imports>

    <namespaces>
        <namespace uri="http://www.it.ru/lecm/orgstructure/1.0" prefix="lecm-orgstructure"/>
    </namespaces>


    <types>

        <!--
            Описание модели организации
        -->
        <type  name="lecm-orgstructure:organization">
            <title>Organization</title>
            <parent>cm:folder</parent>
            <associations>
                <!--
                    Связь со структурными подразделениями
                -->
                <child-association name="lecm-orgstructure:organization_unit_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:organization_unit</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!--
            Структурное подразделение
        -->
        <type name="lecm-orgstructure:organization_unit">
            <title>Organization Unit</title>
            <parent>cm:folder</parent>
            <associations>
                <!--
                    Связь с офисами подразделения
                -->
                <association name="lecm-orgstructure:office_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:office</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </association>
                <!--
                    Связь с подструктурными подразделениями
                -->
                <child-association name="lecm-orgstructure:organization_unit_inner_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:organization_unit</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
                <!--
                    Связь с сотрудниками подразделения
                -->
                <child-association name="lecm-orgstructure:employee_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:employee</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!--
            Сотрудник организации
        -->
        <type name="lecm-orgstructure:employee">
            <title>Еmployee</title>
            <parent>cm:cmobject</parent>
            <associations>
                <!--
                    Связь с учетной записью в системе
                -->
                <association name="lecm-orgstructure:person_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>cm:person</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
                <!--
                    Рабочее место сотрудника
                -->
                <association name="lecm-orgstructure:employee_workplace_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:workplace</class>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </target>
                </association>
            </associations>
        </type>

        <!--
            Офис организации
        -->
        <type name="lecm-orgstructure:office">
            <title>Office</title>
            <parent>cm:folder</parent>
            <associations>
                <!--
                    Связь с помещениями
                -->
                <child-association name="lecm-orgstructure:room_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:room</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!--
            Помещение в офисе
        -->
        <type name="lecm-orgstructure:room">
            <title>Room</title>
            <parent>cm:folder</parent>
        </type>

        <!--
            Рабочее помещение
        -->
        <type name="lecm-orgstructure:workroom">
            <title>Workroom</title>
            <parent>lecm-orgstructure:room</parent>
            <associations>
                <!--
                    Связь с рабочими местами
                -->
                <child-association name="lecm-orgstructure:workplace_assoc">
                    <source>
                        <mandatory>false</mandatory>
                        <many>false</many>
                    </source>
                    <target>
                        <class>lecm-orgstructure:workplace</class>
                        <mandatory>false</mandatory>
                        <many>true</many>
                    </target>
                </child-association>
            </associations>
        </type>

        <!--
            Рабочее место
        -->
        <type name="lecm-orgstructure:workplace">
            <title>Workplace</title>
            <parent>cm:cmobject</parent>
        </type>

        <!--
            Комната для совещаний
        -->
        <type name="lecm-orgstructure:meetingroom">
            <title>Meeting Room</title>
            <parent>cm:cmobject</parent>
        </type>

    </types>

</model>