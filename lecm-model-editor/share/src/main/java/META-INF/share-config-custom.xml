<alfresco-config>
	<config>
		<forms>
			<dependencies>
				<js src="/scripts/lecm-forms-editor/lecm-model-name-validator.js" />
			</dependencies>
		</forms>
	</config>

	<config evaluator="node-type" condition="cm:dictionaryModel">
		<forms>
			<form id="edit-model">
				<field-visibility>
					<show id="cm:modelActive" />
					<show id="cm:content" />
					<show id="prop_cm_lecmModelDescription" />
					<show id="prop_cm_lecmTypeTitle" />
					<show id="prop_cm_lecmParentRef" />
					<show id="prop_cm_lecmPresentString" />
					<show id="prop_cm_lecmArmUrl" />
					<show id="prop_cm_lecmCreateUrl" />
					<show id="prop_cm_lecmViewUrl" />
					<show id="prop_cm_lecmAuthorProperty" />
					<show id="prop_cm_lecmRegNumbersProperties" />
					<show id="prop_cm_lecmRating" />
					<show id="prop_cm_lecmSigned" />
					<show id="cm:lecmModelCategories"/>
					<show id="cm:lecmModelAttributes"/>
					<show id="cm:lecmModelAssociations"/>
					<show id="cm:lecmModelTables"/>
				</field-visibility>
				<appearance>
					<set id="parameters"/>
					<set id="datatables"/>

					<field id="cm:modelActive" set="parameters" />
					<field id="cm:content" set="parameters">
						<!--<control template="/ru/it/lecm/controls/model-editor.ftl" />-->
						<control template="/ru/it/lecm/controls/content.ftl" />
					</field>
					<field id="prop_cm_lecmModelDescription" set="parameters" label-id="lecm.meditor.lbl.model.desc">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmTypeTitle" set="parameters" label-id="lecm.meditor.lbl.doc.desc">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmParentRef" set="parameters" label-id="lecm.meditor.lbl.parent.doc">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl">
							<control-param name="options">lecm-document:base|LECM BASE,lecm-eds-document:base|LECM EDS BASE</control-param>
						</control>
					</field>
					<field id="prop_cm_lecmPresentString" set="parameters" label-id="lecm.meditor.lbl.templ.pres.string">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmArmUrl" set="parameters" label-id="lecm.meditor.lbl.docs.list.page">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmCreateUrl" set="parameters" label-id="lecm.meditor.lbl.docs.create.page">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmViewUrl" set="parameters" label-id="lecm.meditor.lbl.docs.view.page">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmAuthorProperty" set="parameters" label-id="lecm.meditor.lbl.author">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmRegNumbersProperties" set="parameters" label-id="lecm.meditor.lbl.reg.numbers">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmRating" set="parameters" label-id="lecm.meditor.lbl.rating">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl">
							<control-param name="options">true|Да,false|Нет</control-param>
						</control>
					</field>
					<field id="prop_cm_lecmSigned" set="parameters" label-id="lecm.meditor.lbl.take.part.edi">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl">
							<control-param name="options">true|Да,false|Нет</control-param>
						</control>
					</field>
					<field id="cm:lecmModelCategories" set="datatables" label-id="lecm.meditor.lbl.attachs.categors">
						<control template="/ru/it/lecm/controls/categories-datatable.ftl"/>
					</field>
					<field id="cm:lecmModelAttributes" set="datatables" label-id="lecm.meditor.lbl.attrs">
						<control template="/ru/it/lecm/controls/attributes-datatable.ftl"/>
					</field>
					<field id="cm:lecmModelAssociations" set="datatables" label-id="lecm.meditor.lbl.assocs">
						<control template="/ru/it/lecm/controls/associations-datatable.ftl"/>
					</field>
					<field id="cm:lecmModelTables" set="datatables" label-id="lecm.meditor.lbl.tables">
						<control template="/ru/it/lecm/controls/tables-datatable.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="cm:dictionaryModel">
		<forms>
			<form id="create-model">
				<edit-form template="/fdk/templates/2-column-edit-form.ftl" />
				<field-visibility>
					<show id="cm:name" />
					<show id="cm:modelActive" />
					<show id="cm:content" />
					<show id="prop_cm_lecmModelDescription" />
					<show id="prop_cm_lecmTypeTitle" />
					<show id="prop_cm_lecmParentRef" />
					<show id="prop_cm_lecmPresentString" />
					<show id="prop_cm_lecmArmUrl" />
					<show id="prop_cm_lecmCreateUrl" />
					<show id="prop_cm_lecmViewUrl" />
					<show id="prop_cm_lecmAuthorProperty" />
					<show id="prop_cm_lecmRegNumbersProperties" />
					<show id="prop_cm_lecmRating" />
					<show id="prop_cm_lecmSigned" />
					<show id="cm:lecmModelCategories"/>
					<show id="cm:lecmModelAttributes"/>
					<show id="cm:lecmModelAssociations"/>
					<show id="cm:lecmModelTables"/>
				</field-visibility>
				<appearance>
					<set id="parameters"/>
					<set id="datatables"/>
					<field id="cm:name" set="parameters">
						<constraint-handlers>
							<constraint type="REGEX" validation-handler="LogicECM.module.modelNameValidation" message-id="lecm.meditor.msg.invalid.model.name" event="keyup"/>
						</constraint-handlers>
					</field>
					<field id="cm:modelActive" set="parameters" />
					<field id="cm:content" set="parameters">
						<!--<control template="/ru/it/lecm/controls/model-editor.ftl" />-->
						<control template="/ru/it/lecm/controls/content.ftl" />
					</field>
					<field id="prop_cm_lecmModelDescription" set="parameters" label-id="lecm.meditor.lbl.model.desc">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmTypeTitle" set="parameters" label-id="lecm.meditor.lbl.doc.desc">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmParentRef" set="parameters" label-id="lecm.meditor.lbl.parent.doc">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl">
							<control-param name="options">lecm-document:base|LECM BASE,lecm-eds-document:base|LECM EDS BASE</control-param>
						</control>
					</field>
					<field id="prop_cm_lecmPresentString" set="parameters" label-id="lecm.meditor.lbl.templ.pres.string">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmArmUrl" set="parameters" label-id="lecm.meditor.lbl.docs.list.page">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmCreateUrl" set="parameters" label-id="lecm.meditor.lbl.docs.create.page">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmViewUrl" set="parameters" label-id="lecm.meditor.lbl.docs.view.page">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmAuthorProperty" set="parameters" label-id="lecm.meditor.lbl.author">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmRegNumbersProperties" set="parameters" label-id="lecm.meditor.lbl.reg.numbers">
						<control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
					</field>
					<field id="prop_cm_lecmRating" set="parameters" label-id="lecm.meditor.lbl.rating">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl">
							<control-param name="options">true|Да,false|Нет</control-param>
						</control>
					</field>
					<field id="prop_cm_lecmSigned" set="parameters" label-id="lecm.meditor.lbl.take.part.edi">
						<control template="/ru/it/lecm/base-share/components/controls/selectone.ftl">
							<control-param name="options">true|Да,false|Нет</control-param>
						</control>
					</field>
					<field id="cm:lecmModelCategories" set="datatables" label-id="lecm.meditor.lbl.attachs.categors">
						<control template="/ru/it/lecm/controls/categories-datatable.ftl"/>
					</field>
					<field id="cm:lecmModelAttributes" set="datatables" label-id="lecm.meditor.lbl.attrs">
						<control template="/ru/it/lecm/controls/attributes-datatable.ftl"/>
					</field>
					<field id="cm:lecmModelAssociations" set="datatables" label-id="lecm.meditor.lbl.assocs">
						<control template="/ru/it/lecm/controls/associations-datatable.ftl"/>
					</field>
					<field id="cm:lecmModelTables" set="datatables" label-id="lecm.meditor.lbl.tables">
						<control template="/ru/it/lecm/controls/tables-datatable.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

</alfresco-config>
