<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:p="http://www.springframework.org/schema/p"
	   xmlns:util="http://www.springframework.org/schema/util"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
						   http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">

	<util:list id="orgstructure.export-import.models">
		<value>alfresco/module/${artifactId}/models/orgstructure-export-import-model.xml</value>
	</util:list>
	<bean id="orgstructure.export-import.model.bootstrap" parent="dictionaryModelBootstrap"
		  depends-on="dictionaryBootstrap"
		  p:models-ref="orgstructure.export-import.models" />

	<bean id="orgstructure.export-import.import.service" parent="baseBean"
		  init-method="init"
		  depends-on="orgstructure.export-import.model.bootstrap"
		  class="ru.it.lecm.orgstructure.exportimport.beans.OrgstructureImportServiceImpl"
		  p:businessJournalService-ref="businessJournalService"
		  p:orgstructureService-ref="serviceOrgstructure"
		  p:dictionaryService-ref="serviceDictionary"
		  p:personService-ref="personService"
		  p:searchService-ref="searchService"
		  p:namespaceService-ref="namespaceService"
		  p:contractorsDictionaryName="${lecm.orgstructure.export-import.dictionary.contractors}"
	/>

	<bean id="orgstructure.export-import.export.service" parent="baseBean"
		  init-method="init"
		  depends-on="orgstructure.export-import.model.bootstrap"
		  class="ru.it.lecm.orgstructure.exportimport.beans.OrgstructureExportServiceImpl"
		  p:orgstructureService-ref="serviceOrgstructure"
		  p:searchService-ref="searchService"
		  p:namespaceService-ref="namespaceService"
	/>

	<bean id="orgstructure.export-import.thread.pool" class="org.alfresco.util.ThreadPoolExecutorFactoryBean"
		  p:poolName="orgstructureExportImportThreadPool"
		  p:corePoolSize="1"
		  p:maximumPoolSize="20"
	/>

	<bean id="webscript.ru.it.lecm.orgstructure.import.ImportOrgstructureXML.post"
		  class="ru.it.lecm.orgstructure.exportimport.webscripts.ImportOrgstructureXML" parent="webscript"
		  p:orgstructureImportService-ref="orgstructure.export-import.import.service"
		  p:threadPoolExecutor-ref="orgstructure.export-import.thread.pool"
	/>

	<bean id="webscript.ru.it.lecm.orgstructure.export.ExportOrgstructureXML.get"
		  class="ru.it.lecm.orgstructure.exportimport.webscripts.ExportOrgstructureXML" parent="webscript"
		  p:orgstructureExportService-ref="orgstructure.export-import.export.service"
	/>
</beans>
