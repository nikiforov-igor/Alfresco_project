<?xml version="1.0" encoding="UTF-8"?>
<alfresco-config>
    <config>
        <forms>
            <default-controls>
                <type name="association:lecm-contractor:contractor-type" template="/ru/it/lecm/base-share/components/controls/association-complex-control.ftl">
                    <control-param name="changeItemsFireAction">contractor.selected</control-param>
                    <control-param name="items">contractor,organisation,person</control-param>
                    <control-param name="showAutocomplete">true</control-param>
                    <control-param name="autocompleteDataSource">lecm/complex/picker</control-param>
                    <control-param name="cssClasses">with-ex-search</control-param>
                    <control-param name="extendScripts">scripts/contractors/contractors-ex-search-script.js</control-param>
                    <!-- lecm-contractor:contractor-type -->
                    <control-param name="contractor_label">Внешний контрагент</control-param>
                    <control-param name="contractor_endpointType">lecm-contractor:contractor-type</control-param>
                    <control-param name="contractor_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты</control-param>
                    <control-param name="contractor_nameSubstituteString">{lecm-contractor:shortname}</control-param>
                    <control-param name="contractor_treeNodeSubstituteString">{lecm-contractor:shortname}</control-param>
                    <control-param name="contractor_treeNodeTitleSubstituteString">{lecm-contractor:shortname}</control-param>
                    <control-param name="contractor_selectedItemsNameSubstituteString">{lecm-contractor:shortname}&lt;div class="control-small-font"&gt;{lecm-contractor:postal-code}, {lecm-contractor:physical-address}&lt;/div&gt;</control-param>
                    <control-param name="contractor_plane">true</control-param>
                    <control-param name="contractor_showSearch">false</control-param>
                    <control-param name="contractor_showExSearch">true</control-param>
                    <control-param name="contractor_showCreateNewLink">true</control-param>
                    <control-param name="contractor_fillFormFromSearch">true</control-param>
                    <control-param name="contractor_pickerItemsScript">lecm/contractors/common/picker/items</control-param>
                    <control-param name="contractor_additionalFilter">NOT ASPECT:\"lecm-orgstr-aspects:is-organization-aspect\"</control-param>
                    <control-param name="contractor_showAssocViewForm">true</control-param>
                    <control-param name="contractor_sortProp">lecm-contractor:shortname</control-param>
                    <control-param name="contractor_hasNoAspects">lecm-orgstr-aspects:is-organization-aspect</control-param>
                    <control-param name="contractor_getExtSearchQuery">LogicECM.getExtQueryForContractor</control-param>
                    <control-param name="contractor_getArgumentsFromForm">LogicECM.getExtArgsForContractor</control-param>
                    <control-param name="contractor_createNewItemSubmit">LogicECM.checkDuplicatesForContractor</control-param>
                    <!-- lecm-contractor:contractor-type -->
                    <control-param name="organisation_label">Внутренний контрагент</control-param>
                    <control-param name="organisation_endpointType">lecm-contractor:contractor-type</control-param>
                    <control-param name="organisation_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты</control-param>
                    <control-param name="organisation_nameSubstituteString">{lecm-contractor:shortname}</control-param>
                    <control-param name="organisation_treeNodeSubstituteString">{lecm-contractor:shortname}</control-param>
                    <control-param name="organisation_treeNodeTitleSubstituteString">{lecm-contractor:shortname}</control-param>
                    <control-param name="organisation_selectedItemsNameSubstituteString">{lecm-contractor:shortname}&lt;div class="control-small-font"&gt;{lecm-contractor:postal-code}, {lecm-contractor:physical-address}&lt;/div&gt;</control-param>
                    <control-param name="organisation_plane">true</control-param>
                    <control-param name="organisation_showSearch">false</control-param>
                    <control-param name="organisation_showExSearch">true</control-param>
                    <control-param name="organisation_showCreateNewLink">false</control-param>
                    <control-param name="organisation_pickerItemsScript">lecm/contractors/organization/picker/items</control-param>
                    <control-param name="organisation_additionalFilter">ASPECT:\"lecm-orgstr-aspects:is-organization-aspect\"</control-param>
                    <control-param name="organisation_showAssocViewForm">true</control-param>
                    <control-param name="organisation_sortProp">lecm-contractor:shortname</control-param>
                    <control-param name="organisation_getExtSearchQuery">LogicECM.getExtQueryForContractor</control-param>
                    <control-param name="organisation_getArgumentsFromForm">LogicECM.getExtArgsForContractor</control-param>
                    <!-- lecm-contractor:physical-person-type -->
                    <control-param name="person_label">Физическое лицо</control-param>
                    <control-param name="person_endpointType">lecm-contractor:physical-person-type</control-param>
                    <control-param name="person_rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Физические_x0020_лица</control-param>
                    <control-param name="person_nameSubstituteString">{lecm-contractor:lastName} {lecm-contractor:firstName} {lecm-contractor:middleName}</control-param>
                    <control-param name="person_selectedItemsNameSubstituteString">{lecm-contractor:fullname}&lt;div class="control-small-font"&gt;{lecm-contractor:postal-code}, {lecm-contractor:physical-address}&lt;/div&gt;</control-param>
                    <control-param name="person_plane">true</control-param>
                    <control-param name="person_showCreateNewLink">true</control-param>
                    <control-param name="person_fillFormFromSearch">true</control-param>
                    <control-param name="person_showSearch">false</control-param>
                    <control-param name="person_showExSearch">true</control-param>
                    <control-param name="person_showAssocViewForm">true</control-param>
                    <control-param name="person_sortProp">lecm-contractor:shortname</control-param>
                    <control-param name="person_getExtSearchQuery">LogicECM.getExtQueryForPerson</control-param>
                    <control-param name="person_getArgumentsFromForm">LogicECM.getExtArgsForPerson</control-param>
                </type>
                <type name="association:lecm-representative:representative-type" template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                    <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Адресанты</control-param>
                    <control-param name="showCreateNewLink">false</control-param>
                    <control-param name="showCreateNewButton">false</control-param>
                    <control-param name="nameSubstituteString">{lecm-representative:surname} {lecm-representative:firstname} {lecm-representative:propMiddlename}</control-param>
                    <control-param name="itemType">lecm-representative:representative-type</control-param>
                </type>
                <type name="association:lecm-contractor:region-type" template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
                    <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Регионы</control-param>
                    <control-param name="nameSubstituteString">{cm:title}</control-param>
                    <control-param name="plane">true</control-param>
                    <control-param name="showSearch">true</control-param>
                </type>
            </default-controls>
        </forms>
    </config>
    <!-- Контрагенты -->
    <config evaluator="model-type" condition="lecm-contractor:contractor-type">
        <forms>
            <!-- Внешний контрагент: Создание -->
            <form>
                <create-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>
                <field-visibility>
                    <show id="submit-function"/>
                    <show id="lecm-contractor:fullname" force="true"/>
                    <!-- Полное наименование -->
                    <show id="lecm-contractor:shortname" force="true"/>
                    <!-- Сокращенное наименование -->
                    <show id="lecm-contractor:comment" force="true"/>
                    <!-- Комментарий -->
                    <show id="lecm-contractor:legal-address" force="true"/>
                    <!-- Юридический адрес -->
                    <show id="lecm-contractor:postal-code" force="true"/>
                    <!-- Почтовый индекс -->
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <!-- Фактический адрес -->
                    <show id="lecm-contractor:phone"/>
                    <!-- Телефон -->
                    <show id="lecm-contractor:fax" force="true"/>
                    <!-- Факс -->
                    <show id="lecm-contractor:email" force="true"/>
                    <!-- E-mail -->
                    <show id="lecm-contractor:INN" force="true"/>
                    <!-- ИНН -->
                    <show id="lecm-contractor:OKPO"/>
                    <!-- ОКПО -->
                    <show id="lecm-contractor:OKVED"/>
                    <!-- ОКВЭД -->
                    <show id="lecm-contractor:OKOGU"/>
                    <!-- ОКОГУ -->
                    <show id="lecm-contractor:KPP"/>
                    <!-- КПП -->
                    <show id="lecm-contractor:OGRN" force="true"/>
                    <!-- ОГРН -->
                    <show id="lecm-contractor:transactional-account"/>
                    <!-- Расчетный счет -->
                    <show id="lecm-contractor:correspondent-account"/>
                    <!-- Корреспондентский счет -->
                    <show id="lecm-contractor:BIK"/>
                    <!-- БИК -->
                    <show id="lecm-contractor:bankname"/>
                    <!-- Наименование банка -->
                    <show id="lecm-contractor:bank-location"/>
                    <!-- Местоположение банка -->
                    <show id="lecm-contractor:contractor-code"/>
                    <!-- Код контрагента -->
                    <show id="lecm-contractor:contractor-to-specialization-association"/>
                    <!-- FK Специализация -->
                    <show id="lecm-contractor:contractor-to-legalform-association"/>
                    <!-- FK ОПФ -->
                    <show id="lecm-contractor:interaction-type"/>
                </field-visibility>
                <appearance>
                    <!-- Вкладка: Контактные данные -->
                    <set id="contacts" label-id="tabs.contractor.contacts" appearance=""/>
                    <field id="submit-function" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/submit-function-control.ftl">
                            <control-param name="scripts">scripts/contractors/contractors-ex-search-script.js</control-param>
                            <control-param name="submitFunction">LogicECM.checkDuplicatesForContractor</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:fullname" set="contacts"/>
                    <!-- Полное наименование -->
                    <field id="lecm-contractor:shortname" set="contacts"/>
                    <!-- Сокращенное наименование -->
                    <field id="lecm-contractor:comment" set="contacts"/>
                    <!-- Комментарий -->
                    <field id="lecm-contractor:legal-address" set="contacts"/>
                    <!-- Юридический адрес -->
                    <field id="lecm-contractor:postal-code" set="contacts"/>
                    <!-- Почтовый индекс -->
                    <field id="lecm-contractor:physical-address" set="contacts"/>
                    <!-- Фактический адрес -->
                    <field id="lecm-contractor:phone" set="contacts"/>
                    <!-- Телефон -->
                    <field id="lecm-contractor:fax" set="contacts"/>
                    <!-- Факс -->
                    <field id="lecm-contractor:email" set="contacts"/>
                    <!-- E-mail -->
                    <field id="lecm-contractor:contractor-code" set="contacts"/>
                    <!-- Код контрагента -->
                    <field id="lecm-contractor:contractor-to-specialization-association" set="contacts"
                           mandatory="true">            <!-- FK Специализация -->
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                            <control-param name="createNewMessageId">label.new-specialization</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:contractor-to-legalform-association" set="contacts"
                           mandatory="true">                 <!-- FK ОПФ -->
                        <control
                                template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Организационно-правовые_x0020_формы
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-legalform:short-title},
                                {lecm-legalform:full-title}
                            </control-param>
                            <control-param name="createNewMessageId">label.new-legalform</control-param>
                        </control>
                    </field>

                    <field id="lecm-contractor:interaction-type" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>

                    <!-- Вкладка: Коды -->
                    <set id="codes" label-id="tabs.contractor.codes" appearance=""/>
                    <field id="lecm-contractor:INN" set="codes"/>
                    <!-- ИНН -->
                    <field id="lecm-contractor:OKPO" set="codes"/>
                    <!-- ОКПО -->
                    <field id="lecm-contractor:OKVED" set="codes"/>
                    <!-- ОКВЭД -->
                    <field id="lecm-contractor:OKOGU" set="codes"/>
                    <!-- ОКОГУ -->
                    <field id="lecm-contractor:KPP" set="codes"/>
                    <!-- КПП -->
                    <field id="lecm-contractor:OGRN" set="codes"/>
                    <!-- ОГРН -->

                    <!-- Вкладка: Реквизиты банка -->
                    <set id="bankinfo" label-id="tabs.contractor.bankinfo" appearance=""/>
                    <field id="lecm-contractor:transactional-account" set="bankinfo"/>
                    <!-- Расчетный счет -->
                    <field id="lecm-contractor:correspondent-account" set="bankinfo"/>
                    <!-- Корреспондентский счет -->
                    <field id="lecm-contractor:BIK" set="bankinfo"/>
                    <!-- БИК -->
                    <field id="lecm-contractor:bankname" set="bankinfo"/>
                    <!-- Наименование банка -->
                    <field id="lecm-contractor:bank-location" set="bankinfo"/>
                    <!-- Местоположение банка -->

                    <!-- Вкладка: Адресанты -->
                    <set id="representatives" label-id="tabs.contractor.representatives" appearance=""/>
                    <field id="lecm-contractor:contractor-to-link-association" set="representatives">
                        <control template="/ru/it/lecm/contractors/representatives.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Адресанты
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-representative:surname}
                                {lecm-representative:firstname}
                            </control-param>
                        </control>
                    </field>
                </appearance>
            </form>

            <!--Внутренний контрагент: создание-->
            <form id="contractorOrg" submission-url="/lecm/contractors/organization/type/lecm-contractor%3Acontractor-type/formprocessor">
                <create-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>
                <field-visibility>
                    <show id="submit-function"/>
                    <show id="lecm-contractor:fullname" force="true"/>
                    <!-- Полное наименование -->
                    <show id="lecm-contractor:shortname" force="true"/>
                    <!-- Сокращенное наименование -->
                    <show id="lecm-contractor:comment" force="true"/>
                    <!-- Комментарий -->
                    <show id="lecm-contractor:legal-address" force="true"/>
                    <!-- Юридический адрес -->
                    <show id="lecm-contractor:postal-code" force="true"/>
                    <!-- Почтовый индекс -->
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <!-- Фактический адрес -->
                    <show id="lecm-contractor:phone"/>
                    <!-- Телефон -->
                    <show id="lecm-contractor:fax" force="true"/>
                    <!-- Факс -->
                    <show id="lecm-contractor:email" force="true"/>
                    <!-- E-mail -->
                    <show id="lecm-contractor:INN" force="true"/>
                    <!-- ИНН -->
                    <show id="lecm-contractor:OKPO"/>
                    <!-- ОКПО -->
                    <show id="lecm-contractor:OKVED"/>
                    <!-- ОКВЭД -->
                    <show id="lecm-contractor:OKOGU"/>
                    <!-- ОКОГУ -->
                    <show id="lecm-contractor:KPP"/>
                    <!-- КПП -->
                    <show id="lecm-contractor:OGRN" force="true"/>
                    <!-- ОГРН -->
                    <show id="lecm-contractor:transactional-account"/>
                    <!-- Расчетный счет -->
                    <show id="lecm-contractor:correspondent-account"/>
                    <!-- Корреспондентский счет -->
                    <show id="lecm-contractor:BIK"/>
                    <!-- БИК -->
                    <show id="lecm-contractor:bankname"/>
                    <!-- Наименование банка -->
                    <show id="lecm-contractor:bank-location"/>
                    <!-- Местоположение банка -->
                    <show id="lecm-contractor:contractor-code"/>
                    <!-- Код контрагента -->
                    <show id="lecm-contractor:contractor-to-specialization-association"/>
                    <!-- FK Специализация -->
                    <show id="lecm-contractor:contractor-to-legalform-association"/>
                    <!-- FK ОПФ -->
                    <show id="lecm-contractor:interaction-type"/>
                </field-visibility>
                <appearance>
                    <!-- Вкладка: Контактные данные -->
                    <set id="contacts" label-id="tabs.contractor.contacts" appearance=""/>
                    <field id="submit-function" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/submit-function-control.ftl">
                            <control-param name="scripts">scripts/contractors/contractors-ex-search-script.js</control-param>
                            <control-param name="submitFunction">LogicECM.checkDuplicatesForContractor</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:fullname" set="contacts"/>
                    <!-- Полное наименование -->
                    <field id="lecm-contractor:shortname" set="contacts"/>
                    <!-- Сокращенное наименование -->
                    <field id="lecm-contractor:comment" set="contacts"/>
                    <!-- Комментарий -->
                    <field id="lecm-contractor:legal-address" set="contacts"/>
                    <!-- Юридический адрес -->
                    <field id="lecm-contractor:physical-address" set="contacts"/>
                    <!-- Фактический адрес -->
                    <field id="lecm-contractor:postal-code" set="contacts"/>
                    <!-- Почтовый индекс -->
                    <field id="lecm-contractor:phone" set="contacts"/>
                    <!-- Телефон -->
                    <field id="lecm-contractor:fax" set="contacts"/>
                    <!-- Факс -->
                    <field id="lecm-contractor:email" set="contacts"/>
                    <!-- E-mail -->
                    <field id="lecm-contractor:contractor-code" set="contacts"/>
                    <!-- Код контрагента -->
                    <field id="lecm-contractor:contractor-to-specialization-association" set="contacts"
                           mandatory="true">            <!-- FK Специализация -->
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                            <control-param name="createNewMessageId">label.new-specialization</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:contractor-to-legalform-association" set="contacts"
                           mandatory="true">                 <!-- FK ОПФ -->
                        <control
                                template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Организационно-правовые_x0020_формы
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-legalform:short-title},
                                {lecm-legalform:full-title}
                            </control-param>
                            <control-param name="createNewMessageId">label.new-legalform</control-param>
                        </control>
                    </field>

                    <field id="lecm-contractor:interaction-type" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>

                    <!-- Вкладка: Коды -->
                    <set id="codes" label-id="tabs.contractor.codes" appearance=""/>
                    <field id="lecm-contractor:INN" set="codes"/>
                    <!-- ИНН -->
                    <field id="lecm-contractor:OKPO" set="codes"/>
                    <!-- ОКПО -->
                    <field id="lecm-contractor:OKVED" set="codes"/>
                    <!-- ОКВЭД -->
                    <field id="lecm-contractor:OKOGU" set="codes"/>
                    <!-- ОКОГУ -->
                    <field id="lecm-contractor:KPP" set="codes"/>
                    <!-- КПП -->
                    <field id="lecm-contractor:OGRN" set="codes"/>
                    <!-- ОГРН -->

                    <!-- Вкладка: Реквизиты банка -->
                    <set id="bankinfo" label-id="tabs.contractor.bankinfo" appearance=""/>
                    <field id="lecm-contractor:transactional-account" set="bankinfo"/>
                    <!-- Расчетный счет -->
                    <field id="lecm-contractor:correspondent-account" set="bankinfo"/>
                    <!-- Корреспондентский счет -->
                    <field id="lecm-contractor:BIK" set="bankinfo"/>
                    <!-- БИК -->
                    <field id="lecm-contractor:bankname" set="bankinfo"/>
                    <!-- Наименование банка -->
                    <field id="lecm-contractor:bank-location" set="bankinfo"/>
                    <!-- Местоположение банка -->

                    <!-- Вкладка: Адресанты -->
                    <set id="representatives" label-id="tabs.contractor.representatives" appearance=""/>
                    <field id="lecm-contractor:contractor-to-link-association" set="representatives">
                        <control template="/ru/it/lecm/contractors/representatives.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Адресанты
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-representative:surname}
                                {lecm-representative:firstname}
                            </control-param>
                        </control>
                    </field>
                </appearance>
            </form>

            <!-- Контрагент: Таблица -->
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-contractor:shortname" force="true"/>
                    <!-- Сокращенное наименование -->
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <!-- Фактический адрес -->
                    <show id="lecm-contractor:phone"/>
                    <!-- Телефон -->

                    <show id="lecm-representative:computed-representative-fullname" force="true"/>
                    <!-- "{Фамилия} {Имя}" основного адресанта. -->
                    <show id="deletable"/>
                </field-visibility>
                <appearance>
                    <!-- Знай: 'lecm-contractor:contractor-to-link-association' создаётся через политику. -->
                    <field id="lecm-representative:computed-representative-fullname"
                           substituteString="{lecm-contractor:contractor-to-link-association(lecm-contractor:link-to-representative-association-is-primary=true)/lecm-contractor:link-to-representative-association/lecm-representative:surname} {lecm-contractor:contractor-to-link-association(lecm-contractor:link-to-representative-association-is-primary=true)/lecm-contractor:link-to-representative-association/lecm-representative:firstname}"></field>
                    <field id="deletable"
                           substituteString="{@!hasAspect('lecm-orgstr-aspects:is-organization-aspect')}"></field>
                </appearance>
            </form>

            <!-- Контрагент: Таблица -->
            <form id="search">
                <field-visibility>
                    <show id="lecm-contractor:fullname"/>
                    <show id="lecm-contractor:shortname" force="true"/>
                    <show id="lecm-contractor:contractor-to-specialization-association"/>
                    <show id="lecm-contractor:INN" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:fullname" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-contractor:shortname" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-contractor:contractor-to-specialization-association">
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="ex-control-search">
                <field-visibility>
                    <show id="lecm-contractor:fullname"/>
                    <show id="lecm-contractor:INN"/>
                    <show id="lecm-contractor:KPP"/>
                </field-visibility>
                <appearance>
                    <set id="common"/>
                    <set id="one" appearance="" parent="common"/>
                    <set id="two" parent="common" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl"/>

                    <field id="lecm-contractor:fullname" label-id="label.contractor_name" set="one">
                        <control>
                            <control-param name="mandatory">false</control-param>
                        </control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-contractor:INN" set="two"/>
                    <field id="lecm-contractor:KPP" set="two"/>
                </appearance>
            </form>
            <form id="datagrid-ext">
                <field-visibility>
                    <show id="lecm-contractor:shortname"/>
                    <show id="lecm-contractor:fullname"/>
                    <show id="lecm-contractor:INN"/>
                    <show id="lecm-contractor:KPP"/>
                </field-visibility>
            </form>
            <form id="show-duplicates">
                <field-visibility>
                    <show id="lecm-contractor:duplicates"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:duplicates">
                        <control template="/ru/it/lecm/base-share/components/controls/association-datagrid-control.ftl">
                            <control-param name="itemType">lecm-contractor:contractor-type</control-param>
                            <control-param name="showCreateButton">false</control-param>
                            <control-param name="showActions">false</control-param>
                            <control-param name="datagridFormId">datagrid-ext</control-param>
                            <control-param name="showLabel">false</control-param>
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты</control-param>
                            <control-param name="selectedItemsFormArgs">contractor_duplicates</control-param>
                            <control-param name="prefixLabelId">label.dictionary.has.duplicates</control-param>
                            <control-param name="postfixLabelId">label.continue.with.selected.data</control-param>
                            <control-param name="usePagination">true</control-param>
                            <control-param name="isTableSortable">false</control-param>
                            <control-param name="pageSize">5</control-param>
                            <control-param name="datagridNoWrapValues">true</control-param>
                            <control-param name="datagridStrippedCols">lecm-contractor:fullname</control-param>
                            <control-param name="datagridMaxSColWidth">21</control-param>
                            <control-param name="datagridStyles">middle-align</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-contractor:contractor-type">
        <forms>
            <!-- Контрагент: Отображение -->
            <form>
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>

                <field-visibility>
                    <show id="submit-function"/>
                    <show id="lecm-contractor:computed-parent"/>
                    <!-- Наименование материнской компании -->
                    <show id="lecm-contractor:fullname" force="true"/>
                    <!-- Полное наименование -->
                    <show id="lecm-contractor:shortname" force="true"/>
                    <!-- Сокращенное наименование -->
                    <show id="lecm-contractor:comment" force="true"/>
                    <!-- Комментарий -->
                    <show id="lecm-contractor:legal-address" force="true"/>
                    <!-- Юридический адрес -->
                    <show id="lecm-contractor:postal-code" force="true"/>
                    <!-- Почтовый индекс -->
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <!-- Фактический адрес -->
                    <show id="lecm-contractor:phone"/>
                    <!-- Телефон -->
                    <show id="lecm-contractor:fax" force="true"/>
                    <!-- Факс -->
                    <show id="lecm-contractor:email" force="true"/>
                    <!-- E-mail -->
                    <show id="lecm-contractor:INN" force="true"/>
                    <!-- ИНН -->
                    <show id="lecm-contractor:OKPO"/>
                    <!-- ОКПО -->
                    <show id="lecm-contractor:OKVED"/>
                    <!-- ОКВЭД -->
                    <show id="lecm-contractor:OKOGU"/>
                    <!-- ОКОГУ -->
                    <show id="lecm-contractor:KPP"/>
                    <!-- КПП -->
                    <show id="lecm-contractor:OGRN" force="true"/>
                    <!-- ОГРН -->
                    <show id="lecm-contractor:transactional-account"/>
                    <!-- Расчетный счет -->
                    <show id="lecm-contractor:correspondent-account"/>
                    <!-- Корреспондентский счет -->
                    <show id="lecm-contractor:BIK"/>
                    <!-- БИК -->
                    <show id="lecm-contractor:bankname"/>
                    <!-- Наименование банка -->
                    <show id="lecm-contractor:bank-location"/>
                    <!-- Местоположение банка -->
                    <show id="lecm-contractor:contractor-code"/>
                    <!-- Код контрагента -->

                    <show id="lecm-contractor:contractor-to-specialization-association" force="true"/>
                    <!-- FK Специализация -->
                    <show id="lecm-contractor:contractor-to-legalform-association"/>
                    <!-- FK ОПФ -->
                    <show id="lecm-contractor:contractor-to-link-association"/>
                    <!-- FK Адресант (через ссылку) -->
                    <show id="lecm-contractor:interaction-type"/>
                    <show id="hasOrganization"/>
                </field-visibility>

                <appearance>
                    <!-- Вкладка: Контактные данные -->
                    <set id="contacts" label-id="tabs.contractor.contacts" appearance=""/>
                    <field id="submit-function" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/submit-function-control.ftl">
                            <control-param name="scripts">scripts/contractors/contractors-ex-search-script.js</control-param>
                            <control-param name="submitFunction">LogicECM.checkDuplicatesForContractor</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:computed-parent"
                           set="contacts">                                     <!-- Наименование материнской компании -->
                        <control template="/ru/it/lecm/base-share/components/controls/view-link-control.ftl">
                            <control-param name="formTitle">title.view_mother_company</control-param>
                            <control-param name="labelText">label.mother_company_is</control-param>
                            <control-param name="dataUrl">lecm/contractors/getparent</control-param>
                            <control-param name="setId">contacts</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:fullname" set="contacts"/>
                    <!-- Полное наименование -->
                    <field id="lecm-contractor:shortname" set="contacts"/>
                    <!-- Сокращенное наименование -->
                    <field id="lecm-contractor:comment" set="contacts"/>
                    <!-- Комментарий -->
                    <field id="lecm-contractor:legal-address" set="contacts"/>
                    <!-- Юридический адрес -->
                    <field id="lecm-contractor:postal-code" set="contacts"/>
                    <!-- Почтовый индекс -->
                    <field id="lecm-contractor:physical-address" set="contacts"/>
                    <!-- Фактический адрес -->
                    <field id="lecm-contractor:phone" set="contacts"/>
                    <!-- Телефон -->
                    <field id="lecm-contractor:fax" set="contacts"/>
                    <!-- Факс -->
                    <field id="lecm-contractor:email" set="contacts"/>
                    <!-- E-mail -->
                    <field id="lecm-contractor:contractor-code" set="contacts"/>
                    <!-- Код контрагента -->
                    <field id="lecm-contractor:contractor-to-specialization-association" set="contacts"
                           mandatory="true">
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                            <control-param name="createNewMessageId">label.new-specialization</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:contractor-to-legalform-association" set="contacts"
                           mandatory="true">                 <!-- ОПФ -->
                        <control
                                template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Организационно-правовые_x0020_формы
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-legalform:short-title},
                                {lecm-legalform:full-title}
                            </control-param>
                            <control-param name="createNewMessageId">label.new-legalform</control-param>
                        </control>
                    </field>

                    <field id="lecm-contractor:interaction-type" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>

                    <field id="hasOrganization" set="contacts" label-id="label.our_organization">
                        <control template="/ru/it/lecm/base-share/components/controls/substitude-control.ftl">
                            <control-param name="formatString">
                                {@hasAspect('lecm-orgstr-aspects:is-organization-aspect')}
                            </control-param>
                        </control>
                    </field>

                    <!-- Вкладка: Коды -->
                    <set id="codes" label-id="tabs.contractor.codes" appearance=""/>
                    <field id="lecm-contractor:INN" set="codes"/>
                    <!-- ИНН -->
                    <field id="lecm-contractor:OKPO" set="codes"/>
                    <!-- ОКПО -->
                    <field id="lecm-contractor:OKVED" set="codes"/>
                    <!-- ОКВЭД -->
                    <field id="lecm-contractor:OKOGU" set="codes"/>
                    <!-- ОКОГУ -->
                    <field id="lecm-contractor:KPP" set="codes"/>
                    <!-- КПП -->
                    <field id="lecm-contractor:OGRN" set="codes"/>
                    <!-- ОГРН -->

                    <!-- Вкладка: Реквизиты банка -->
                    <set id="bankinfo" label-id="tabs.contractor.bankinfo" appearance=""/>
                    <field id="lecm-contractor:transactional-account" set="bankinfo"/>
                    <!-- Расчетный счет -->
                    <field id="lecm-contractor:correspondent-account" set="bankinfo"/>
                    <!-- Корреспондентский счет -->
                    <field id="lecm-contractor:BIK" set="bankinfo"/>
                    <!-- БИК -->
                    <field id="lecm-contractor:bankname" set="bankinfo"/>
                    <!-- Наименование банка -->
                    <field id="lecm-contractor:bank-location" set="bankinfo"/>
                    <!-- Местоположение банка -->

                    <!-- Вкладка: Адресанты -->
                    <set id="representatives" label-id="tabs.contractor.representatives" appearance=""/>
                    <field id="lecm-contractor:contractor-to-link-association" set="representatives">
                        <control template="/ru/it/lecm/contractors/representatives.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Адресанты
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-representative:surname}
                                {lecm-representative:firstname}
                            </control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="versions">
                <view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>
                <edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl"/>

                <field-visibility>
                    <show id="lecm-contractor:computed-parent"/>
                    <!-- Наименование материнской компании -->
                    <show id="lecm-contractor:fullname"/>
                    <!-- Полное наименование -->
                    <show id="lecm-contractor:shortname" force="true"/>
                    <!-- Сокращенное наименование -->
                    <show id="lecm-contractor:comment" force="true"/>
                    <!-- Комментарий -->
                    <show id="lecm-contractor:legal-address" force="true"/>
                    <!-- Юридический адрес -->
                    <show id="lecm-contractor:postal-code" force="true"/>
                    <!-- Почтовый индекс -->
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <!-- Фактический адрес -->
                    <show id="lecm-contractor:phone"/>
                    <!-- Телефон -->
                    <show id="lecm-contractor:fax" force="true"/>
                    <!-- Факс -->
                    <show id="lecm-contractor:email" force="true"/>
                    <!-- E-mail -->
                    <show id="lecm-contractor:INN" force="true"/>
                    <!-- ИНН -->
                    <show id="lecm-contractor:OKPO"/>
                    <!-- ОКПО -->
                    <show id="lecm-contractor:OKVED"/>
                    <!-- ОКВЭД -->
                    <show id="lecm-contractor:OKOGU"/>
                    <!-- ОКОГУ -->
                    <show id="lecm-contractor:KPP"/>
                    <!-- КПП -->
                    <show id="lecm-contractor:OGRN" force="true"/>
                    <!-- ОГРН -->
                    <show id="lecm-contractor:transactional-account"/>
                    <!-- Расчетный счет -->
                    <show id="lecm-contractor:correspondent-account"/>
                    <!-- Корреспондентский счет -->
                    <show id="lecm-contractor:BIK"/>
                    <!-- БИК -->
                    <show id="lecm-contractor:bankname"/>
                    <!-- Наименование банка -->
                    <show id="lecm-contractor:bank-location"/>
                    <!-- Местоположение банка -->
                    <show id="lecm-contractor:contractor-code"/>
                    <!-- Код контрагента -->

                    <show id="lecm-contractor:contractor-to-specialization-association" force="true"/>
                    <!-- FK Специализация -->
                    <show id="lecm-contractor:contractor-to-legalform-association"/>
                    <!-- FK ОПФ -->
                    <show id="lecm-contractor:interaction-type"/>
                </field-visibility>

                <appearance>
                    <!-- Вкладка: Контактные данные -->
                    <set id="contacts" label-id="tabs.contractor.contacts" appearance=""/>
                    <field id="lecm-contractor:computed-parent" set="contacts">                                     <!-- Наименование материнской компании -->
                        <control template="/ru/it/lecm/base-share/components/controls/view-link-control.ftl">
                            <control-param name="formTitle">title.view_mother_company</control-param>
                            <control-param name="labelText">label.mother_company_is</control-param>
                            <control-param name="dataUrl">lecm/contractors/getparent</control-param>
                            <control-param name="setId">contacts</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:fullname" set="contacts"/>
                    <!-- Полное наименование -->
                    <field id="lecm-contractor:shortname" set="contacts"/>
                    <!-- Сокращенное наименование -->
                    <field id="lecm-contractor:comment" set="contacts"/>
                    <!-- Комментарий -->
                    <field id="lecm-contractor:legal-address" set="contacts" mandatory="true"/>
                    <!-- Юридический адрес -->
                    <field id="lecm-contractor:postal-code" set="contacts"/>
                    <!-- Почтовый индекс -->
                    <field id="lecm-contractor:physical-address" set="contacts"/>
                    <!-- Фактический адрес -->
                    <field id="lecm-contractor:phone" set="contacts"/>
                    <!-- Телефон -->
                    <field id="lecm-contractor:fax" set="contacts"/>
                    <!-- Факс -->
                    <field id="lecm-contractor:email" set="contacts"/>
                    <!-- E-mail -->
                    <field id="lecm-contractor:contractor-code" set="contacts"/>
                    <!-- Код контрагента -->
                    <field id="lecm-contractor:contractor-to-specialization-association" set="contacts"
                           mandatory="true">
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:contractor-to-legalform-association" set="contacts" mandatory="true">                 <!-- ОПФ -->
                        <control
                                template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Организационно-правовые_x0020_формы
                            </control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-legalform:short-title},
                                {lecm-legalform:full-title}
                            </control-param>
                        </control>
                    </field>

                    <field id="lecm-contractor:interaction-type" set="contacts">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>

                    <!-- Вкладка: Коды -->
                    <set id="codes" label-id="tabs.contractor.codes" appearance=""/>
                    <field id="lecm-contractor:INN" set="codes"/>
                    <!-- ИНН -->
                    <field id="lecm-contractor:OKPO" set="codes"/>
                    <!-- ОКПО -->
                    <field id="lecm-contractor:OKVED" set="codes"/>
                    <!-- ОКВЭД -->
                    <field id="lecm-contractor:OKOGU" set="codes"/>
                    <!-- ОКОГУ -->
                    <field id="lecm-contractor:KPP" set="codes"/>
                    <!-- КПП -->
                    <field id="lecm-contractor:OGRN" set="codes"/>
                    <!-- ОГРН -->

                    <!-- Вкладка: Реквизиты банка -->
                    <set id="bankinfo" label-id="tabs.contractor.bankinfo" appearance=""/>
                    <field id="lecm-contractor:transactional-account" set="bankinfo"/>
                    <!-- Расчетный счет -->
                    <field id="lecm-contractor:correspondent-account" set="bankinfo"/>
                    <!-- Корреспондентский счет -->
                    <field id="lecm-contractor:BIK" set="bankinfo"/>
                    <!-- БИК -->
                    <field id="lecm-contractor:bankname" set="bankinfo"/>
                    <!-- Наименование банка -->
                    <field id="lecm-contractor:bank-location" set="bankinfo"/>
                    <!-- Местоположение банка -->

                </appearance>
            </form>
            <form id="expand-info">
                <field-visibility>
                    <show id="lecm-contractor:legal-address"/>
                    <show id="lecm-contractor:physical-address"/>
                    <show id="lecm-contractor:phone"/>
                    <show id="lecm-contractor:contractor-code"/>
                    <show id="lecm-contractor:contractor-to-specialization-association"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:contractor-to-specialization-association">
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                            <control-param name="createNewMessageId">label.new-specialization</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-contractor:link-representative-and-contractor">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-contractor:link-to-representative-association-is-primary"/>                          <!-- CheckBox: Основной контакт -->
                    <show id="lecm-contractor:link-to-representative-association"/>                                     <!-- [=>] lecm-representative:representative-type -->
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:link-to-representative-association">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Адресанты</control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{lecm-representative:surname} {lecm-representative:firstname} {lecm-representative:propMiddlename}</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-contractor:link-to-representative-association-is-primary"/>
                    <show id="lecm-representative:computed-representative-fullname" force="true"/>                      <!-- "{Фамилия} {Имя}" основного адресанта. -->
                </field-visibility>
                <appearance>
                    <field id="lecm-representative:computed-representative-fullname" substituteString="{lecm-contractor:link-to-representative-association/lecm-representative:surname} {lecm-contractor:link-to-representative-association/lecm-representative:firstname}"></field>
                </appearance>
            </form>
        </forms>
    </config>

    <!-- Адресанты -->
    <config evaluator="model-type" condition="lecm-representative:representative-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-representative:primary-contact"/>                                                    <!-- Основной контакт -->
                    <show id="lecm-representative:surname"/>                                                            <!-- Фамилия -->
                    <show id="lecm-representative:firstname"/>                                                          <!-- Имя -->
                    <show id="lecm-representative:middlename"/>                                                         <!-- Отчество -->
                    <show id="lecm-representative:sex"/>                                                                <!-- Пол -->
                    <show id="lecm-representative:birthdate"/>                                                          <!-- Дата рождения -->
                    <show id="lecm-representative:document-number"/>                                                    <!-- Номер документа -->
                    <show id="lecm-representative:document-series"/>                                                    <!-- Серия документа -->
                    <show id="lecm-representative:document-issuance-date"/>                                             <!-- Дата выдачи документа -->
                    <show id="lecm-representative:work-phone"/>                                                         <!-- Телефон -->
                    <show id="lecm-representative:zip-code"/>                                                           <!-- Индекс -->
                    <show id="lecm-representative:physical-address"/>                                                   <!-- Фактический адрес -->
                    <show id="lecm-representative:email"/>                                                              <!-- E-mail -->
                    <show id="lecm-representative:representative-to-certifying-document-association"/>                  <!-- FK Удостоверяющий документ (тип) -->
                    <show id="lecm-contractor:representative-to-contractor-association"/>                               <!-- FK Контрагент -->
                </field-visibility>
                <appearance>
                    <field id="lecm-representative:zip-code" mandatory="true"/>                                         <!-- Индекс -->
                    <field id="lecm-representative:physical-address" mandatory="true"/>                                 <!-- Фактический адрес -->
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-representative:primary-contact"/>                                                    <!-- Основной контакт -->
                    <show id="lecm-representative:surname"/>                                                            <!-- Фамилия -->
                    <show id="lecm-representative:firstname"/>                                                          <!-- Имя -->
                    <show id="lecm-representative:middlename"/>                                                         <!-- Отчество -->
                    <show id="lecm-representative:sex"/>                                                                <!-- Пол -->
                    <show id="lecm-representative:birthdate"/>                                                          <!-- Дата рождения -->
                    <show id="lecm-representative:document-number"/>                                                    <!-- Номер документа -->
                    <show id="lecm-representative:document-series"/>                                                    <!-- Серия документа -->
                    <show id="lecm-representative:document-issuance-date"/>                                             <!-- Дата выдачи документа -->
                    <show id="lecm-representative:work-phone"/>                                                         <!-- Телефон -->
                    <show id="lecm-representative:zip-code"/>                                                           <!-- Индекс -->
                    <show id="lecm-representative:physical-address"/>                                                   <!-- Фактический адрес -->
                    <show id="lecm-representative:representative-to-certifying-document-association"/>                  <!-- FK Удостоверяющий документ (тип) -->
                    <show id="lecm-contractor:representative-to-contractor-association"/>                               <!-- FK Контрагент -->
                </field-visibility>
                <appearance>
                    <field id="lecm-representative:surname" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-representative:firstname" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>

            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-representative:surname"/>                                                            <!-- Фамилия -->
                    <show id="lecm-representative:firstname"/>                                                          <!-- Имя -->
                    <show id="lecm-representative:work-phone"/>                                                         <!-- Телефон -->
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-representative:representative-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-representative:computed-contractor"/>                                                <!-- Контрагент которого представляет Адресант -->
                    <show id="lecm-representative:primary-contact"/>                                                    <!-- Основной контакт -->
                    <show id="lecm-representative:surname"/>                                                            <!-- Фамилия -->
                    <show id="lecm-representative:firstname"/>                                                          <!-- Имя -->
                    <show id="lecm-representative:middlename"/>                                                         <!-- Отчество -->
                    <show id="lecm-representative:sex"/>                                                                <!-- Пол -->
                    <show id="lecm-representative:birthdate"/>                                                          <!-- Дата рождения -->
                    <show id="lecm-representative:document-number"/>                                                    <!-- Номер документа -->
                    <show id="lecm-representative:document-series"/>                                                    <!-- Серия документа -->
                    <show id="lecm-representative:document-issuance-date"/>                                             <!-- Дата выдачи документа -->
                    <show id="lecm-representative:work-phone"/>                                                         <!-- Телефон -->
                    <show id="lecm-representative:zip-code"/>                                                           <!-- Индекс -->
                    <show id="lecm-representative:physical-address"/>                                                   <!-- Фактический адрес -->
                    <show id="lecm-representative:email"/>                                                              <!-- E-mail -->
                    <show id="lecm-representative:representative-to-certifying-document-association"/>                  <!-- FK Удостоверяющий документ (тип) -->
                    <show id="lecm-contractor:representative-to-contractor-association"/>                               <!-- FK Контрагент -->
                </field-visibility>

                <appearance>
                    <field id="lecm-representative:zip-code" mandatory="true"/>
                    <field id="lecm-representative:physical-address" mandatory="true"/>
                    <field id="lecm-representative:computed-contractor">
                        <control template="/ru/it/lecm/base-share/components/controls/view-link-control.ftl">
                            <control-param name="formTitle">title.contractor_rpresented_by</control-param>
                            <control-param name="labelText">label.represents</control-param>
                            <control-param name="dataUrl">lecm/contractors/representatives/getcontractor</control-param>
                            <control-param name="setId">contacts</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="versions">
                <field-visibility>
                    <show id="lecm-representative:primary-contact"/>                                                    <!-- Основной контакт -->
                    <show id="lecm-representative:surname"/>                                                            <!-- Фамилия -->
                    <show id="lecm-representative:firstname"/>                                                          <!-- Имя -->
                    <show id="lecm-representative:middlename"/>                                                         <!-- Отчество -->
                    <show id="lecm-representative:sex"/>                                                                <!-- Пол -->
                    <show id="lecm-representative:birthdate"/>                                                          <!-- Дата рождения -->
                    <show id="lecm-representative:document-number"/>                                                    <!-- Номер документа -->
                    <show id="lecm-representative:document-series"/>                                                    <!-- Серия документа -->
                    <show id="lecm-representative:document-issuance-date"/>                                             <!-- Дата выдачи документа -->
                    <show id="lecm-representative:work-phone"/>                                                         <!-- Телефон -->
                    <show id="lecm-representative:zip-code"/>                                                           <!-- Индекс -->
                    <show id="lecm-representative:physical-address"/>                                                   <!-- Фактический адрес -->
                    <show id="lecm-representative:email"/>                                                              <!-- E-mail -->
                    <show id="lecm-representative:contacts"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <!-- Специализации -->
    <config evaluator="model-type" condition="lecm-specialization:specialization-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-specialization:title"/>                                                              <!-- Наименование -->
                    <show id="lecm-specialization:description"/>                                                        <!-- Описание -->
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-specialization:title"/>                                                              <!-- Наименование -->
                    <show id="lecm-specialization:description"/>                                                        <!-- Описание -->
                </field-visibility>
                <appearance>
                    <field id="lecm-specialization:title" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-specialization:title"/>                                                              <!-- Наименование -->
                    <show id="lecm-specialization:description"/>                                                        <!-- Описание -->
                </field-visibility>
            </form>
        </forms>
    </config>
    <config evaluator="node-type" condition="lecm-specialization:specialization-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-specialization:title"/>                                                              <!-- Наименование -->
                    <show id="lecm-specialization:description"/>                                                        <!-- Описание -->
                </field-visibility>
            </form>
        </forms>
    </config>

    <!-- Организационно-правовые формы -->
    <config evaluator="model-type" condition="lecm-legalform:legalform-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-legalform:short-title"/>                                                             <!-- Краткое наименование -->
                    <show id="lecm-legalform:full-title"/>                                                              <!-- Полное наименование -->
                    <show id="lecm-legalform:comment"/>                                                                 <!-- Комментарий -->
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-legalform:short-title"/>                                                             <!-- Краткое наименование -->
                    <show id="lecm-legalform:full-title"/>                                                              <!-- Полное наименование -->
                    <show id="lecm-legalform:comment"/>                                                                 <!-- Комментарий -->
                </field-visibility>
                <appearance>
                    <field id="lecm-legalform:short-title" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-legalform:full-title" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-legalform:short-title"/>                                                             <!-- Краткое наименование -->
                    <show id="lecm-legalform:full-title"/>                                                              <!-- Полное наименование -->
                    <show id="lecm-legalform:comment"/>                                                                 <!-- Комментарий -->
                </field-visibility>
            </form>
        </forms>
    </config>
    <config evaluator="node-type" condition="lecm-legalform:legalform-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-legalform:short-title"/>                                                             <!-- Краткое наименование -->
                    <show id="lecm-legalform:full-title"/>                                                              <!-- Полное наименование -->
                    <show id="lecm-legalform:comment"/>                                                                 <!-- Комментарий -->
                </field-visibility>
            </form>
        </forms>
    </config>

    <!-- Физические лица -->

    <config evaluator="model-type" condition="lecm-contractor:physical-person-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="submit-function"/>
                    <show id="lecm-contractor:lastName"/>
                    <show id="lecm-contractor:firstName"/>
                    <show id="lecm-contractor:middleName"/>
                    <show id="lecm-contractor:is-sole-proprietor"/>
                    <show id="lecm-contractor:work-phone"/>
                    <show id="lecm-contractor:mobile-phone"/>
                    <show id="lecm-contractor:representative-to-certifying-document-association"/>
                    <show id="lecm-contractor:document-series"/>
                    <show id="lecm-contractor:document-number"/>
                    <show id="lecm-contractor:document-series"/>
                    <show id="lecm-contractor:document-issuance-date"/>
                    <show id="lecm-contractor:document-issuance-agency"/>
                    <show id="lecm-contractor:INN" force="true"/>
                    <show id="lecm-contractor:OGRN" force="true"/>
                    <show id="lecm-contractor:postal-code"/>
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <show id="lecm-contractor:legal-address" force="true"/>
                    <show id="lecm-contractor:fax" force="true"/>
                    <show id="lecm-contractor:email" force="true"/>
                    <show id="lecm-contractor:additional-contact-information"/>
                    <show id="lecm-contractor:contractor-to-specialization-association" force="true"/>
                    <show id="lecm-contractor:comment" force="true"/>
                    <show id="lecm-contractor:region-association"/>
                </field-visibility>
                <appearance>
                    <field id="submit-function">
                        <control template="/ru/it/lecm/base-share/components/controls/submit-function-control.ftl">
                            <control-param name="scripts">scripts/contractors/contractors-ex-search-script.js</control-param>
                            <control-param name="submitFunction">LogicECM.checkDuplicatesForPerson</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:is-sole-proprietor">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl">
                            <control-param name="disabledFieldsIfNotSelect">lecm-contractor:OGRN</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:legal-address" label-id="title.physical_person_legal_address"/>
                    <field id="lecm-contractor:contractor-to-specialization-association">
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                            <control-param name="createNewMessageId">label.new-specialization</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-contractor:lastName"/>
                    <show id="lecm-contractor:document-number"/>
                    <show id="lecm-contractor:INN" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:document-number" label-id="title.passport_number"/>
                    <field id="lecm-contractor:lastName" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
            <form id="ex-control-search">
                <field-visibility>
                    <show id="lecm-contractor:lastName"/>
                    <show id="lecm-contractor:document-number"/>
                    <show id="lecm-contractor:INN"/>
                    <show id="lecm-contractor:physical-address"/>
                    <show id="lecm-contractor:region-association"/>
                </field-visibility>
                <appearance>
                    <set id="common"/>
                    <set id="one" appearance="" parent="common"/>
                    <set id="two" parent="common" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl"/>

                    <field id="lecm-contractor:lastName" label-id="label.physical_person_fio" set="one">
                        <control>
                            <control-param name="mandatory">false</control-param>
                        </control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-contractor:document-number" label-id="label.physical_person_doc_number" set="two"/>
                    <field id="lecm-contractor:INN" set="two"/>
                    <field id="lecm-contractor:physical-address" label-id="label.physical_person_address" set="two">
                        <control>
                            <control-param name="mandatory">false</control-param>
                        </control>
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-contractor:region-association" set="two"/>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-contractor:lastName"/>
                    <show id="lecm-contractor:firstName"/>
                    <show id="lecm-contractor:INN" force="true"/>
                </field-visibility>
            </form>
            <form id="datagrid-ext">
                <field-visibility>
                    <show id="lecm-contractor:fullname"/>
                    <show id="lecm-contractor:physical-address"/>
                    <show id="lecm-contractor:is-sole-proprietor"/>
                    <show id="lecm-contractor:INN"/>
                    <show id="lecm-contractor:region-association"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:fullname" label="Имя"/>
                    <field id="lecm-contractor:is-sole-proprietor" label="ИП"/>
                </appearance>
            </form>
            <form id="show-duplicates">
                <field-visibility>
                    <show id="lecm-person:duplicates"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-person:duplicates">
                        <control template="/ru/it/lecm/base-share/components/controls/association-datagrid-control.ftl">
                            <control-param name="itemType">lecm-contractor:physical-person-type</control-param>
                            <control-param name="showCreateButton">false</control-param>
                            <control-param name="showActions">false</control-param>
                            <control-param name="datagridFormId">datagrid-ext</control-param>
                            <control-param name="showLabel">false</control-param>
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Физические_x0020_лица</control-param>
                            <control-param name="selectedItemsFormArgs">person_duplicates</control-param>
                            <control-param name="prefixLabelId">label.dictionary.has.duplicates</control-param>
                            <control-param name="postfixLabelId">label.continue.with.selected.data</control-param>
                            <control-param name="usePagination">true</control-param>
                            <control-param name="isTableSortable">false</control-param>
                            <control-param name="pageSize">5</control-param>
                            <control-param name="datagridNoWrapValues">true</control-param>
                            <control-param name="datagridStrippedCols">lecm-contractor:physical-address</control-param>
                            <control-param name="datagridMaxSColWidth">21</control-param>
                            <control-param name="datagridStyles">middle-align</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-contractor:physical-person-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="submit-function"/>
                    <show id="lecm-contractor:lastName"/>
                    <show id="lecm-contractor:firstName"/>
                    <show id="lecm-contractor:middleName"/>
                    <show id="lecm-contractor:is-sole-proprietor"/>
                    <show id="lecm-contractor:work-phone"/>
                    <show id="lecm-contractor:mobile-phone"/>
                    <show id="lecm-contractor:representative-to-certifying-document-association"/>
                    <show id="lecm-contractor:document-series"/>
                    <show id="lecm-contractor:document-number"/>
                    <show id="lecm-contractor:document-series"/>
                    <show id="lecm-contractor:document-issuance-date"/>
                    <show id="lecm-contractor:document-issuance-agency"/>
                    <show id="lecm-contractor:INN" force="true"/>
                    <show id="lecm-contractor:OGRN" force="true"/>
                    <show id="lecm-contractor:postal-code"/>
                    <show id="lecm-contractor:physical-address" force="true"/>
                    <show id="lecm-contractor:legal-address" force="true"/>
                    <show id="lecm-contractor:fax" force="true"/>
                    <show id="lecm-contractor:email" force="true"/>
                    <show id="lecm-contractor:additional-contact-information"/>
                    <show id="lecm-contractor:contractor-to-specialization-association" force="true"/>
                    <show id="lecm-contractor:comment" force="true"/>
                    <show id="lecm-contractor:region-association"/>
                </field-visibility>
                <appearance>
                    <field id="submit-function">
                        <control template="/ru/it/lecm/base-share/components/controls/submit-function-control.ftl">
                            <control-param name="scripts">scripts/contractors/contractors-ex-search-script.js</control-param>
                            <control-param name="submitFunction">LogicECM.checkDuplicatesForPerson</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:is-sole-proprietor">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl">
                            <control-param name="disabledFieldsIfNotSelect">lecm-contractor:OGRN</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:legal-address" label-id="title.physical_person_legal_address"/>
                    <field id="lecm-contractor:contractor-to-specialization-association">
                        <control template="/ru/it/lecm/base-share/components/controls/association-tree-picker.ftl">
                            <control-param name="rootLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Контрагенты_x0020_Специализации
                            </control-param>
                            <control-param name="showCreateNewLink">true</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="plane">false</control-param>
                            <control-param name="showSelectedItemsPath">false</control-param>
                            <control-param name="treeItemType">lecm-specialization:specialization-type</control-param>
                            <control-param name="createNewMessageId">label.new-specialization</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="expand-info">
                <field-visibility>
                    <show id="lecm-contractor:representative-to-certifying-document-association"/>
                    <show id="lecm-contractor:legal-address"/>
                    <show id="lecm-contractor:OGRN"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-contractor:representative-to-certifying-document-association">
                        <control template="/ru/it/lecm/base-share/components/controls/substitude-control.ftl">
                            <control-param name="formatString">{lecm-contractor:representative-to-certifying-document-association/} {lecm-contractor:document-series} {lecm-contractor:document-number}</control-param>
                            <control-param name="emptyValueKey">form.control.novalue</control-param>
                        </control>
                    </field>
                    <field id="lecm-contractor:legal-address" label-id="title.physical_person_legal_address"/>
                </appearance>
            </form>
        </forms>
    </config>

    <!-- Регионы -->
    <config evaluator="model-type" condition="lecm-contractor:region-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:title"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>
    <config evaluator="node-type" condition="lecm-contractor:region-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:title"/>
                </field-visibility>
                <appearance>
                    <field id="cm:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>
</alfresco-config>
