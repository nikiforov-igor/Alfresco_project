<?xml version="1.0" encoding="UTF-8"?>
<ds.config>
    <report.descriptor mnem="incoming-reg-journal">
        <l18>
            <item key="RU_RU" value="Журнал регистрации входящих документов"/>
        </l18>
        <provider javaClass="ru.it.lecm.reports.generators.GenericDSProviderBase" mnem="PROV_GENERIC_PROVIDER">
            <l18>
                <item key="RU_RU" value="genericProvider"/>
            </l18>
        </provider>
        <templates>
            <template type="JASPER" filename="incoming-reg-journal_tmpl.jrxml" mnem="tmpl">
                <l18>
                    <item key="RU_RU" value="123"/>
                </l18>
            </template>
        </templates>
        <datasource.descriptor>
            <l18>
                <item key="RU_RU" value="714f3a9a-a8c9-4228-b61a-2154b22f3e0a"/>
            </l18>
        </datasource.descriptor>
        <roles>DA_REGISTRARS,DA_RECIPIENT_DYN,INCOMING_REVIEWERS,INCOMING_REVIEWERS_IN_UNIT,INCOMING_REVIEWER_DYN</roles>
    </report.descriptor>

    <query.descriptor>
        <queryText><![CDATA[TYPE:"lecm-incoming:document" AND @lecm\-document\-aspects\:reg\-data\-is\-registered:true]]></queryText>
        <querySort>col_ReceiveDate|ASC</querySort>
        <allVersions>true</allVersions>
        <preferedType>lecm-incoming:document</preferedType>
        <isMultiRow>true</isMultiRow>
        <isCustom>false</isCustom>
    </query.descriptor>

    <fields>
        <!-- Parameters-->
        <field jrFldName="dateReg" order="0" queryFldName="{lecm-document:doc-date}" displayName="Дата регистрации"
               javaValueClass="java.util.Date" alfrescoType="d:date">
            <parameter mnem="PARAM_TYPE_RANGE" paramType="PARAM_TYPE_RANGE">
                <l18>
                    <item key="RU_RU" value="Диапазон"/>
                </l18>
                <label1>
                    <item key="RU_RU" value="С"/>
                </label1>
                <label2>
                    <item key="RU_RU" value="По"/>
                </label2>
            </parameter>
        </field>
        <!-- Fields -->
        <field alfrescoType="d:date" displayName="Дата получения"
               queryFldName="{cm:created}" javaValueClass="java.util.Date" jrFldName="col_ReceiveDate">
            <l18>
                <item key="RU_RU" value="Дата получения"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Рег. номер"
               queryFldName="{~REGNUM}" jrFldName="col_RegNum">
            <l18>
                <item key="RU_RU" value="Рег. номер"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Корреспондент"
               queryFldName="{lecm-incoming:sender-assoc/lecm-contractor:fullname}" jrFldName="col_Contragent">
            <l18>
                <item key="RU_RU" value="Корреспондент"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Исх. номер"
               queryFldName="{lecm-incoming:outgoing-number}" jrFldName="col_OutNumber">
            <l18>
                <item key="RU_RU" value="Исх. номер"/>
            </l18>
        </field>

        <field alfrescoType="d:date" displayName="Исх. дата"
               queryFldName="{lecm-incoming:outgoing-date}"
                    javaValueClass="java.util.Date" jrFldName="col_OutDate">
            <l18>
                <item key="RU_RU" value="Исх. дата"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Заголовок"
               queryFldName="{lecm-document:title}" jrFldName="col_Title">
            <l18>
                <item key="RU_RU" value="Заголовок"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Исполнитель"
               queryFldName="{lecm-incoming:recipient-assoc/cm:name}" jrFldName="col_Recipient">
            <l18>
                <item key="RU_RU" value="Исполнитель"/>
            </l18>
        </field>

        <field alfrescoType="d:date" displayName="Срок исполнения"
               queryFldName="{lecm-eds-document:execution-date}"
               javaValueClass="java.util.Date" jrFldName="col_ExecDate">
            <l18>
                <item key="RU_RU" value="Срок исполнения"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Вид документа"
               queryFldName="{lecm-eds-document:document-type-assoc/cm:name}" jrFldName="col_DocType">
            <l18>
                <item key="RU_RU" value="Вид документа"/>
            </l18>
        </field>

        <field alfrescoType="d:text" displayName="Статус"
               queryFldName="{lecm-statemachine:status}" jrFldName="col_Status">
            <l18>
                <item key="RU_RU" value="Статус"/>
            </l18>
        </field>
    </fields>
</ds.config>
