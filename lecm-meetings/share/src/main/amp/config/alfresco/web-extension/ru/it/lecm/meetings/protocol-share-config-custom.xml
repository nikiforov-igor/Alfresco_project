<alfresco-config>
	<config evaluator="node-type" condition="lecm-protocol:document">
		<forms>
			<form>
				<view-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
				<edit-form template="/ru/it/lecm/base-share/components/base-form-tabs.ftl" />
				<field-visibility>
					<!-- Заголовок -->
					<show id="lecm-document:title"/>
					<!--Вид документа-->
					<show id="lecm-eds-document:document-type-assoc"/>
					<!--Срок исполнения-->
					<show id="lecm-eds-document:execution-date"/>
					<!--Содержание-->
					<show id="lecm-eds-document:summaryContent"/>
					<!--Председатель совещания-->
					<show id="lecm-protocol:meeting-chairman-assoc"/>
					<!--Примечание-->
					<show id="lecm-eds-document:note"/>
					<!--Тематика-->
					<show id="lecm-document:subject-assoc"/>
					<!--Дело-->
					<show id="lecm-eds-document:file-register-assoc"/>
					<!--Пункты-->
					<show id="lecm-protocol-ts:points-assoc"/>
					<!--Список согласующих-->
					<show id="lecm-contract:approval" force="true"/>
				</field-visibility>
				<appearance>
					<set id="common" label-id="label.attributes"/>
					<set id="points" label-id="label.points"/>
					<set id="approvalTab" appearance="" label-id="label.approval"/>
					
					<field id="lecm-document:title" set="common" />
					<field id="lecm-eds-document:document-type-assoc" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Вид_x0020_протокола</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
					</field>
					<field id="lecm-eds-document:execution-date" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/date.ftl">
                            <control-param name="minLimitCurrentDate">true</control-param>
                        </control>
					</field>
					<field id="lecm-eds-document:summaryContent" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
					</field>
					<field id="lecm-protocol:meeting-chairman-assoc" set="common"/>
					<field id="lecm-eds-document:note" set="common">
						<control template="/ru/it/lecm/base-share/components/controls/textarea.ftl">
                            <control-param name="rows">4</control-param>
                        </control>
					</field>
					<field id="lecm-document:subject-assoc" set="common"/>
					<field id="lecm-eds-document:file-register-assoc" set="common"/>
					
					<!--Закладка "Пункты"-->
					<field id="lecm-protocol-ts:points-assoc" set="points">
						<control template="/ru/it/lecm/documents/controls/document-table-control.ftl">
							<control-param name="attributeForShow">lecm-document:indexTableRow</control-param>
							<control-param name="datagridFormId">points-datagrid</control-param>
							<control-param name="expandable">false</control-param>
							<!--<control-param name="expandDataSource">components/form?formId=table-structure-info</control-param>-->
							<control-param name="isTableSortable">false</control-param>
							<control-param name="refreshAfterCreate">true</control-param>
							<!--<control-param name="deleteMessageFunction"></control-param>-->
							<control-param name="editFormTitleMsg">protocol.item.edit.form.title</control-param>
							<control-param name="createFormTitleMsg">protocol.item.create.form.title</control-param>
							<control-param name="viewFormTitleMsg">protocol.item.view.form.title</control-param>
						</control>
					</field>
					
					<!--Список согласующих-->
					<field id="lecm-contract:approval" set="approvalTab">
						<control template="/ru/it/lecm/workflow/approval/controls/approval-list-datagrid-control.ftl"/>
					</field>
				</appearance>
			</form>
			<!-- Форма просмотра на главной странице-->
	        <form id="main-page-dashlets">
		        <field-visibility>
			        <show id="viewMetadata"/>
		        </field-visibility>
		        <appearance>
			        <field id="viewMetadata">
				        <control template="/ru/it/lecm/documents/controls/document-view-metadata-control.ftl"/>
			        </field>
		        </appearance>
	        </form>
			<!-- Форма с набором полей для правой области (Общие сведения) на карточке документа-->
			<form id="document">
				<field-visibility>
					<!--Заголовок--> 
					<show id="lecm-document:title"/>
					<!--Регистрационный номер-->
					<show id="lecm-document:regnum"/>
					<!--Дата регистрации-->
					<show id="lecm-document:doc-date"/>
					<!--Председатель-->
					<show id="lecm-protocol:meeting-chairman-assoc"/>
					<!--Статус-->
					<show id="lecm-statemachine:status"/>
				</field-visibility>
			</form>
			
		</forms>
	</config>
	
	<config evaluator="model-type" condition="lecm-protocol:document">
		<forms>
			<form>
				<field-visibility>
					<!-- Заголовок -->
					<show id="lecm-document:title"/>
					<!--Вид документа-->
					<show id="lecm-eds-document:document-type-assoc"/>
					<!--Срок исполнения-->
					<show id="lecm-eds-document:execution-date"/>
					<!--Содержание-->
					<show id="lecm-eds-document:summaryContent"/>
					<!--Подписанты-->
					<show id="lecm-protocol:signers-assoc"/>
					<!--Председатель совещания-->
					<show id="lecm-protocol:meeting-chairman-assoc"/>
					<!--Примечание-->
					<show id="lecm-eds-document:note"/>
					<!--Тематика-->
					<show id="lecm-document:subject-assoc"/>
					<!--Дело-->
					<show id="lecm-eds-document:file-register-assoc"/>
					
					<!--Вложения-->
					<show id="lecm-document-aspects:attachments-temp-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:title"/>
					<field id="lecm-eds-document:document-type-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Вид_x0020_протокола</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
					</field>
					<field id="lecm-eds-document:execution-date">
						<control template="/ru/it/lecm/base-share/components/controls/date.ftl">
                            <control-param name="minLimitCurrentDate">true</control-param>
                        </control>
					</field>
					<field id="lecm-eds-document:summaryContent">
						<control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
					</field>
					<field id="lecm-protocol:signers-assoc"/>
					<field id="lecm-protocol:meeting-chairman-assoc"/>
					<field id="lecm-eds-document:note">
						<control template="/ru/it/lecm/base-share/components/controls/textarea.ftl">
                            <control-param name="rows">4</control-param>
                        </control>
					</field>
					<field id="lecm-document:subject-assoc"/>
					<field id="lecm-eds-document:file-register-assoc"/>
					
					<field id="lecm-document-aspects:attachments-temp-assoc" label-id="meetings.attachments">
						<control template="/ru/it/lecm/base-share/components/controls/lecm-dnd-uploader-control-with-preview.ftl">
							<control-param name="uploadDirectoryPath">{usertemp}</control-param>
							<control-param name="directoryName">Вложения</control-param>
							<control-param name="suppressRefreshEvent">true</control-param>
						</control>
					</field>
					
				</appearance>
			</form>
			<form id="statemachine-editable-fields">
				<field-visibility>
					<!-- Заголовок -->
					<show id="lecm-document:title"/>
					<!--Вид документа-->
					<show id="lecm-eds-document:document-type-assoc"/>
					<!--Тематика-->
					<show id="lecm-document:subject-assoc"/>
					<!--Дело-->
					<show id="lecm-eds-document:file-register-assoc"/>
					<!--Содержание-->
					<show id="lecm-eds-document:summaryContent"/>
					<!--Примечание-->
					<show id="lecm-eds-document:note"/>
					<!--Пункты-->
					<show id="lecm-protocol-ts:points-assoc"/>
					<!--Список согласующих-->
					<show id="lecm-contract:approval"/>
				</field-visibility>
				<appearance>
					<field id="lecm-contract:approval" label-id="label.approval"/>
				</appearance>
			</form>
		</forms>
	</config>	
	
	<config evaluator="model-type" condition="lecm-protocol-ts:point">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-document:indexTableRow" force="true"/>
					<show id="lecm-protocol-ts:point-formulation" force="true"/>
					<show id="lecm-protocol-ts:reporter-assoc" force="true"/>
					<show id="lecm-protocol-ts:coreporter-assoc" force="true"/>
					<show id="lecm-protocol-ts:point-desc" force="true"/>
					<show id="lecm-protocol-ts:decision" force="true"/>
					<show id="lecm-protocol-ts:executor-assoc" force="true"/>
					<show id="lecm-protocol-ts:execution-date" force="true"/>
					<show id="lecm-protocol-ts:execution-date-real" force="true"/>
					<show id="lecm-protocol-ts:note" force="true"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:indexTableRow" force="true" />
					<field id="lecm-protocol-ts:point-formulation" />
					<field id="lecm-protocol-ts:reporter-assoc" />
					<field id="lecm-protocol-ts:coreporter-assoc" />
					<field id="lecm-protocol-ts:point-desc" >
						<control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
					</field>
					<field id="lecm-protocol-ts:decision" >
						<control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
					</field>
					<field id="lecm-protocol-ts:executor-assoc" />
					<field id="lecm-protocol-ts:execution-date" />
					<field id="lecm-protocol-ts:execution-date-real" />
					<field id="lecm-protocol-ts:note" >
						<control template="/ru/it/lecm/base-share/components/controls/textarea.ftl">
                            <control-param name="rows">4</control-param>
                        </control>
					</field>
				</appearance>
			</form>
			<form id="points-datagrid">
				<field-visibility>
					<show id="lecm-document:indexTableRow" force="true"/>
					<show id="lecm-protocol-ts:executor-assoc"/>
					<show id="lecm-protocol-ts:point-formulation"/>
					<show id="lecm-protocol-ts:point-status-assoc"/>
				</field-visibility>
			</form>
		</forms>
	</config>
	
	<config evaluator="node-type" condition="lecm-protocol-ts:point">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-document:indexTableRow" force="true"/>
					<show id="lecm-protocol-ts:point-status-assoc" force="true"/>
					<show id="lecm-protocol-ts:point-formulation" force="true"/>
					<show id="lecm-protocol-ts:reporter-assoc" force="true"/>
					<show id="lecm-protocol-ts:coreporter-assoc" force="true"/>
					<show id="lecm-protocol-ts:point-desc" force="true"/>
					<show id="lecm-protocol-ts:decision" force="true"/>
					<show id="lecm-protocol-ts:executor-assoc" force="true"/>
					<show id="lecm-protocol-ts:execution-date" force="true"/>
					<show id="lecm-protocol-ts:execution-date-real" force="true"/>
					<show id="lecm-protocol-ts:note" force="true"/>
				</field-visibility>
				<appearance>
					<set id="common"/>
				    <set id="item0" parent="common" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl"/>
					<set id="item1" parent="common" />
					
					<field id="lecm-document:indexTableRow" force="true" set="item0"/>
					<field id="lecm-protocol-ts:point-status-assoc" read-only="true" set="item0">
						<control template="/ru/it/lecm/base-share/components/controls/substitude-control.ftl">
                            <control-param name="formatString">{lecm-protocol-ts:point/cm:name}</control-param>
                        </control>
					</field>
					<field id="lecm-protocol-ts:point-formulation" set="item1"/>
					<field id="lecm-protocol-ts:reporter-assoc" set="item1"/>
					<field id="lecm-protocol-ts:coreporter-assoc" set="item1"/>
					<field id="lecm-protocol-ts:point-desc" set="item1">
						<control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
					</field>
					<field id="lecm-protocol-ts:decision" set="item1">
						<control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
					</field>
					<field id="lecm-protocol-ts:executor-assoc" set="item1"/>
					<field id="lecm-protocol-ts:execution-date" set="item1"/>
					<field id="lecm-protocol-ts:execution-date-real" set="item1"/>
					<field id="lecm-protocol-ts:note" set="item1">
						<control template="/ru/it/lecm/base-share/components/controls/textarea.ftl">
                            <control-param name="rows">4</control-param>
                        </control>
					</field>
				</appearance>
			</form>
			<form id="points-datagrid">
				<field-visibility>
					<show id="lecm-document:indexTableRow" force="true"/>
					<show id="lecm-protocol-ts:executor-assoc"/>
					<show id="lecm-protocol-ts:point-formulation"/>
					<show id="lecm-protocol-ts:point-status"/>
				</field-visibility>
			</form>
		</forms>
	</config>
</alfresco-config>