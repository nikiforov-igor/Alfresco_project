<alfresco-config>
    <config>
        <forms>
            <dependencies>
                <js src="/scripts/lecm-errands/errands-const.js" />
	            <js src="/scripts/lecm-errands/constraints/errands-request-cancel-new-executor-validator.js"/>
	            <js src="/scripts/lecm-errands/constraints/errands-request-change-due-date-validator.js"/>
            </dependencies>
           <default-controls>
                <type name="association:lecm-errands-dic:errand-titles" template="/ru/it/lecm/base-share/components/controls/lecm-association-autocomplete-text-control.ftl">
                    <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Заголовки_x0020_поручений</control-param>
                    <control-param name="itemType">lecm-errands-dic:errand-titles</control-param>
                    <control-param name="nameSubstituteString">{cm:name}</control-param>
                    <control-param name="notSelectedOptionShow">true</control-param>
                    <control-param name="notSelectedOptionLabel"> </control-param>
                    <control-param name="showCreateNewLink">false</control-param>
                    <control-param name="showCreateNewButton">false</control-param>
                </type>
            </default-controls>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-errands:document">
        <forms>
            <form>
                <field-visibility>
                    <!-- Важное -->
                    <show id="lecm-errands:is-important"/>
                    <!-- Статус -->
                    <show id="lecm-statemachine:status" force="true"/>
                    <!-- Инициатор -->
                    <show id="lecm-errands:initiator-assoc"/>
                    <!-- Срок исполнения -->
                    <show id="lecm-errands:limitation-date"/>
                    <!--  Заголовок поручения -->
                    <show id="lecm-errands:title"/>
                    <!-- Исполнитель -->
                    <show id="lecm-errands:executor-assoc"/>
                    <!-- Срок завершения поручения -->
                    <show id="lecm-errands:end-date"/>
                    <!-- Контроллер -->
                    <show id="lecm-errands:controller-assoc"/>
                    <!-- Дата начала -->
                    <show id="lecm-errands:start-date"/>
                    <!-- Содержание -->
                    <show id="lecm-errands:content"/>
                    <!-- Соисполнители -->
                    <show id="lecm-errands:coexecutors-assoc"/>
                    <!-- Автор поручения -->
                    <show id="lecm-document:creator"/>
                    <!-- Тематика -->
                    <show id="lecm-errands:subject-assoc"/>
                    <!-- Разделительная линия -->
                    <show id="lecm-errands:line"/>
                    <!-- Дата исполнения -->
                    <show id="lecm-errands:execution-date"/>
                    <!-- Отчет об исполнении -->
                    <show id="lecm-errands:execution-report"/>
                </field-visibility>
                <appearance>
                    <set id="set0" appearance="" template="/ru/it/lecm/base-share/components/statuses-set.ftl" />
                    <set id="set1" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />
                    <set id="set2" appearance="" />
                    <set id="set3" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />
                    <set id="set4" appearance="" />
                    <set id="set5" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />
                    <set id="set6" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />
                    <set id="set7" appearance="" />

                    <field id="lecm-errands:is-important" set="set0">
                        <control template="/ru/it/lecm/base-share/components/controls/important.ftl" />
                    </field>
                    <field id="lecm-statemachine:status" set="set0">
                        <control template="/ru/it/lecm/base-share/components/controls/status.ftl" />
                    </field>
                    <field id="lecm-errands:initiator-assoc" set="set1">           \
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
                            <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="employeeAbsenceMarker">true</control-param>
                            <control-param name="childrenDataSource">lecm/errands/initiator/picker</control-param>
                            <control-param name="defaultValueDataSource">lecm/errands/getDefaultInitiator</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:limitation-date" set="set1"/>
                    <field id="lecm-errands:title" set="set2">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-association-autocomplete-text-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Заголовки_x0020_поручений</control-param>
                            <control-param name="itemType">lecm-errands-dic:errand-titles</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:executor-assoc" set="set3"/>
                    <field id="lecm-errands:end-date" set="set3"/>
                    <field id="lecm-errands:controller-assoc" set="set3"/>
                    <field id="lecm-errands:start-date" set="set3"/>
                    <field id="lecm-errands:content" set="set4">
                        <control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
                    </field>
                    <field id="lecm-errands:coexecutors-assoc" set="set5"/>
                    <field id="lecm-document:creator" set="set6"/>
                    <field id="lecm-errands:subject-assoc" set="set6">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тематика</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="defaultValueDataSource">lecm/errands/getDefaultSubject</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:line" set="set7">
                        <control template="/ru/it/lecm/base-share/components/controls/line.ftl"/>
                    </field>
                    <field id="lecm-errands:execution-date" set="set7"/>
                    <field id="lecm-errands:execution-report" set="set7">
                        <control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="document-dashlet">
                <field-visibility>
                    <!--  Заголовок поручения -->
                    <show id="lecm-errands:title"/>
                    <!-- Инициатор -->
                    <show id="lecm-errands:initiator-assoc"/>
                    <!-- Срок исполнения -->
                    <show id="lecm-errands:limitation-date"/>
                    <!-- Важное -->
                    <show id="lecm-errands:is-important"/>
                </field-visibility>
            </form>
            <form id="document">
                <field-visibility>
                    <!--  Заголовок поручения -->
                    <show id="lecm-errands:title"/>
                    <!-- Инициатор -->
                    <show id="lecm-errands:initiator-assoc"/>
                    <!-- Срок исполнения -->
                    <show id="lecm-errands:limitation-date"/>
                    <!-- Важное -->
                    <show id="lecm-errands:is-important"/>
                </field-visibility>
            </form>
            <form id="transfer-right">
                <field-visibility>
                    <show id="lecm-document:employee-ref"/>
                    <show id="lecm-document:istransmit" />
                    <show id="lecm-document:deprive-right" />
                </field-visibility>
                <appearance>
                    <field id="lecm-document:employee-ref" label-id="contract.creator-ref" mandatory="true">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="itemType">lecm-orgstr:employee</control-param>
                            <control-param name="employeeAbsenceMarker">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-document:istransmit" label-id="contract.istransmit" />
                    <field id="lecm-document:deprive-right" label-id="contract.deprive.right" />
                </appearance>
            </form>
            <form id="errands-dnd">
                <field-visibility>
                    <show id="lecm-errands:attachments-temp-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-errands:attachments-temp-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-dnd-uploader-control.ftl">
                            <control-param name="uploadDirectoryPath">{userhome}</control-param>
                            <control-param name="directoryName">label.errands.attachments</control-param>
                            <control-param name="showAttsLabel">false</control-param>
                            <control-param name="showAttsList">false</control-param>
                            <control-param name="autoSubmit">true</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-errands:document">
        <forms>
            <form>
                <field-visibility>
                    <!-- Исполнитель -->
                    <show id="lecm-errands:executor-assoc"/>
                    <!-- Важное -->
                    <show id="lecm-errands:is-important"/>
                    <!--  Заголовок поручения -->
                    <show id="lecm-errands:title"/>
                    <!-- Содержание -->
                    <show id="lecm-errands:content"/>
                    <!-- Срок исполнения -->
                    <show id="lecm-errands:limitation-date"/>
                    <!--  Вложения -->
	                <show id="lecm-errands:attachments-temp-assoc"/>
                    <!-- Тематика -->
                    <show id="lecm-errands:subject-assoc"/>
                    <!-- Инициатор -->
                    <show id="lecm-errands:initiator-assoc"/>
                    <!-- Без утверждения инициатором -->
                    <show id="lecm-errands:without-initiator-approval"/>
                    <!-- Контроллер -->
                    <show id="lecm-errands:controller-assoc"/>
                    <!-- Соисполнители -->
                    <show id="lecm-errands:coexecutors-assoc"/>
                    <!-- Дата начала -->
                    <show id="lecm-errands:start-date"/>
                    <!-- Исполнить точно в срок  -->
                    <show id="lecm-errands:just-in-time"/>
                    <!-- Свернута ли форма  -->
                    <show id="lecm-errands:is-short"/>
                </field-visibility>
                <appearance>
                    <set id="top-set" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />
                    <set id="main" appearance="" />
                    <set id="collapsable" appearance="" template="/ru/it/lecm/base-share/components/collapsable-set.ftl" />
                    <set id="exist-bussines-role" parent="collapsable" appearance="ERRANDS_CHOOSING_INITIATOR" template="/ru/it/lecm/base-share/components/exist-bussines-role.ftl" />
                    <set id="collapsable-inner" parent="collapsable" appearance=""/>
                    <set id="start-date-set" parent="collapsable" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />

                    <field id="lecm-errands:executor-assoc" set="top-set">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
                            <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
                            <control-param name="selectedItemsNameSubstituteString">{lecm-orgstr:employee-short-name}</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="employeeAbsenceMarker">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:is-important" set="top-set">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl"/>
                    </field>
                    <field id="lecm-errands:title" set="main">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-association-autocomplete-text-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Заголовки_x0020_поручений</control-param>
                            <control-param name="itemType">lecm-errands-dic:errand-titles</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:content" set="main">
                        <control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
                    </field>
                    <field id="lecm-errands:limitation-date" set="main"/>
                    <field id="lecm-errands:attachments-temp-assoc" set="main">
		                <control template="/ru/it/lecm/base-share/components/controls/lecm-dnd-uploader-control.ftl">
			                <control-param name="uploadDirectoryPath">{userhome}</control-param>
			                <control-param name="directoryName">label.errands.attachments</control-param>
		                </control>
	                </field>
                    <field id="lecm-errands:subject-assoc" set="collapsable">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тематика</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
	                        <control-param name="defaultValueDataSource">lecm/errands/getDefaultSubject</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:initiator-assoc" set="exist-bussines-role">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
                            <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="employeeAbsenceMarker">true</control-param>
                            <control-param name="childrenDataSource">lecm/errands/initiator/picker</control-param>
                            <control-param name="defaultValueDataSource">lecm/errands/getDefaultInitiator</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:without-initiator-approval" set="collapsable-inner">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl">
	                        <control-param name="defaultValueDataSource">lecm/errands/getDefaultWithoutInitiatorApproval</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:controller-assoc" set="collapsable-inner"/>
                    <field id="lecm-errands:coexecutors-assoc" set="collapsable-inner"/>
                    <field id="lecm-errands:start-date" set="start-date-set"/>
                    <field id="lecm-errands:just-in-time" set="start-date-set">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl"/>
                    </field>
                    <field id="lecm-errands:is-short" set="collapsable">
                        <control template="/org/alfresco/components/form/controls/hidden.ftl"/>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-errands:is-important"/>
                    <show id="lecm-errands:baseDocString"/>
                    <show id="lecm-errands:number"/>
                    <show id="lecm-errands:title"/>
                    <show id="lecm-errands:is-expired"/>
                    <show id="lecm-errands:initiator-assoc"/>
                    <show id="lecm-errands:executor-assoc"/>
                    <show id="lecm-errands:execution-date"/>
                    <show id="lecm-statemachine:status" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-errands:is-important" label=""/>
                    <field id="lecm-errands:baseDocString" label="" substituteString="{lecm-errands:additional-document-assoc/lecm-document:present-string}"/>
                    <field id="lecm-errands:initiator-assoc"/>
                    <field id="lecm-errands:executor-assoc"/>
                    <field id="lecm-errands:execution-date"/>
                    <field id="lecm-errands:title"/>
                    <field id="lecm-statemachine:status" force="true"/>
                    <field id="lecm-errands:number" label-id="errands.number"/>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-errands:initiator-assoc"/>
                    <show id="lecm-errands:executor-assoc"/>
                    <show id="cm:created"/>
                    <show id="lecm-errands:execution-date"/>
                    <show id="lecm-errands:number"/>
                    <show id="lecm-errands:title"/>
                    <show id="lecm-errands:is-important"/>
                    <show id="lecm-errands:is-expired"/>
                    <show id="lecm-errands:base-doc-number"/>
                </field-visibility>
                <appearance>
                    <field id="cm:created">
                        <control template="/org/alfresco/components/form/controls/daterange.ftl"/>
                    </field>
                    <field id="lecm-errands:execution-date">
                        <control template="/org/alfresco/components/form/controls/daterange.ftl"/>
                    </field>
                    <field id="lecm-errands:title">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="hideValue"/>
                            <control-param name="mandatory">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:number">
                        <control template="/ru/it/lecm/base-share/components/controls/textfield.ftl">
                            <control-param name="hideValue"/>
                        </control>
                    </field>
                    <field id="lecm-errands:executor-assoc">
                    <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                        <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
                        <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
                        <control-param name="showCreateNewLink">false</control-param>
                        <control-param name="showCreateNewButton">false</control-param>
                        <control-param name="employeeAbsenceMarker">true</control-param>
                        <control-param name="mandatory">false</control-param>
                    </control>
                    </field>
                </appearance>
            </form>
            <form id="additional-document">
                <field-visibility>
                    <!-- Исполнитель -->
                    <show id="lecm-errands:executor-assoc"/>
                    <!-- Важное -->
                    <show id="lecm-errands:is-important"/>
                    <!--  Заголовок поручения -->
                    <show id="lecm-errands:title"/>
                    <!-- Содержание -->
                    <show id="lecm-errands:content"/>
                    <!-- Срок исполнения -->
                    <show id="lecm-errands:limitation-date"/>
                    <!--  Вложения -->
                    <show id="lecm-errands:attachments-temp-assoc"/>
                    <!-- Тематика -->
                    <show id="lecm-errands:subject-assoc"/>
                    <!-- Инициатор -->
                    <show id="lecm-errands:initiator-assoc"/>
                    <!-- Без утверждения инициатором -->
                    <show id="lecm-errands:without-initiator-approval"/>
                    <!-- Контроллер -->
                    <show id="lecm-errands:controller-assoc"/>
                    <!-- Соисполнители -->
                    <show id="lecm-errands:coexecutors-assoc"/>
                    <!-- Дата начала -->
                    <show id="lecm-errands:start-date"/>
                    <!-- Исполнить точно в срок  -->
                    <show id="lecm-errands:just-in-time"/>
                    <!-- Свернута ли форма  -->
                    <show id="lecm-errands:is-short"/>
                    <!-- Ссылка на документ основание  -->
                    <show id="lecm-errands:additional-document-assoc"/>
                </field-visibility>
                <appearance>
                    <set id="top-set" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />
                    <set id="main" appearance="" />
                    <set id="collapsable" appearance="" template="/ru/it/lecm/base-share/components/collapsable-set.ftl" />
                    <set id="exist-bussines-role" parent="collapsable" appearance="ERRANDS_CHOOSING_INITIATOR" template="/ru/it/lecm/base-share/components/exist-bussines-role.ftl" />
                    <set id="collapsable-inner" parent="collapsable" appearance=""/>
                    <set id="start-date-set" parent="collapsable" appearance="" template="/ru/it/lecm/base-share/components/2-columns-set-with-nested.ftl" />

                    <field id="lecm-errands:executor-assoc" set="top-set"/>
                    <field id="lecm-errands:is-important" set="top-set">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl"/>
                    </field>
                    <field id="lecm-errands:title" set="main">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-association-autocomplete-text-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Заголовки_x0020_поручений</control-param>
                            <control-param name="itemType">lecm-errands-dic:errand-titles</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:content" set="main">
                        <control template="/ru/it/lecm/base-share/components/controls/richtext.ftl"/>
                    </field>
                    <field id="lecm-errands:limitation-date" set="main"/>
                    <field id="lecm-errands:attachments-temp-assoc" set="main">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-dnd-uploader-control.ftl">
                            <control-param name="uploadDirectoryPath">{userhome}</control-param>
                            <control-param name="directoryName">label.errands.attachments</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:subject-assoc" set="collapsable">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тематика</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="defaultValueDataSource">lecm/errands/getDefaultSubject</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:initiator-assoc" set="exist-bussines-role">
                        <control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
                            <control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
                            <control-param name="showCreateNewLink">false</control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                            <control-param name="employeeAbsenceMarker">true</control-param>
                            <control-param name="childrenDataSource">lecm/errands/initiator/picker</control-param>
                            <control-param name="defaultValueDataSource">lecm/errands/getDefaultInitiator</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:without-initiator-approval" set="collapsable-inner">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl">
                            <control-param name="defaultValueDataSource">lecm/errands/getDefaultWithoutInitiatorApproval</control-param>
                        </control>
                    </field>
                    <field id="lecm-errands:controller-assoc" set="collapsable-inner"/>
                    <field id="lecm-errands:coexecutors-assoc" set="collapsable-inner"/>
                    <field id="lecm-errands:start-date" set="start-date-set"/>
                    <field id="lecm-errands:just-in-time" set="start-date-set">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-checkbox-control.ftl"/>
                    </field>
                    <field id="lecm-errands:is-short" set="collapsable">
                        <control template="/org/alfresco/components/form/controls/hidden.ftl"/>
                    </field>
                    <field id="lecm-errands:additional-document-assoc" set="main">
                        <control template="/ru/it/lecm/errands/controls/additional-document-assoc.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

	<config evaluator="node-type" condition="lecm-errands-dic:errand-titles">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" force="true"/>
					<show id="lecm-errands-dic:errand-title-code" force="true"/>
				</field-visibility>
				<appearance>
					<field id="lecm-errands-dic:errand-title-code" read-only="true"/>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-errands-dic:errand-titles">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name" force="true"/>
					<show id="lecm-errands-dic:errand-title-code" force="true"/>
				</field-visibility>
				<appearance>
					<field id="lecm-errands-dic:errand-title-code">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="LECMUNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="cm:name" force="true"/>
					<show id="lecm-errands-dic:errand-title-code" force="true"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-errands:settings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-errands:settings-mode-choosing-executors"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-errands:settings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-errands:settings-mode-choosing-executors"/>
				</field-visibility>
			</form>
		</forms>
	</config>

	<config evaluator="node-type" condition="lecm-errands:user-settings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-errands:user-settings-without-initiator-approval"/>
					<show id="lecm-errands:user-settings-default-initiator-assoc"/>
					<show id="lecm-errands:user-settings-default-subject-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-errands:user-settings-default-initiator-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="childrenDataSource">lecm/errands/initiator/picker</control-param>
						</control>
					</field>
					<field id="lecm-errands:user-settings-default-subject-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тематика</control-param>
							<control-param name="nameSubstituteString">{cm:name}</control-param>
							<control-param name="notSelectedOptionShow">true</control-param>
							<control-param name="notSelectedOptionLabel"> </control-param>
							<control-param name="showCreateNewButton">false</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-errands:user-settings">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-errands:user-settings-without-initiator-approval"/>
					<show id="lecm-errands:user-settings-default-initiator-assoc"/>
					<show id="lecm-errands:user-settings-default-subject-assoc"/>
				</field-visibility>
				<appearance>
					<field id="lecm-errands:user-settings-default-initiator-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
							<control-param name="childrenDataSource">lecm/errands/initiator/picker</control-param>
						</control>
					</field>
					<field id="lecm-errands:user-settings-default-subject-assoc">
						<control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тематика</control-param>
							<control-param name="nameSubstituteString">{cm:name}</control-param>
							<control-param name="notSelectedOptionShow">true</control-param>
							<control-param name="notSelectedOptionLabel"> </control-param>
							<control-param name="showCreateNewButton">false</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="string-compare" condition="activiti$errandsRemoveDraft">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$errandsCreateChildErrand">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>









    <config evaluator="string-compare" condition="activiti$errandsRequestDueDateChange">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                    <show id="lecmErrandWf:requestDueDateChangeNewDate"/>
                    <show id="lecmErrandWf:requestDueDateChangeReason"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
	                <field id="lecmErrandWf:requestDueDateChangeReason">
		                <control template="/org/alfresco/components/form/controls/textarea.ftl">
			                <control-param name="rows">7</control-param>
		                </control>
	                </field>
                </appearance>
            </form>
        </forms>
    </config>

	<config evaluator="task-type" condition="lecmErrandWf:requestDueDateChangeTask">
		<forms>
			<form>
				<field-visibility>
					<show id="lecmErrandWf:requestDueDateChangeTaskNewDate"/>
					<show id="lecmErrandWf:requestDueDateChangeTaskDateReason"/>
					<show id="lecmErrandWf:requestDueDateChangeTaskComment"/>
					<show id="lecmErrandWf:requestDueDateChangeTaskResult"/>
				</field-visibility>
				<appearance>
					<field id="lecmErrandWf:requestDueDateChangeTaskNewDate" mandatory="true">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.Errands.requestChangeDueDateTaskNewDateValidation" event="change"/>
						</constraint-handlers>
					</field>
					<field id="lecmErrandWf:requestDueDateChangeTaskDateReason" read-only="true">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="rows">7</control-param>
						</control>
					</field>
					<field id="lecmErrandWf:requestDueDateChangeTaskComment">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="rows">7</control-param>
						</control>
					</field>
					<field id="lecmErrandWf:requestDueDateChangeTaskResult" mandatory="true">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.Errands.requestChangeDueDateTaskNewDateValidation" event="change"/>
						</constraint-handlers>
						<control template="/ru/it/lecm/base-share/components/controls/activiti-transitions-radiobuttons.ftl" />
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="string-compare" condition="activiti$errandsChangeDueDate">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$errandsChangeExecutor">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
	                <show id="lecmErrandWf:changeExecutorCurrentExecutor" />
	                <show id="lecmErrandWf:changeExecutorNewExecutor"/>
	                <show id="lecmErrandWf:changeExecutorReason"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
	                <field id="lecmErrandWf:changeExecutorCurrentExecutor" label-id="field.changeExecutorCurrentExecutor.title">
		                <control template="/ru/it/lecm/documents/controls/workflow/format-packageItems-document.ftl">
			                <control-param name="substituteString">
				                <![CDATA[
					                <a href='/share/page/view-metadata?nodeRef={lecm-errands:executor-assoc/nodeRef}'>
					                    {lecm-errands:executor-assoc/lecm-orgstr:employee-short-name} {lecm-errands:executor-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}
					                </a>
				                ]]>
			                </control-param>
		                </control>
	                </field>
	                <field id="lecmErrandWf:changeExecutorReason">
		                <control template="/org/alfresco/components/form/controls/textarea.ftl">
			                <control-param name="rows">7</control-param>
		                </control>
	                </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$errandsChangeController">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$errandsRequestCancel">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
	                <show id="lecmErrandWf:requestCancelReason"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
	                <field id="lecmErrandWf:requestCancelReason">
		                <control template="/org/alfresco/components/form/controls/textarea.ftl">
			                <control-param name="rows">7</control-param>
		                </control>
	                </field>
                </appearance>
            </form>
        </forms>
    </config>

	<config evaluator="task-type" condition="lecmErrandWf:requestCancelTask">
		<forms>
			<form>
				<field-visibility>
					<show id="lecmErrandWf:requestCancelTaskTitle" />
					<show id="lecmErrandWf:requestCancelTaskReason" />
					<show id="lecmErrandWf:requestCancelTaskResult" />
					<show id="lecmErrandWf:requestCancelTaskNewExecutor" />
				</field-visibility>
				<appearance>
					<field id="lecmErrandWf:requestCancelTaskTitle">
						<control template="/ru/it/lecm/base-share/components/controls/view-text-control.ftl">
							<control-param name="showLabel">false</control-param>
						</control>
					</field>
					<field id="lecmErrandWf:requestCancelTaskReason" read-only="true">
						<control template="/org/alfresco/components/form/controls/textarea.ftl">
							<control-param name="rows">7</control-param>
						</control>
					</field>
					<field id="lecmErrandWf:requestCancelTaskResult" mandatory="true">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.Errands.requestCancelTaskNewExecutorValidation" event="change"/>
						</constraint-handlers>
						<control template="/ru/it/lecm/base-share/components/controls/activiti-transitions-radiobuttons.ftl" />
					</field>
					<field id="lecmErrandWf:requestCancelTaskNewExecutor" mandatory="true">
						<constraint-handlers>
							<constraint type="MANDATORY" validation-handler="LogicECM.module.Errands.requestCancelTaskNewExecutorValidation" event="change"/>
						</constraint-handlers>
						<control template="/ru/it/lecm/base-share/components/controls/association-autocomplete-control.ftl">
							<control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Структура_x0020_организации_x0020_и_x0020_сотрудников/cm:Организация/cm:Сотрудники</control-param>
							<control-param name="nameSubstituteString">{lecm-orgstr:employee-last-name} {lecm-orgstr:employee-first-name} {lecm-orgstr:employee-middle-name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name} {..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../../lecm-orgstr:element-short-name}</control-param>
							<control-param name="showCreateNewLink">false</control-param>
							<control-param name="showCreateNewButton">false</control-param>
							<control-param name="employeeAbsenceMarker">true</control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="string-compare" condition="activiti$errandsInitiatorDecline">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$errandsControllerDecline">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$errandsCancel">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>
</alfresco-config>