<alfresco-config>
    <!-- Document Library Actions config section -->
    <config evaluator="string-compare" condition="DocLibActions">
        <!-- Перегруженный ресолвер actionGroups (ru.it.lecm.documents.resolvers.ActionsGroupResolver)-->
        <actionGroupResolver>lecm.resolver.doclib.actionGroup</actionGroupResolver>

        <!-- Список кастомных действий -->
        <actions>
            <action id="lecm-attach-to-document" type="javascript" label="label.action.attach-to-document">
		        <param name="function">onActionFormDialog</param>
		        <param name="itemKind">action</param>
		        <param name="itemId">attach-to-document</param>
		        <param name="mode">create</param>
		        <param name="destination">{node.nodeRef}</param>
		        <permissions>
			        <permission allow="true">Delete</permission>
		        </permissions>
		        <param name="successMessage">message.attachToDocument.success</param>
		        <param name="failureMessage">message.attachToDocument.failure</param>
		        <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
		        <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                <evaluator>evaluator.documents.mayCopyAttachment</evaluator>
	        </action>

            <action id="move-to-another-category" type="javascript" label="label.action.move-to-another-category">
                <param name="function">onActionMoveToNewCategory</param>
                <param name="itemKind">action</param>
                <param name="itemId">move-to-another-category</param>
                <param name="mode">create</param>
                <param name="destination">{nodeRef}</param>
                <param name="category">{meta.category}</param>
                <param name="document">{meta.document}</param>
                <permissions>
                    <permission allow="true">Delete</permission>
                </permissions>
                <param name="successMessage">message.moveToCategory.success</param>
                <param name="failureMessage">message.moveToCategory.failure</param>
                <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                <evaluator>evaluator.documents.mayCopyAttachment</evaluator>
            </action>
        </actions>

        <!-- Переопределенные группы -->
        <actionGroups>
            <actionGroup id="document-attachment">
                <action index="100" id="document-upload-new-version" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayAddAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="110" id="move-to-another-category"/>
                <action index="120" id="document-edit-online" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="130" id="document-download" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="140" id="document-delete" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayDeleteAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="150" id="document-view-content" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="160" id="document-edit-properties" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
            </actionGroup>

            <actionGroup id="document-attachment-preview">
                <action index="100" id="document-upload-new-version" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayAddAttachment</evaluator>
                </action>
                <action index="110" id="document-download" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="120" id="document-delete" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayDeleteAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="130" id="document-view-content" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="140" id="document-edit-properties" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
            </actionGroup>

            <actionGroup id="document-browse">
                <action index="100" id="document-upload-new-version" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayAddAttachment</evaluator>
                </action>
                <action index="110" id="document-download" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="120" id="document-delete" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayDeleteAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="130" id="document-copy-to" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayCopyAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="140" id="document-move-to" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayCopyAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="150" id="document-locate"/>
                <action index="160" id="document-edit-online" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="170" id="document-edit-offline" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="180" id="document-inline-edit" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="190" id="document-view-content" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="200" id="document-cancel-editing" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="210" id="document-view-original" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="220" id="document-view-working-copy" />
                <action index="230" id="document-edit-properties" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="250" id="document-view-in-source-repository" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="260" id="document-assign-workflow" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="270" id="document-approve" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="280" id="document-reject" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="290" id="lecm-attach-to-document"/>
            </actionGroup>

            <actionGroup id="document-details">
                <action index="100" id="document-upload-new-version" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayAddAttachment</evaluator>
                </action>
                <action index="110" id="document-edit-online" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="120" id="document-download" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="130" id="document-delete" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayDeleteAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="140" id="document-copy-to" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayCopyAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="150" id="document-move-to" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayCopyAttachment</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="160" id="document-edit-offline" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="170" id="document-inline-edit" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="180" id="document-view-content" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="190" id="document-cancel-editing" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="200" id="document-view-original" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="210" id="document-view-working-copy" />
                <action index="220" id="document-edit-metadata" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="240" id="document-view-in-source-repository" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="250" id="document-assign-workflow" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="260" id="document-approve" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="270" id="document-reject" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayViewAttachment</evaluator>
                </action>
                <action index="290" id="document-manage-repo-permissions" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="300" id="document-manage-aspects" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="310" id="document-change-type" appendEvaluators="true">
                    <evaluator>evaluator.documents.mayEditAttachment</evaluator>
                </action>
                <action index="320" id="lecm-attach-to-document"/>
            </actionGroup>

            <actionGroup id="folder-browse">
                <action index="100" id="folder-view-details" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="110" id="document-edit-properties" icon="folder-edit-properties" label="actions.folder.edit-metadata" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="120" id="document-approve" icon="folder-approve" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="130" id="document-reject" icon="folder-reject" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="140" id="document-locate" icon="document-locate" label="actions.folder.locate" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="150" id="document-copy-to" icon="folder-copy-to" label="actions.folder.copy-to" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="160" id="document-move-to" icon="folder-move-to" label="actions.folder.move-to" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="170" id="folder-manage-rules" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="180" id="document-delete" icon="folder-delete" label="actions.folder.delete" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <!--<action index="190" id="document-manage-site-permissions" icon="folder-manage-permissions" label="actions.folder.manage-permissions" />-->
                <action index="200" id="document-manage-repo-permissions" icon="folder-manage-permissions" label="actions.folder.manage-permissions" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="210" id="document-manage-aspects" label="actions.folder.manage-aspects" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="220" id="document-view-in-source-repository" label="actions.folder.view-source-repository" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
	            <action index="230" id="document-assign-workflow" icon="document-assign-workflow" label="actions.document.assign-workflow" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
            </actionGroup>

            <actionGroup id="folder-details">
                <action index="100" id="document-edit-metadata" icon="folder-edit-metadata" label="actions.folder.edit-metadata" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="110" id="document-approve" icon="folder-approve" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="120" id="document-reject" icon="folder-reject" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="130" id="document-copy-to" icon="folder-copy-to" label="actions.folder.copy-to" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="140" id="document-move-to" icon="folder-move-to" label="actions.folder.move-to" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="150" id="folder-manage-rules" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="160" id="document-delete" icon="folder-delete" label="actions.folder.delete" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                    <evaluator negate="true">evaluator.doclib.action.isLocked</evaluator>
                </action>
                <action index="180" id="document-manage-repo-permissions" icon="folder-manage-permissions" label="actions.folder.manage-permissions" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="190" id="document-manage-aspects" label="actions.folder.manage-aspects" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="200" id="document-change-type" label="actions.folder.change-type" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
                <action index="210" id="view-in-explorer" />
                <action index="220" id="document-view-in-source-repository" label="actions.folder.view-source-repository" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
	            <action index="230" id="document-assign-workflow"  icon="document-assign-workflow" label="actions.document.assign-workflow" appendEvaluators="true">
                    <evaluator negate="true">evaluator.ru.it.lecm.documents.isBase</evaluator>
                </action>
            </actionGroup>
        </actionGroups>
    </config>

    <config>
        <forms>
<!--
			<dependencies>
                <js src="/scripts/lecm-documents/documents-const.js"/>
                <js src="/scripts/components/document-component-base.js"/>
                <js src="/scripts/documents/connections/type-select.js"/>
                <js src="/scripts/documents/members/lecm-document-members.js"/>
                <js src="/scripts/grids/doc-members-datagrid.js"/>
                <js src="/scripts/components/format-packageItems-document.js"/>
	            <js src="/scripts/documents/tables/lecm-document-table.js"/>
                <js src="/scripts/lecm-documents/select-status-control.js"/>
                <js src="/scripts/lecm-documents/lecm-document-preview-control.js"/>
            </dependencies>
-->
            <default-controls>
                <type name="association:lecm-doc-dic:subjects" template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
                    <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Тематика</control-param>
                </type>
	            <type name="association:lecm-document:base" template="/ru/it/lecm/base-share/components/controls/association-complex-inline-control.ftl">
		            <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:Documents</control-param>
		            <control-param name="nameSubstituteString">{lecm-document:ext-present-string}&lt;/br&gt;{lecm-document:list-present-string}</control-param>
		            <control-param name="selectedItemsNameSubstituteString">{lecm-document:ext-present-string}</control-param>
		            <control-param name="changeItemsFireAction">changeConnectedDocument</control-param>
                    <control-param name="showSearch">true</control-param>
                    <control-param name="plane">true</control-param>
                </type>
                <type name="STATUS" template="/ru/it/lecm/documents/controls/select-status-control.ftl">
                    <control-param name="multiply">false</control-param>
                    <control-param name="withEmpty">true</control-param>
                </type>
	            <type name="association:lecm-doc-dic-dm:deliveryMethod" template="/ru/it/lecm/base-share/components/controls/association-control.ftl">
		            <control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Способ_x0020_доставки</control-param>
		            <control-param name="plane">true</control-param>
	            </type>
                <type name="association:lecm-connect:connection" template="/ru/it/lecm/documents/controls/connections/document-temp-connection.ftl"></type>
            </default-controls>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-document:attachmentsCategory">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-document:categoryAttachments"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document:categoryAttachments" label=""/>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="node-type" condition="lecm-connect-types:connection-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-connect-types:reverse-name"/>
                    <show id="lecm-connect-types:code"/>
                    <show id="lecm-connect-types:for-auto-create"/>
                </field-visibility>
	            <appearance>
	                <field id="lecm-connect-types:code" read-only="true"/>
	            </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-connect-types:connection-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-connect-types:reverse-name"/>
                    <show id="lecm-connect-types:code"/>
                    <show id="lecm-connect-types:for-auto-create"/>
                </field-visibility>
	            <appearance>
		            <field id="lecm-connect-types:code">
			            <control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
			            <constraint-handlers>
				            <constraint type="LECMUNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
			            </constraint-handlers>
		            </field>
	            </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-connect-types:reverse-name"/>
                    <show id="lecm-connect-types:code"/>
                    <show id="lecm-connect-types:for-auto-create"/>
                </field-visibility>
	            <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-connect-types:reverse-name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
		            <field id="lecm-connect-types:code" mandatory="false">
			            <control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
			            <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
			            </constraint-handlers>
		            </field>
                    <field id="lecm-connect-types:for-auto-create">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-empty.ftl">
                            <control-param name="options">true|Да,false|Нет</control-param>
                        </control>
		            </field>
	            </appearance>
            </form>

            <form id="datagrid">
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="lecm-connect-types:reverse-name"/>
                    <show id="lecm-connect-types:code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-connect-types:available-connection-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-connect-types:primary-document-type"/>
                    <show id="lecm-connect-types:connected-document-type"/>
                    <show id="lecm-connect-types:not-available-connection-types-assoc"/>
                    <show id="lecm-connect-types:recommended-connection-types-assoc"/>
                    <show id="lecm-connect-types:default-connection-type-assoc"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-connect-types:available-connection-type">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-connect-types:primary-document-type"/>
                    <show id="lecm-connect-types:connected-document-type"/>
                    <show id="lecm-connect-types:not-available-connection-types-assoc"/>
                    <show id="lecm-connect-types:recommended-connection-types-assoc"/>
                    <show id="lecm-connect-types:default-connection-type-assoc"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-connect-types:primary-document-type"/>
                    <show id="lecm-connect-types:connected-document-type"/>
                    <show id="lecm-connect-types:not-available-connection-types-assoc"/>
                    <show id="lecm-connect-types:recommended-connection-types-assoc"/>
                    <show id="lecm-connect-types:default-connection-type-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-connect-types:primary-document-type" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-connect-types:connected-document-type" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-connect-types:default-connection-type-assoc" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>

            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-connect-types:primary-document-type"/>
                    <show id="lecm-connect-types:connected-document-type"/>
                    <show id="lecm-connect-types:not-available-connection-types-assoc"/>
                    <show id="lecm-connect-types:recommended-connection-types-assoc"/>
                    <show id="lecm-connect-types:default-connection-type-assoc"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-connect:connection">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-connect:primary-document-assoc"/>
                    <show id="lecm-connect:connected-document-assoc"/>
                    <show id="lecm-connect:connection-type-assoc"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-connect:connection">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-connect:primary-document-assoc"/>
                    <show id="lecm-connect:connected-document-assoc"/>
                    <show id="lecm-connect:connection-type-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-connect:primary-document-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                    <field id="lecm-connect:connected-document-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-complex-inline-control.ftl">
                            <control-param name="rootLocation">/app:company_home</control-param>
                            <control-param name="nameSubstituteString">{lecm-document:ext-present-string}&lt;/br&gt;{lecm-document:list-present-string}</control-param>
                            <control-param name="selectedItemsNameSubstituteString">{lecm-document:ext-present-string}</control-param>
	                        <control-param name="changeItemsFireAction">changeConnectedDocument</control-param>
	                        <control-param name="additionalFilter">NOT @lecm\-statemachine\-aspects\:is\-draft:true</control-param>
                            <control-param name="showSearch">true</control-param>
                            <control-param name="plane">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-connect:connection-type-assoc">
                        <control template="/ru/it/lecm/documents/controls/connections/select-types.ftl">
                            <control-param name="startLocation">
                                /app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Типы_x0020_связи
                            </control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"></control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="connection-types-not-filtered">
                <field-visibility>
                    <show id="lecm-connect:connected-document-assoc"/>
                    <show id="lecm-connect:connection-type-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-connect:connected-document-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-complex-inline-control.ftl">
                            <control-param name="rootLocation">/app:company_home</control-param>
                            <control-param name="nameSubstituteString">{lecm-document:ext-present-string}&lt;/br&gt;{lecm-document:list-present-string}</control-param>
                            <control-param name="selectedItemsNameSubstituteString">{lecm-document:ext-present-string}</control-param>
                            <control-param name="changeItemsFireAction">changeConnectedDocument</control-param>
                            <control-param name="additionalFilter">NOT @lecm\-statemachine\-aspects\:is\-draft:true</control-param>
                            <control-param name="showSearch">true</control-param>
                            <control-param name="plane">true</control-param>
                        </control>
                    </field>
                    <field id="lecm-connect:connection-type-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Типы_x0020_связи</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-connect:connected-document-assoc"/>
                    <show id="lecm-connect:connection-type-assoc"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-connect:connection">
        <forms>
            <form id="connection-types-not-filtered">
                <field-visibility>
                    <show id="lecm-connect:connected-document-assoc"/>
                    <show id="lecm-connect:connection-type-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-connect:connected-document-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-complex-inline-control.ftl">
                            <control-param name="rootLocation">/app:company_home</control-param>
                            <control-param name="nameSubstituteString">{lecm-document:ext-present-string}&lt;/br&gt;{lecm-document:list-present-string}</control-param>
                            <control-param name="selectedItemsNameSubstituteString">{lecm-document:ext-present-string}</control-param>
                            <control-param name="changeItemsFireAction">changeConnectedDocument</control-param>
                            <control-param name="plane">true</control-param>
                            <control-param name="showSearch">true</control-param>
                            <control-param name="additionalFilter">NOT @lecm\-statemachine\-aspects\:is\-draft:true</control-param>
                        </control>
                    </field>
                    <field id="lecm-connect:connection-type-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/association-select-one-control.ftl">
                            <control-param name="startLocation">/app:company_home/cm:Business_x0020_platform/cm:LECM/cm:Сервис_x0020_Справочники/lecm-dic:Типы_x0020_связи</control-param>
                            <control-param name="nameSubstituteString">{cm:name}</control-param>
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"> </control-param>
                            <control-param name="showCreateNewButton">false</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-doc-members:member">
        <forms>
            <form>
                <field-visibility>
                    <!--<show id="lecm-doc-members:group"/>-->
                    <show id="lecm-doc-members:employee-assoc"/>
                </field-visibility>
                <!--<appearance>
                    <field id="lecm-doc-members:group">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscriptType">server</control-param>
                            <control-param name="webscript">/lecm/statemachine/editor/privileges</control-param>
                            <control-param name="withEmpty">true</control-param>
                        </control>
                    </field>
                </appearance>-->
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-doc-members:member-fio" force="true"/>
                    <show id="lecm-doc-members:member-position" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-doc-members:member-fio" substituteString="$includeRef{lecm-doc-members:employee-assoc/lecm-orgstr:employee-last-name} {lecm-doc-members:employee-assoc/lecm-orgstr:employee-first-name} {lecm-doc-members:employee-assoc/lecm-orgstr:employee-middle-name}"/>
                    <field id="lecm-doc-members:member-position" substituteString="{lecm-doc-members:employee-assoc/..lecm-orgstr:employee-link-employee-assoc(lecm-orgstr:employee-link-is-primary = true)/../lecm-orgstr:element-member-position-assoc/cm:name}"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-doc-members:member">
        <forms>
            <form>
                <field-visibility>
                    <!--<show id="lecm-doc-members:group"/>-->
                    <show id="lecm-doc-members:employee-assoc"/>
                </field-visibility>
            </form>
        </forms>
    </config>

	<config evaluator="model-type" condition="cm:content">
		<forms>
			<form id="attachments-dashlet-table">
				<field-visibility>
					<show id="cm:image"/>
					<show id="cm:name"/>
					<show id="lecm-document:creator"/>
					<show id="lecm-document:modifier"/>
					<show id="cm:versionLabel"/>
				</field-visibility>
				<appearance>
					<field id="cm:image" label=" "/>
					<field id="cm:name" label-id="label.attachmets.file.name"/>
					<field id="lecm-document:creator" label-id="label.attachmets.autor"/>
					<field id="lecm-document:modifier" label-id="label.attachmets.modifier"/>
					<field id="cm:versionLabel" label-id="label.attachmets.version"/>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="model-type" condition="lecm-document:base">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name"/>
                    <show id="cm:image"/>
                    <show id="lecm-document:present-string"/>
                    <show id="lecm-document:ext-present-string"/>
                    <show id="lecm-document:list-present-string"/>
                </field-visibility>
                <appearance>
                    <field id="cm:image" label=" "/>
                    <field id="cm:name" label=" "/>
                    <field id="lecm-document:present-string" label=" "/>
                    <field id="lecm-document:ext-present-string" label=" "/>
                </appearance>
            </form>
            <form id="datagrid-arm">
                <field-visibility>
                    <show id="cm:name"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name"/>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-document:present-string"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document:present-string"/>
                </appearance>
            </form>
            <form id="last-documents-list">
                <field-visibility>
                    <show id="cm:created" force="true"/>    //небольшой хак - выводится будет другое значение, от этого требуется только тип
                    <show id="lecm-document:doc-type" force="true"/>
                    <show id="lecm-document:title" force="true"/>
                    <show id="lecm-document:author-assoc" force="true"/>
                    <show id="lecm-document:present-string" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="cm:created" substituteString="{~EMPTY}" label-id="label.view-date"/>
                    <field id="lecm-document:present-string" label-id="label.present-string"/>
                </appearance>
            </form>
            <form id="searchQueryGrid">
                <field-visibility>
                    <show id="lecm-document:doc-type"/>
                    <show id="lecm-document:title"/>
                    <show id="lecm-document:regnum"/>
                    <show id="lecm-document:doc-date"/>
                    <show id="lecm-statemachine:status" force="true"/>
                </field-visibility>
            </form>
            <form id="search-editor-fields">
                <field-visibility>
                    <show id="lecm-document:doc-type"/>
                    <show id="lecm-document:title"/>
                    <show id="lecm-document:regnum"/>
                    <show id="lecm-document:present-string"/>
                    <show id="lecm-document:doc-date"/>
                    <show id="lecm-statemachine:status" force="true"/>
                    <show id="lecm-document:subject-assoc"/>
                    <show id="lecm-document:author-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document:present-string" label="Название"/>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-document:base">
        <forms>
            <form id="doc-right-parts">
                <field-visibility>
                    <show id="fake:document-actions"/>
                    <show id="fake:base-doc-actions"/>
                    <show id="fake:document-metadata"/>
                    <show id="fake:document-attachments"/>
                    <show id="fake:document-errands"/>
                    <show id="fake:document-workflows"/>
                    <show id="fake:document-connections"/>
                    <show id="fake:document-members"/>
                    <show id="fake:document-tags"/>
                    <show id="fake:document-history"/>
                    <show id="fake:document-forms"/>
                    <show id="fake:comments"/>
                    <show id="fake:document-signed-docflow"/>
                </field-visibility>
                <appearance>
                    <field id="fake:document-actions">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/dashlets/document-actions</control-param>
                        </control>
                    </field>
                    <field id="fake:base-doc-actions">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">lecm/components/dashlets/base-doc-actions</control-param>
                        </control>
                    </field>
                    <field id="fake:document-metadata">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-meta</control-param>
                        </control>
                    </field>
                    <field id="fake:document-attachments">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-attachments</control-param>
                            <!--<control-param name="baseDocAssocName"></control-param>-->
                        </control>
                    </field>
                    <field id="fake:document-errands">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-errands</control-param>
                        </control>
                    </field>
                    <field id="fake:document-workflows">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-workflows</control-param>
                        </control>
                    </field>
                    <field id="fake:document-connections">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/connections</control-param>
                            <!--<control-param name="excludeType"></control-param>-->
                        </control>
                    </field>
                    <field id="fake:document-members">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-members</control-param>
                        </control>
                    </field>
                    <field id="fake:document-tags">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-tags</control-param>
                        </control>
                    </field>
                    <field id="fake:document-history">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-history</control-param>
                        </control>
                    </field>
                    <field id="fake:document-forms">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/forms</control-param>
                        </control>
                    </field>
                    <field id="fake:comments">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/comments</control-param>
                            <control-param name="activityType">document</control-param>
                        </control>
                    </field>
                    <field id="fake:document-signed-docflow">
                        <control template="/ru/it/lecm/documents/controls/right-part-dashlet-control.ftl">
                            <control-param name="uri">/lecm/components/document/document-signed-docflow</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="DocumentLibrary">
        <metadata-templates>
            <template id="baseDocument">
                <evaluator>evaluator.ru.it.lecm.documents.isBase</evaluator>
                <line index="10" id="list-present" view="detailed">{list-present}</line>
                <line index="20" id="date">{date}</line>
                <line index="30" id="tags" view="detailed">{tags}</line>
            </template>
        </metadata-templates>
    </config>

    <!--<config evaluator="string-compare" condition="DocLibCustom">
                <dependencies>
            <js src="/scripts/lecm-documents/contracts-renderers-register.js"/>
            <js src="/scripts/lecm-documents/lecm-doc-list-overrride.js"/>
            <js src="/scripts/lecm-documents/lecm-doc-tree-overrride.js"/>
        </dependencies>
    </config>-->
	<config evaluator="node-type" condition="lecm-doc-dic:subjects">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-doc-dic:subject-code"/>
					<show id="lecm-doc-dic:subject-description"/>
				</field-visibility>
				<appearance>
					<field id="lecm-doc-dic:subject-code">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="LECMUNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

	<config evaluator="model-type" condition="lecm-doc-dic:subjects">
		<forms>
			<form>
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-doc-dic:subject-code"/>
					<show id="lecm-doc-dic:subject-description"/>
				</field-visibility>
				<appearance>
					<field id="lecm-doc-dic:subject-code">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
							<constraint type="LECMUNIQUE" validation-handler="LogicECM.validation.uniquenessValidation" event="keyup" />
						</constraint-handlers>
					</field>
				</appearance>
			</form>
			<form id="search">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-doc-dic:subject-code"/>
					<show id="lecm-doc-dic:subject-description"/>
				</field-visibility>
				<appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
					<field id="lecm-doc-dic:subject-code" mandatory="false">
						<control template="/ru/it/lecm/base-share/components/controls/unique.value.ftl"/>
						<constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
						</constraint-handlers>
					</field>
				</appearance>
			</form>
			<form id="datagrid">
				<field-visibility>
					<show id="cm:name"/>
					<show id="lecm-doc-dic:subject-code"/>
					<show id="lecm-doc-dic:subject-description"/>
				</field-visibility>
			</form>
		</forms>
	</config>

    <config evaluator="node-type" condition="lecm-doc-type-settings-dic:document-type-settings">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-doc-type-settings-dic:document-type"/>
                    <show id="lecm-doc-type-settings-dic:default-upload-attachment-category"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-doc-type-settings-dic:document-type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscript">lecm/documents/types</control-param>
                            <control-param name="webscriptType">server</control-param>
                            <control-param name="changeItemFireAction">changeAttachToDocumentType</control-param>
                        </control>
                    </field>
                    <field id="lecm-doc-type-settings-dic:default-upload-attachment-category">
                        <control template="/ru/it/lecm/documents/controls/select-document-category-control.ftl">
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"></control-param>
                            <control-param name="changerKind">type</control-param>
                            <control-param name="updateOnEvent">changeAttachToDocumentType</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-doc-type-settings-dic:document-type-settings">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-doc-type-settings-dic:document-type"/>
                    <show id="lecm-doc-type-settings-dic:default-upload-attachment-category"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-doc-type-settings-dic:document-type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscript">lecm/documents/types</control-param>
                            <control-param name="webscriptType">server</control-param>
                            <control-param name="changeItemFireAction">changeAttachToDocumentType</control-param>
                        </control>
                    </field>
                    <field id="lecm-doc-type-settings-dic:default-upload-attachment-category">
                        <control template="/ru/it/lecm/documents/controls/select-document-category-control.ftl">
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"></control-param>
                            <control-param name="changerKind">type</control-param>
                            <control-param name="updateOnEvent">changeAttachToDocumentType</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-doc-type-settings-dic:document-type"/>
                    <show id="lecm-doc-type-settings-dic:default-upload-attachment-category"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-doc-type-settings-dic:document-type">
                        <control template="/ru/it/lecm/base-share/components/controls/select-one-with-webscript-values.ftl">
                            <control-param name="webscript">lecm/documents/types</control-param>
                            <control-param name="webscriptType">server</control-param>
                            <control-param name="changeItemFireAction">changeAttachToDocumentType</control-param>
                        </control>
                    </field>
                    <field id="lecm-doc-type-settings-dic:default-upload-attachment-category">
                        <control template="/ru/it/lecm/documents/controls/select-document-category-control.ftl">
                            <control-param name="notSelectedOptionShow">true</control-param>
                            <control-param name="notSelectedOptionLabel"></control-param>
                            <control-param name="changerKind">type</control-param>
                            <control-param name="updateOnEvent">changeAttachToDocumentType</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-doc-type-settings-dic:document-type"/>
                    <show id="lecm-doc-type-settings-dic:default-upload-attachment-category"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-doc-type-settings-dic:document-type" substituteString="{lecm-doc-type-settings-dic:document-type?type_label}"/>
                </appearance>
            </form>
        </forms>
    </config>

	<config evaluator="aspect" condition="lecm-document-aspects:parent-document">
		<forms>
			<form>
				<field-visibility>
					<show id="lecm-document-aspects:parent-document-assoc" for-mode="view"/>
				</field-visibility>
				<appearance>
					<field id="lecm-document-aspects:parent-document-assoc">
						<control template="/ru/it/lecm/documents/controls/parent-document-control.ftl"/>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="node-type" condition="lecm-doc-dic-dm:deliveryMethod">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" force="true"/>
                    <show id="lecm-doc-dic-dm:deliveryMethod-code" force="true"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-doc-dic-dm:deliveryMethod">
        <forms>
            <form>
                <field-visibility>
                    <show id="cm:name" force="true"/>
                    <show id="lecm-doc-dic-dm:deliveryMethod-code" force="true"/>
                </field-visibility>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="cm:name" force="true"/>
                    <show id="lecm-doc-dic-dm:deliveryMethod-code" force="true"/>
                </field-visibility>
                <appearance>
                    <field id="cm:name" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-doc-dic-dm:deliveryMethod-code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

	<config evaluator="string-compare" condition="attach-to-document">
		<forms>
			<form>
				<field-visibility>
					<show id="document"/>
					<show id="category"/>
				</field-visibility>
				<appearance>
					<set id="set" template="/ru/it/lecm/documents/sets/attach-to-document-set.ftl"/>

					<field id="document" label-id="label.attach-to-document.document" set="set">
						<control template="/ru/it/lecm/base-share/components/controls/association-complex-inline-control.ftl">
							<control-param name="itemType">lecm-document:base</control-param>
							<control-param name="rootLocation">/app:company_home/cm:Business_x0020_platform/cm:Documents</control-param>
							<control-param name="nameSubstituteString">{lecm-document:ext-present-string}&lt;/br&gt;{lecm-document:list-present-string}</control-param>
							<control-param name="selectedItemsNameSubstituteString">{lecm-document:ext-present-string}</control-param>
							<control-param name="changeItemsFireAction">changeAttachToDocument</control-param>
                            <control-param name="plane">true</control-param>
                            <control-param name="showSearch">true</control-param>
						</control>
					</field>
					<field id="category" label-id="label.attach-to-document.category" set="set">
						<control template="/ru/it/lecm/documents/controls/select-document-category-control.ftl">
							<control-param name="notSelectedOptionShow">true</control-param>
							<control-param name="notSelectedOptionLabel"></control-param>
						</control>
					</field>
				</appearance>
			</form>
		</forms>
	</config>

    <config evaluator="string-compare" condition="move-to-another-category">
        <forms>
            <form>
                <field-visibility>
                    <show id="document"/>
                    <show id="category"/>
                    <show id="fullMove"/>
                </field-visibility>
                <appearance>
                    <set id="set" template="/ru/it/lecm/documents/sets/attach-to-document-set.ftl"/>

                    <field id="document" set="set">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl">
                            <control-param name="contextProperty">document</control-param>
                        </control>
                    </field>
                    <field id="fullMove" set="set">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-value.ftl">
                            <control-param name="fieldValue">true</control-param>
                        </control>
                    </field>
                    <field id="category" label-id="label.attach-to-document.category" set="set">
                        <control template="/ru/it/lecm/documents/controls/select-document-category-control.ftl">
                            <control-param name="notSelectedOptionShow">false</control-param>
                            <control-param name="defaultValueContextProperty">category</control-param>
                            <control-param name="documentFromArgs">document</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-document-stamp:stamp">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-document-stamp:title"/>
                    <show id="lecm-document-stamp:code"/>
                    <show id="lecm-document-stamp:width"/>
                    <show id="lecm-document-stamp:height"/>
                    <show id="lecm-document-stamp:image-size"/>
                    <show id="lecm-document-stamp:substitude-string"/>
                    <show id="lecm-document-stamp:font-size"/>
                    <show id="lecm-document-stamp:horizontal-align"/>
                    <show id="lecm-document-stamp:vertical-align"/>
                    <show id="lecm-document-stamp:image-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document-stamp:horizontal-align">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                    <field id="lecm-document-stamp:vertical-align">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                    <field id="lecm-document-stamp:image-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-dnd-uploader-control.ftl">
                            <control-param name="uploadDirectoryPath">{usertemp}</control-param>
                            <control-param name="showUploadNewVersion">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-document-stamp:image-size">
                        <control template="/ru/it/lecm/documents/controls/document-pdf-stamp-size-control.ftl">
                            <control-param name="uploadDirectoryPath">{usertemp}</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
            <form id="search">
                <field-visibility>
                    <show id="lecm-document-stamp:title"/>
                    <show id="lecm-document-stamp:code"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document-stamp:title" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                    <field id="lecm-document-stamp:code" mandatory="false">
                        <constraint-handlers>
                            <constraint type="MANDATORY" validation-handler="LogicECM.constraints.notMandatory" event="keyup" />
                        </constraint-handlers>
                    </field>
                </appearance>
            </form>

            <form id="datagrid">
                <field-visibility>
                    <show id="lecm-document-stamp:title"/>
                    <show id="lecm-document-stamp:code"/>
                </field-visibility>
            </form>
        </forms>
    </config>

    <config evaluator="node-type" condition="lecm-document-stamp:stamp">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-document-stamp:title"/>
                    <show id="lecm-document-stamp:code"/>
                    <show id="lecm-document-stamp:width"/>
                    <show id="lecm-document-stamp:height"/>
                    <show id="lecm-document-stamp:image-size"/>
                    <show id="lecm-document-stamp:substitude-string"/>
                    <show id="lecm-document-stamp:font-size"/>
                    <show id="lecm-document-stamp:horizontal-align"/>
                    <show id="lecm-document-stamp:vertical-align"/>
                    <show id="lecm-document-stamp:image-assoc"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document-stamp:horizontal-align">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                    <field id="lecm-document-stamp:vertical-align">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                    <field id="lecm-document-stamp:image-assoc">
                        <control template="/ru/it/lecm/base-share/components/controls/lecm-dnd-uploader-control.ftl">
                            <control-param name="uploadDirectoryPath">{usertemp}</control-param>
                            <control-param name="showUploadNewVersion">false</control-param>
                        </control>
                    </field>
                    <field id="lecm-document-stamp:image-size">
                        <control template="/ru/it/lecm/documents/controls/document-pdf-stamp-size-control.ftl">
                            <control-param name="uploadDirectoryPath">{usertemp}</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="activiti$documentStamp">
        <forms>
            <form>
                <field-visibility>
                    <show id="packageItems"/>
                    <show id="lecmWorkflowDocument:documentStampSettings"/>
                </field-visibility>
                <appearance>
                    <field id="packageItems">
                        <control template="/ru/it/lecm/base-share/components/controls/hidden-association-control.ftl"/>
                    </field>
                    <field id="lecmWorkflowDocument:documentStampSettings">
                        <control template="/ru/it/lecm/documents/controls/document-pdf-stamp-control.ftl">
                            <control-param name="code">DEFAULT</control-param>
                        </control>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="string-compare" condition="Workflow">
        <hidden-workflows>
            <workflow name="activiti$eventsMemberDecline"/>
            <workflow name="activiti$eventsRequestNewTime"/>
            <workflow name="activiti$removeRepeatable"/>
        </hidden-workflows>
    </config>

    <config evaluator="node-type" condition="lecm-document-global-settings:settings">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-document-global-settings:links-view-mode"/>
                    <show id="lecm-document-global-settings:hide-properties-for-recipients"/>
                    <show id="lecm-document-global-settings:enable-passive"/>
                    <show id="lecm-document-global-settings:n-days"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document-global-settings:links-view-mode">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

    <config evaluator="model-type" condition="lecm-document-global-settings:settings">
        <forms>
            <form>
                <field-visibility>
                    <show id="lecm-document-global-settings:links-view-mode"/>
                    <show id="lecm-document-global-settings:hide-properties-for-recipients"/>
                    <show id="lecm-document-global-settings:enable-passive"/>
                    <show id="lecm-document-global-settings:n-days"/>
                </field-visibility>
                <appearance>
                    <field id="lecm-document-global-settings:links-view-mode">
                        <control template="/ru/it/lecm/base-share/components/controls/selectone.ftl"/>
                    </field>
                </appearance>
            </form>
        </forms>
    </config>

</alfresco-config>
