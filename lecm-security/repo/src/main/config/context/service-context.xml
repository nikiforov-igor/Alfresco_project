<?xml version="1.0" encoding="UTF-8"?>
<!-- xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd" -->
<beans xmlns="http://www.springframework.org/schema/beans"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:util="http://www.springframework.org/schema/util"
		xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
							http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd">

	<!-- Registration of Delegations models -->
<!--
	<bean id="${groupId}.${artifactId}.securityBootstrap" parent="dictionaryModelBootstrap" depends-on="dictionaryBootstrap">
		<property name="models">
			<list>
				<value>alfresco/module/${artifactId}/models/lecm-security-model.xml</value>
			</list>
		</property>
		<property name="labels">
			<list>
				<value>alfresco/module/${artifactId}/messages/security</value>
			</list>
		</property>
	</bean>
  -->
	<!--  регистрируем свою часть подсистемы безопасности "Гуппы полномочий" -->
	<bean id="lecmModuleSecurePermissionModelBootstrap" parent="permissionModelBootstrap" depends-on="documents.LogicEcmModelsBootstrap">
		<property name="model">
			<value>alfresco/module/${artifactId}/alfresco/model/lecm/lecmPermissionDefinitions.xml</value>
		</property>
	</bean>


	<bean id="lecmSecurityGroupsBean" class="ru.it.lecm.security.beans.LECMSecurityGroupsBean" depends-on="lecmModuleSecurePermissionModelBootstrap">
		<property name="authorityService" ref="authorityService" />
		<property name="safeMode" value="true" />
		<!--
		<property name="serviceRegistry" ref="ServiceRegistry" />
		<property name="repositoryHelper" ref="repositoryHelper"/>
		  -->
	</bean>

	<bean id="lecmPermissionServiceBean" class="ru.it.lecm.security.beans.LecmPermissionServiceImpl"
			depends-on="lecmModuleSecurePermissionModelBootstrap">

		<property name="nodeService" ref="nodeService" />
		<property name="permissionService" ref="permissionService" />
		<property name="authorityService" ref="authorityService" />
		<property name="orgStructureNotifiers" ref="lecmSecurityGroupsBean" />

		<property name="modelDAOService" ref="permissionsModelDAO" />

		<!-- Наследование родительских прав для случая статики и динамики:
			по-умолчанию: статика НЕ наследует (false), динамика Наследует (true)
		  -->
		<property name="staticInheritParentPermissions" value="false" />
		<property name="dynamicInheritParentPermissions" value="true" />
	</bean>

    <bean id="permissionScript" parent="baseJavaScriptExtension" class="ru.it.lecm.security.script.LecmPermissionWebScript">
        <property name="extensionName">
            <value>lecmPermission</value>
        </property>
        <property name="authService" ref="authenticationService"/>
        <property name="lecmPermissionService" ref="lecmPermissionServiceBean"/>
    </bean>
</beans>
